{"version":3,"sources":["webpack:///0-d3b981caa3eb21697c96.js","webpack:///./src/List/HelpLink.component.js","webpack:///./src/EditModel/formHelpers.js","webpack:///./src/config/inlinehelp-mapping.json","webpack:///./src/utils/Auth.js","webpack:///./src/EditModel/FormHeading.js","webpack:///./src/EditModel/SaveButton.component.js","webpack:///./src/config/field-config/field-groups.js","webpack:///./src/EditModel/BackButton.component.js","webpack:///./src/EditModel/form-rules/index.js","webpack:///./src/EditModel/CancelButton.component.js","webpack:///./src/config/field-config/field-defaults.js","webpack:///./src/config/field-rules.js","webpack:///./src/EditModel/FormButtons.component.js","webpack:///./src/EditModel/DataIndicatorGroupsAssignment.component.js","webpack:///./src/EditModel/EditModelForm.component.js","webpack:///./src/EditModel/IndicatorExpressionManagerContainer.component.js","webpack:///./src/EditModel/SharingNotification.component.js","webpack:///./src/EditModel/data-element/DataElementGroupsAssignment.component.js","webpack:///./src/EditModel/extraFields.js","webpack:///./src/EditModel/form-helpers/validateFields.js","webpack:///./src/config/disabled-on-edit/category.js","webpack:///./src/config/disabled-on-edit/categoryCombo.js","webpack:///./src/config/disabled-on-edit/categoryOptionCombo.js","webpack:///./src/config/disabled-on-edit/categoryOptionGroup.js","webpack:///./src/config/disabled-on-edit/categoryOptionGroupSet.js","webpack:///./src/config/disabled-on-edit/index.js","webpack:///./src/config/disabled-on-edit/optionSet.js","webpack:///./src/config/disabled-on-edit/programRule.js","webpack:///./~/d2-ui/lib/expression-manager/ExpressionStatus.store.js","webpack:///./~/material-ui/Stepper/index.js","webpack:///./src/EditModel/EditModel.component.js","webpack:///./src/EditModel/EditModelContainer.component.js"],"names":["webpackJsonp","1654","module","__webpack_exports__","__webpack_require__","mappingPathExists","mappingKey","inlineHelpMapping","getDocsVersion","_ref","major","minor","snapshot","replacePlaceholder","variablesToReplace","placeholderRegex","replace","match","variable","has","get","replaceMappingPathPlaceholder","path","Object","keys","find","pathToMatch","RegExp","test","getPartialHelpContentPath","replacedMappingPath","variablesToReplaceCamel","findHelpLinkForPath","schema","Map","camelCaseToUnderscores","HelpLink","_ref2","_ref3","d2","window","location","hash","docsLink","system","version","helpLink","__WEBPACK_IMPORTED_MODULE_0_react___default","a","createElement","__WEBPACK_IMPORTED_MODULE_2_material_ui_IconButton___default","href","target","rel","tooltip","i18n","getTranslation","tooltipPosition","iconClassName","iconStyle","top","__WEBPACK_IMPORTED_MODULE_0_react__","n","__WEBPACK_IMPORTED_MODULE_1_prop_types__","__WEBPACK_IMPORTED_MODULE_1_prop_types___default","__WEBPACK_IMPORTED_MODULE_2_material_ui_IconButton__","__WEBPACK_IMPORTED_MODULE_3_d2_utilizr__","__WEBPACK_IMPORTED_MODULE_4__config_inlinehelp_mapping_json__","__WEBPACK_IMPORTED_MODULE_4__config_inlinehelp_mapping_json___default","propTypes","PropTypes","string","isRequired","contextTypes","object","1655","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","getLabelText","labelText","fieldConfig","length","undefined","props","translateValidators","validators","map","validator","_extends","message","setRequiredFieldsLabelText","translatedName","setRequiredFieldsStepName","modelType","fieldGroups","isGroupedFields","stepNo","groupNoByName","name","stepName","groupNameByStep","createUniqueValidator","modelDefinition","uid","trim","modelDefinitionWithFilter","filter","on","fieldOptions","referenceProperty","equals","notEqual","list","collection","size","getInstance","addUniqueValidatorWhenUnique","modelToEdit","unique","asyncValidators","id","createAttributeFieldConfigs","schemaName","models","attributeProperties","attributeName","attribute","createFieldConfig","valueType","type","typeToFieldMap","optionSet","required","Boolean","mandatory","options","option","displayName","code","isAttribute","model","attributes","Set","addValuesToFieldConfigs","fieldConfigs","transformValuesUsingConverters","addModelToFieldConfigProps","createFieldConfigsFor","fieldNames","filterFieldConfigs","identity","includeAttributes","runRules","customFieldOrderName","mapPropsStream","props$","combineLatest","Observable","fromPromise","createFieldConfigForModelTypes","fieldConfigsWithValues","fieldConfigsToUse","applyRulesToFieldConfigs","getRulesForModelType","createFormFor","source$","properties","CreatedFormBuilderForm","editFieldChanged","_ref3$detailsFormStat","detailsFormStatusChange","noop","onUpdateField","convertValueUsingFieldConverter","fieldConfigsAfterRules","__WEBPACK_IMPORTED_MODULE_10_react___default","__WEBPACK_IMPORTED_MODULE_11_d2_ui_lib_forms_FormBuilder_component__","fields","onUpdateFormStatus","compose","d","addPropsToFieldConfig","__WEBPACK_IMPORTED_MODULE_0_d2_lib_d2__","__WEBPACK_IMPORTED_MODULE_1__forms_FormFieldsForModel__","__WEBPACK_IMPORTED_MODULE_2__forms_FormFieldsManager__","__WEBPACK_IMPORTED_MODULE_3__config_field_config_field_order__","__WEBPACK_IMPORTED_MODULE_4__config_field_overrides_index__","__WEBPACK_IMPORTED_MODULE_5__config_field_config_field_groups__","__WEBPACK_IMPORTED_MODULE_6__forms_fields__","__WEBPACK_IMPORTED_MODULE_7_recompose_mapPropsStream__","__WEBPACK_IMPORTED_MODULE_7_recompose_mapPropsStream___default","__WEBPACK_IMPORTED_MODULE_8_lodash_fp__","__WEBPACK_IMPORTED_MODULE_9_rxjs__","__WEBPACK_IMPORTED_MODULE_10_react__","__WEBPACK_IMPORTED_MODULE_12__form_rules__","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","push","Array","isArray","TypeError","assign","source","prototype","hasOwnProperty","call","regeneratorRuntime","mark","_callee","forcedFieldOrderNames","formFieldsManager","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_step$value","fieldName","overrideConfig","wrap","_context","prev","sent","FormFieldsManager","FormFieldsForModel","setFieldOrder","fieldOrderNames","for","fieldOverrides","addFieldOverrideFor","t0","return","finish","abrupt","getFormFieldsForModel","concat","stop","_x2","_x3","beforePassToFieldConverter","onChangeCallback","converter","beforeUpdateConverter","includes","1656","exports","/edit/categorySection/categoryOptionGroupSet","/edit/categorySection/categoryOptionGroup","/edit/categorySection/categoryOptionCombo","/edit/categorySection/categoryOption","/edit/categorySection/categoryCombo","/edit/categorySection/category","/list/categorySection","/edit/dataElementSection/dataElementGroupSet","/edit/dataElementSection/dataElementGroup","/edit/dataElementSection/dataElement","/list/dataElementSection","/edit/dataSetSection/dataSet/${objectId}/sections","/edit/dataSetSection/dataSet","/list/dataSetSection/dataSet","/edit/indicatorSection/programIndicatorGroup","/list/indicatorSection/programIndicatorGroup","/edit/indicatorSection/programIndicator","/list/indicatorSection/programIndicator","/edit/indicatorSection/indicatorGroupSet","/edit/indicatorSection/indicatorGroup","/edit/indicatorSection/indicatorType","/edit/indicatorSection/indicator","/list/indicatorSection","/edit/organisationUnitSection/organisationUnitGroupSet","/edit/organisationUnitSection/organisationUnitGroup","/edit/organisationUnitSection/organisationUnitLevel","/edit/organisationUnitSection/organisationUnit","/list/organisationUnitSection","/edit/programSection/trackedEntityAttribute","/edit/programSection/programRuleVariable","/edit/programSection/relationshipType","/edit/programSection/trackedEntity","/edit/programSection/programRule","/edit/programSection/program","/list/programSection","/edit/validationSection/validationNotificationTemplate","/edit/validationSection/validationRuleGroup","/edit/validationSection/validationRule","/list/validationSection","/edit/otherSection/legendSet","/list/otherSection/legendSet","/edit/otherSection/pushAnalysis","/list/otherSection/pushAnalysis","/edit/otherSection/externalMapLayer","/list/otherSection/externalMapLayer","/edit/otherSection/${objectType}","/list/otherSection/${objectType}","1658","withAuth","__WEBPACK_IMPORTED_MODULE_2_recompose_getDisplayName__","__WEBPACK_IMPORTED_MODULE_2_recompose_getDisplayName___default","WrappedComponent","WithAuth","extraProps","getCurrentUser","currentUser","getModelDefinitionByName","getDisplayName","1684","_objectWithoutProperties","obj","indexOf","FormHeading","context","level","children","groupName","isDirtyHandler","__WEBPACK_IMPORTED_MODULE_3_d2_ui_lib_headings_Heading_component__","__WEBPACK_IMPORTED_MODULE_5__BackButton_component__","onClick","goToAndScrollUp","__WEBPACK_IMPORTED_MODULE_4__List_HelpLink_component__","__WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_component_helpers_addD2Context__","__WEBPACK_IMPORTED_MODULE_6__router_utils__","oneOfType","array","number","func","defaultProps","addD2Context","1685","SaveButton","isValid","isSaving","rest","buttonText","__WEBPACK_IMPORTED_MODULE_2_material_ui_RaisedButton_RaisedButton___default","primary","label","disabled","__WEBPACK_IMPORTED_MODULE_2_material_ui_RaisedButton_RaisedButton__","__WEBPACK_IMPORTED_MODULE_3_d2_ui_lib_component_helpers_addD2Context__","bool","1686","__WEBPACK_IMPORTED_MODULE_0_lodash_fp__","__WEBPACK_IMPORTED_MODULE_1__field_order__","fieldGroupsForModelType","fieldOrder","modelGroup","findIndex","group","groupsByField","reduce","fieldsWithStep","groupFields","field","1687","BackButton","_props$isDirtyHandler","modelToEditStore","getState","bind","otherProps","onClickWithConfirm","dirty","confirm","__WEBPACK_IMPORTED_MODULE_1_material_ui_IconButton_IconButton___default","__WEBPACK_IMPORTED_MODULE_1_material_ui_IconButton_IconButton__","__WEBPACK_IMPORTED_MODULE_3_d2_lib_d2__","__WEBPACK_IMPORTED_MODULE_4__EditModel_modelToEditStore__","React","1688","fieldRules","changeValue","operationParams","ruleResult","setValue","setProp","propName","thenValue","elseValue","hideField","hiddenComponent","component","showField","getOperation","operationType","operationsMap","getWhenOperator","operatorType","whenOperatorMap","hasValueOperator","hasStringValueOperator","toString","equalsOperator","left","right","notEqualsOperator","oneOfOperator","noneOfOperator","isPointOperator","poly","JSON","parse","isNaN","e","isHiddenFieldOperator","b","systemSettingIsTrueOperator","settingKey","systemSettingsStore","systemSettingIsFalseOperator","ruleRunner","whenFieldName","operatorFn","whenValue","rulesRunner","rules","rule","whenRule","index","log","debug","operator","fieldConfigForRule","forEach","when","rulePassed","some","result","operations","operation","fieldConfigForOperation","__WEBPACK_IMPORTED_MODULE_0_d2_utilizr_lib_noop__","__WEBPACK_IMPORTED_MODULE_0_d2_utilizr_lib_noop___default","__WEBPACK_IMPORTED_MODULE_1_loglevel__","__WEBPACK_IMPORTED_MODULE_1_loglevel___default","__WEBPACK_IMPORTED_MODULE_2_lodash_fp__","__WEBPACK_IMPORTED_MODULE_3_d2_utilizr_lib_isArray__","__WEBPACK_IMPORTED_MODULE_3_d2_utilizr_lib_isArray___default","__WEBPACK_IMPORTED_MODULE_4__config_field_rules__","__WEBPACK_IMPORTED_MODULE_5__App_systemSettingsStore__","negate","1761","CancelButton","_ref$isDirtyHandler","isPristine","shouldConfirm","__WEBPACK_IMPORTED_MODULE_1_material_ui_FlatButton___default","secondary","__WEBPACK_IMPORTED_MODULE_1_material_ui_FlatButton__","__WEBPACK_IMPORTED_MODULE_3__EditModel_modelToEditStore__","1769","defaultAnalyticsPeriodBoundaries","current","enrollment","analyticsPeriodBoundaryType","AFTER_START_OF_REPORTING_PERIOD","boundaryTarget","ENROLLMENT_DATE","BEFORE_END_OF_REPORTING_PERIOD","event","EVENT_DATE","val","isEqual","__WEBPACK_IMPORTED_MODULE_1__field_overrides_program_indicator_enums__","1770","setValueTypeToOptionSet","__WEBPACK_IMPORTED_MODULE_0__field_config_field_defaults__","generated","pattern","coordinates","featureType","1775","FormButtons","defaultStyle","marginTop","buttonStyle","marginRight","width","buttonsToRender","style","child","cloneElement","__WEBPACK_IMPORTED_MODULE_1_d2_utilizr_lib_isArray__","__WEBPACK_IMPORTED_MODULE_1_d2_utilizr_lib_isArray___default","isFormValid","2101","_defineProperty","defineProperty","enumerable","configurable","writable","getLoadingIndicator","textAlign","__WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_circular_progress_CircularProgress__","findValue","optionList","from","indicatorGroups","values","indicatorGroup","__WEBPACK_IMPORTED_MODULE_1_d2_lib_d2__","__WEBPACK_IMPORTED_MODULE_3__forms_form_fields_drop_down__","__WEBPACK_IMPORTED_MODULE_4__indicatorGroupsStore__","createClass","getInitialState","store","setState","indicatorGroupValues","remove","save","indicatorGroupSets","componentDidMount","_this","Api","getApi","paging","response","subscription","subscribe","forceUpdate","componentWillUnmount","unsubscribe","render","_this2","state","indicatorGroupSet","ig","text","translateLabel","onChange","_updateGroupStatus","fullWidth","indicatorGroupSetId","oldValue","2102","__WEBPACK_IMPORTED_MODULE_2_rxjs__","__WEBPACK_IMPORTED_MODULE_3_material_ui_Stepper__","__WEBPACK_IMPORTED_MODULE_4_d2_lib_d2__","__WEBPACK_IMPORTED_MODULE_5_d2_utilizr__","__WEBPACK_IMPORTED_MODULE_6_d2_ui_lib_circular_progress_CircularProgress__","__WEBPACK_IMPORTED_MODULE_7_d2_ui_lib_i18n_Translate_mixin__","__WEBPACK_IMPORTED_MODULE_8_d2_ui_lib_forms_FormBuilder_component__","__WEBPACK_IMPORTED_MODULE_9__config_field_config_field_groups__","__WEBPACK_IMPORTED_MODULE_10__config_disabled_on_edit__","__WEBPACK_IMPORTED_MODULE_11__modelToEditStore__","__WEBPACK_IMPORTED_MODULE_12__objectActions__","__WEBPACK_IMPORTED_MODULE_13__Snackbar_snack_actions__","__WEBPACK_IMPORTED_MODULE_14__SaveButton_component__","__WEBPACK_IMPORTED_MODULE_15__CancelButton_component__","__WEBPACK_IMPORTED_MODULE_16__SharingNotification_component__","__WEBPACK_IMPORTED_MODULE_17__FormButtons_component__","__WEBPACK_IMPORTED_MODULE_18__extraFields__","__WEBPACK_IMPORTED_MODULE_19__App_appStateStore__","__WEBPACK_IMPORTED_MODULE_20__formHelpers__","__WEBPACK_IMPORTED_MODULE_21__form_rules__","__WEBPACK_IMPORTED_MODULE_22__form_helpers_validateFields__","currentSection$","appState","sideBar","currentSection","currentSubSection","distinctUntilChanged","editFormFieldsForCurrentSection$","flatMap","isAddOperation","d2$","modelToEditAndModelForm$","currentType","_ref4","editFormFieldsForCurrentModelType","disabledOnEdit","extraFields","config","isLoading","modelId","onSaveSuccess","onSaveError","onCancel","mixins","Translate","formState","validating","valid","pristine","activeStep","componentWillMount","newState","setActiveStep","errorMessage","snackActions","show","action","renderSharingNotification","formPaperStyle","margin","position","renderStepper","steps","linear","s","renderForm","padding","_onUpdateField","_onUpdateFormStatus","ref","setFormRef","_saveAction","_closeAction","loading","stepsByField","display","form","formRef","objectActions","update","_this3","preventDefault","invalidFieldMessage","getFirstInvalidFieldMessage","saveObject","translate","httpStatusCode","warn","isString","2103","__WEBPACK_IMPORTED_MODULE_1_d2_ui_lib_action_Action__","__WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_expression_manager_ExpressionManager__","__WEBPACK_IMPORTED_MODULE_3_d2_ui_lib_expression_manager_ExpressionStatus_store__","__WEBPACK_IMPORTED_MODULE_5_rxjs__","__WEBPACK_IMPORTED_MODULE_6_d2_ui_lib_i18n_Translate_mixin__","Action","createActionsFromNames","requestExpressionStatus","debounceTime","encodedFormula","encodeURIComponent","data","url","request","getD2","concatAll","indicatorExpressionStatusStore","IndicatorExpressionManagerContainer","indicatorExpressionChanged","description","formula","titleText","organisationUnitGroups","constants","programTrackedEntityAttributes","programIndicators","programDataElements","organisationUnitGroup","toArray","constant","refs","expressionManager","getExpressionManager","descriptionLabel","descriptionValue","formulaValue","expressionStatusStore","expressionChanged","2104","__WEBPACK_IMPORTED_MODULE_1_d2_ui_lib_i18n_Translate_mixin__","__WEBPACK_IMPORTED_MODULE_2_d2_lib_d2__","__WEBPACK_IMPORTED_MODULE_3_material_ui_FontIcon_FontIcon__","__WEBPACK_IMPORTED_MODULE_3_material_ui_FontIcon_FontIcon___default","__WEBPACK_IMPORTED_MODULE_4_material_ui_Paper_Paper__","__WEBPACK_IMPORTED_MODULE_4_material_ui_Paper_Paper___default","__WEBPACK_IMPORTED_MODULE_5__utils_Auth__","SharingNotification","modelDef","createPublic","canCreatePublic","createPrivate","canCreatePrivate","notificationStyle","background","notificationTextStyle","verticalAlign","lineHeight","paddingLeft","toRender","zDepth","className","2105","getLoadingdataElement","dataElementGroups","dataElementGroup","__WEBPACK_IMPORTED_MODULE_4__dataElementGroupsStore__","dataElementGroupValues","dataElementGroupSets","dataElementGroupSetId","dataElementGroupSet","2108","_classCallCheck","instance","Constructor","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_1_material_ui_Dialog_Dialog__","__WEBPACK_IMPORTED_MODULE_1_material_ui_Dialog_Dialog___default","__WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton__","__WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton___default","__WEBPACK_IMPORTED_MODULE_4_d2_ui_lib_component_helpers_addD2Context__","__WEBPACK_IMPORTED_MODULE_5__IndicatorExpressionManagerContainer_component__","__WEBPACK_IMPORTED_MODULE_6__modelToEditStore__","__WEBPACK_IMPORTED_MODULE_7__DataIndicatorGroupsAssignment_component__","__WEBPACK_IMPORTED_MODULE_8__data_element_DataElementGroupsAssignment_component__","_createClass","defineProperties","descriptor","protoProps","staticProps","styles","saveButton","customContentStyle","maxWidth","IndicatorExtraFields","_React$Component","getPrototypeOf","dialogValid","dialogOpen","setNumerator","setDenominator","closeDialog","saveToModelAndCloseDialog","expressionStatus","expressionFormula","expressionDescription","expressionValues","dialogActions","onTouchTap","title","open","modal","actions","contentStyle","autoScrollBodyContent","repositionOnUpdate","renderExpressionManager","Component","dataElement","indicator","2109","formRefStateClone","getStateClone","firstInvalidField","getFirstInvalidField","getErrorMessage","isInvalidField","validatedResult","isRequiredField","validateField","validateResult","invalid","fieldStep","2112","2113","2114","2115","2116","2117","__WEBPACK_IMPORTED_MODULE_0__category__","__WEBPACK_IMPORTED_MODULE_1__categoryCombo__","__WEBPACK_IMPORTED_MODULE_2__categoryOptionCombo__","__WEBPACK_IMPORTED_MODULE_3__categoryOptionGroup__","__WEBPACK_IMPORTED_MODULE_4__categoryOptionGroupSet__","__WEBPACK_IMPORTED_MODULE_5__optionSet__","__WEBPACK_IMPORTED_MODULE_6__programRule__","disabledByType","category","categoryCombo","categoryOptionCombo","categoryOptionGroup","categoryOptionGroupSet","programRule","2118","2119","2120","__WEBPACK_IMPORTED_MODULE_0__store_Store__","2133","_interopRequireDefault","__esModule","default","Stepper","StepLabel","StepContent","StepButton","Step","_Step2","_Step3","_StepButton2","_StepButton3","_StepContent2","_StepContent3","_StepLabel2","_StepLabel3","_Stepper2","_Stepper3","2197","EditModel","__WEBPACK_IMPORTED_MODULE_1_material_ui_Paper_Paper___default","__WEBPACK_IMPORTED_MODULE_2__EditModelForm_component__","__WEBPACK_IMPORTED_MODULE_1_material_ui_Paper_Paper__","__WEBPACK_IMPORTED_MODULE_3__router_utils__","369","EditModelContainer","params","flexDirection","marginBottom","__WEBPACK_IMPORTED_MODULE_4__FormHeading__","__WEBPACK_IMPORTED_MODULE_3__EditModel_component__","__WEBPACK_IMPORTED_MODULE_2_d2_utilizr__","any"],"mappings":"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","file":"0-d3b981caa3eb21697c96.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 1654:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = HelpLink;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_material_ui_IconButton__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_material_ui_IconButton___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_material_ui_IconButton__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d2_utilizr__ = __webpack_require__(339);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d2_utilizr___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_d2_utilizr__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__config_inlinehelp_mapping_json__ = __webpack_require__(1656);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__config_inlinehelp_mapping_json___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__config_inlinehelp_mapping_json__);\n\n\n\n\n\n\n\n\n\nfunction mappingPathExists(mappingKey) {\n    return mappingKey && __WEBPACK_IMPORTED_MODULE_4__config_inlinehelp_mapping_json___default.a[mappingKey];\n}\n\n/**\n * Returns the \"version\" of the documentation that corresponds with the current dhis2 version.\n *\n * @param {Object} version - The version definition as provided by d2.system.version.\n * @param {number} version.minor - The minor dhis2 version. e.g. The 25 in 2.25.\n * @param {boolean} version.snapshot - True when the current version is the snapshot(master/development) branch.\n *\n * @returns {string} `master` for a snapshot branch. `25` for 2.25 etc.\n */\nfunction getDocsVersion(_ref) {\n    var major = _ref.major,\n        minor = _ref.minor,\n        snapshot = _ref.snapshot;\n\n    if (snapshot) {\n        return 'master';\n    }\n    return major + '.' + minor;\n}\n\n/** \n * If ${placeholder} is found in mappingKey, it will be replaced with a matching name if \n * present from variablesToReplace.  \n * \n * Eg. for the mappingKey \"/edit/otherSection/${objectType}\" the placeholder objectType\n * will be found. If an entry in variablesToReplace exists objectType will be replaced \n * with the value to this entry, say constant. This will result in the new path  \"/edit/otherSection/constant\".\n * If no match is found, the path will return.\n * \n * @param {string} mappingKey The mapping that may have a placeholder to replace\n * @param {Map} variablesToReplace The variables that are to be replaced with the placeholder \n *\n * @returns {string} The matched path with replaced placeholders if found\n */\nfunction replacePlaceholder(mappingKey, variablesToReplace) {\n    var placeholderRegex = /\\$\\{(.+?)\\}/g;\n\n    return mappingKey.replace(placeholderRegex, function (match, variable) {\n        if (variablesToReplace.has(variable)) {\n            return variablesToReplace.get(variable);\n        }\n        return '.+?';\n    });\n}\n\n/** \n * Checks if the mappingKeyPath with replaced placeholders matches the path were currently on.\n * \n * @param {string} path The path to be matched with a mappingKey \n * @param {Map} variablesToReplace The variables that are to be replaced with a placeholder \n *\n * @returns {string} The matched mappingKey with replaced placeholders if found\n */\nfunction replaceMappingPathPlaceholder(path, variablesToReplace) {\n    return Object.keys(__WEBPACK_IMPORTED_MODULE_4__config_inlinehelp_mapping_json___default.a).find(function (mappingKey) {\n        var pathToMatch = replacePlaceholder(mappingKey, variablesToReplace);\n        return new RegExp(pathToMatch).test(path);\n    });\n}\n\n// Replaces the placeholders of the matched mappingKey url to create the complete partial help content path.\nfunction getPartialHelpContentPath(replacedMappingPath, variablesToReplaceCamel) {\n    if (mappingPathExists(replacedMappingPath)) {\n        return replacePlaceholder(__WEBPACK_IMPORTED_MODULE_4__config_inlinehelp_mapping_json___default.a[replacedMappingPath], variablesToReplaceCamel);\n    }\n\n    return '';\n}\n\n/**\n * Attempts to find a help link as defined in the inlinehelp-mapping.js It will always pick the first match that it finds. Help links should therefore be\n * sorted with the longer links first.\n * The search is done using a regular expression that matches the path from the start. This means that paths that are longer/dynamic can still show help links.\n *\n * For example a help link key that is defined as  `/edit/dataElementSection/dataElement` would show up on both `/edit/dataElementSection/dataElement/add` and `/edit/dataElementSection/dataElement/wap68IYzTXr`.\n *\n * @param {string} path The current path/route that the browser is on. This is the path that the help link should be used for.\n * @param {string} schema The name of the schema to find help for.\n *\n * @returns {string} The partial path that the refers to the help content in the documentation.  e.g. `/en/user/html/manage_org_unit.html`\n */\nfunction findHelpLinkForPath(path, schema) {\n    var variablesToReplace = new Map([['objectType', schema]]);\n    var variablesToReplaceCamel = new Map([['objectType', __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3_d2_utilizr__[\"camelCaseToUnderscores\"])(schema)]]);\n\n    var replacedMappingPath = replaceMappingPathPlaceholder(path, variablesToReplace);\n\n    return getPartialHelpContentPath(replacedMappingPath, variablesToReplaceCamel);\n}\n\nfunction HelpLink(_ref2, _ref3) {\n    var schema = _ref2.schema;\n    var d2 = _ref3.d2;\n\n    var path = window.location.hash.replace(/^#/, '') // Remove leading hash\n    .replace(/\\?.+?$/, ''); // Remove query param/cache breaker\n    var docsLink = 'https://docs.dhis2.org/' + getDocsVersion(d2.system.version);\n    var helpLink = findHelpLinkForPath(path, schema);\n\n    if (helpLink) {\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            __WEBPACK_IMPORTED_MODULE_2_material_ui_IconButton___default.a,\n            {\n                href: '' + docsLink + helpLink,\n                target: '_blank',\n                rel: 'noopener noreferrer',\n                tooltip: d2.i18n.getTranslation('open_user_guide'),\n                tooltipPosition: 'bottom-center',\n                iconClassName: 'material-icons',\n                iconStyle: { top: -2 }\n            },\n            'help_outline'\n        );\n    }\n\n    return null;\n}\n\nHelpLink.propTypes = {\n    schema: __WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.string.isRequired\n};\n\nHelpLink.contextTypes = {\n    d2: __WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.object\n};\n\n/***/ }),\n\n/***/ 1655:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createFieldConfigForModelTypes; });\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = addUniqueValidatorWhenUnique;\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = isAttribute;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = createFieldConfigsFor;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = createFormFor;\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return addPropsToFieldConfig; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d2_lib_d2__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d2_lib_d2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_d2_lib_d2__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__forms_FormFieldsForModel__ = __webpack_require__(661);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__forms_FormFieldsManager__ = __webpack_require__(662);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config_field_config_field_order__ = __webpack_require__(646);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__config_field_overrides_index__ = __webpack_require__(659);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__config_field_config_field_groups__ = __webpack_require__(1686);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__forms_fields__ = __webpack_require__(223);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_recompose_mapPropsStream__ = __webpack_require__(337);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_recompose_mapPropsStream___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_recompose_mapPropsStream__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_lodash_fp__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_lodash_fp___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_lodash_fp__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_rxjs__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_rxjs__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_d2_ui_lib_forms_FormBuilder_component__ = __webpack_require__(648);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__form_rules__ = __webpack_require__(1688);\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction getLabelText(labelText) {\n    var fieldConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    // Add required indicator when the field is required\n    if (fieldConfig.props && fieldConfig.props.isRequired) {\n        return labelText + ' (*)';\n    }\n    return labelText;\n}\n\n// Translate the sync validator messages if there are any validators\nfunction translateValidators(fieldConfig, d2) {\n    if (fieldConfig.validators) {\n        fieldConfig.validators = fieldConfig.validators.map(function (validator) {\n            return _extends({}, validator, {\n                message: d2.i18n.getTranslation(validator.message)\n            });\n        });\n    }\n}\n\n// Get the field's label with required indicator if the field is required\n// Save one translated label for validation messages\nfunction setRequiredFieldsLabelText(fieldConfig, d2) {\n    fieldConfig.translatedName = d2.i18n.getTranslation(fieldConfig.props.labelText);\n    fieldConfig.props.labelText = getLabelText(fieldConfig.translatedName, fieldConfig);\n}\n\n/* \n * If the modelType are grouped in field-groups.js, the step number and group/step name \n * will be added to the fieldConfig. This string can later be used for the validating\n * step in EditModelForm.isRequiredFieldsValid to tell the user which step to find the \n * non-valid required field.\n */\nfunction setRequiredFieldsStepName(fieldConfig, modelType, d2) {\n    // TODO: Find way to fix programNotificationTemplate sending the correct modelType\n    if (__WEBPACK_IMPORTED_MODULE_5__config_field_config_field_groups__[\"a\" /* default */].isGroupedFields(modelType) && modelType !== 'programNotificationTemplate') {\n        var stepNo = __WEBPACK_IMPORTED_MODULE_5__config_field_config_field_groups__[\"a\" /* default */].groupNoByName(fieldConfig.name, modelType);\n        var stepName = __WEBPACK_IMPORTED_MODULE_5__config_field_config_field_groups__[\"a\" /* default */].groupNameByStep(stepNo, modelType);\n        fieldConfig.step = stepNo + 1 + ': ' + d2.i18n.getTranslation(stepName);\n    }\n}\n\nvar createFieldConfigForModelTypes = function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(modelType, forcedFieldOrderNames) {\n        var includeAttributes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n        var customFieldOrderName = arguments[3];\n\n        var d2, formFieldsManager, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _step$value, fieldName, overrideConfig;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n                switch (_context.prev = _context.next) {\n                    case 0:\n                        _context.next = 2;\n                        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d2_lib_d2__[\"getInstance\"])();\n\n                    case 2:\n                        d2 = _context.sent;\n                        formFieldsManager = new __WEBPACK_IMPORTED_MODULE_2__forms_FormFieldsManager__[\"a\" /* default */](new __WEBPACK_IMPORTED_MODULE_1__forms_FormFieldsForModel__[\"a\" /* default */](d2.models));\n\n                        formFieldsManager.setFieldOrder(forcedFieldOrderNames || __WEBPACK_IMPORTED_MODULE_3__config_field_config_field_order__[\"a\" /* default */].for(modelType));\n\n                        _iteratorNormalCompletion = true;\n                        _didIteratorError = false;\n                        _iteratorError = undefined;\n                        _context.prev = 8;\n                        for (_iterator = __WEBPACK_IMPORTED_MODULE_4__config_field_overrides_index__[\"a\" /* default */].for(customFieldOrderName || modelType)[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                            _step$value = _slicedToArray(_step.value, 2), fieldName = _step$value[0], overrideConfig = _step$value[1];\n\n                            formFieldsManager.addFieldOverrideFor(fieldName, overrideConfig);\n                        }\n\n                        _context.next = 16;\n                        break;\n\n                    case 12:\n                        _context.prev = 12;\n                        _context.t0 = _context['catch'](8);\n                        _didIteratorError = true;\n                        _iteratorError = _context.t0;\n\n                    case 16:\n                        _context.prev = 16;\n                        _context.prev = 17;\n\n                        if (!_iteratorNormalCompletion && _iterator.return) {\n                            _iterator.return();\n                        }\n\n                    case 19:\n                        _context.prev = 19;\n\n                        if (!_didIteratorError) {\n                            _context.next = 22;\n                            break;\n                        }\n\n                        throw _iteratorError;\n\n                    case 22:\n                        return _context.finish(19);\n\n                    case 23:\n                        return _context.finish(16);\n\n                    case 24:\n                        return _context.abrupt('return', formFieldsManager.getFormFieldsForModel({ modelDefinition: d2.models[modelType] }, customFieldOrderName).map(function (fieldConfig) {\n                            translateValidators(fieldConfig, d2);\n                            setRequiredFieldsStepName(fieldConfig, modelType, d2);\n                            setRequiredFieldsLabelText(fieldConfig, d2);\n                            return fieldConfig;\n                        }).concat(includeAttributes ? createAttributeFieldConfigs(d2, modelType) : []));\n\n                    case 25:\n                    case 'end':\n                        return _context.stop();\n                }\n            }\n        }, _callee, this, [[8, 12, 16, 24], [17,, 19, 23]]);\n    }));\n\n    return function createFieldConfigForModelTypes(_x2, _x3) {\n        return _ref.apply(this, arguments);\n    };\n}();\n\nfunction createUniqueValidator(fieldConfig, modelDefinition, uid) {\n    return function checkAgainstServer(value) {\n        // Don't validate against the server when we have no value\n        if (!value || !value.trim()) {\n            return Promise.resolve(true);\n        }\n\n        var modelDefinitionWithFilter = modelDefinition.filter().on(fieldConfig.fieldOptions.referenceProperty).equals(value);\n\n        if (uid) {\n            modelDefinitionWithFilter = modelDefinitionWithFilter.filter().on('id').notEqual(uid);\n        }\n\n        return modelDefinitionWithFilter.list().then(function (collection) {\n            if (collection.size !== 0) {\n                return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d2_lib_d2__[\"getInstance\"])().then(function (d2) {\n                    return d2.i18n.getTranslation('value_not_unique');\n                }).then(function (message) {\n                    return Promise.reject(message);\n                });\n            }\n            return Promise.resolve(true);\n        });\n    };\n}\n\nfunction addUniqueValidatorWhenUnique(fieldConfig, modelToEdit) {\n    if (fieldConfig.unique) {\n        fieldConfig.asyncValidators = [createUniqueValidator(fieldConfig, modelToEdit.modelDefinition, modelToEdit.id)];\n    }\n\n    return fieldConfig;\n}\n\nfunction createAttributeFieldConfigs(d2, schemaName) {\n    var modelDefinition = d2.models[schemaName];\n\n    return Object.keys(modelDefinition.attributeProperties).map(function (attributeName) {\n        var attribute = modelDefinition.attributeProperties[attributeName];\n\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__forms_fields__[\"a\" /* createFieldConfig */])({\n            name: attribute.name,\n            valueType: attribute.valueType,\n            type: __WEBPACK_IMPORTED_MODULE_6__forms_fields__[\"b\" /* typeToFieldMap */].get(attribute.optionSet ? 'CONSTANT' : attribute.valueType),\n            required: Boolean(attribute.mandatory),\n            fieldOptions: {\n                labelText: attribute.name,\n                options: attribute.optionSet ? attribute.optionSet.options.map(function (option) {\n                    return {\n                        name: option.displayName || option.name,\n                        value: option.code\n                    };\n                }) : []\n            }\n        }, modelDefinition, d2.models);\n    });\n}\n\nfunction isAttribute(model, fieldConfig) {\n    return model.attributes && new Set(Object.keys(model.attributes)).has(fieldConfig.name);\n}\n\nvar transformValuesUsingConverters = function transformValuesUsingConverters(fieldConfig) {\n    if (fieldConfig.beforePassToFieldConverter) {\n        return _extends({}, fieldConfig, {\n            value: fieldConfig.beforePassToFieldConverter(fieldConfig.value)\n        });\n    }\n\n    return fieldConfig;\n};\n\nvar addModelToFieldConfigProps = function addModelToFieldConfigProps(model) {\n    return function (fieldConfig) {\n        return _extends({}, fieldConfig, {\n            props: _extends({}, fieldConfig.props, { model: model })\n        });\n    };\n};\n\nfunction addValuesToFieldConfigs(fieldConfigs, model) {\n    return fieldConfigs.map(function (fieldConfig) {\n        if (isAttribute(model, fieldConfig)) {\n            return _extends({}, fieldConfig, {\n                value: model.attributes[fieldConfig.name]\n            });\n        }\n\n        return _extends({}, fieldConfig, {\n            value: model[fieldConfig.name]\n        });\n    }).map(transformValuesUsingConverters).map(addModelToFieldConfigProps(model));\n}\n\n/**\n * Create fieldConfigs for a schema\n * @param schema - Schema to create configs for\n * @param fieldNames - Fields to use\n * @param filterFieldConfigs - A filter function that should return an array of fieldConfigs (must be same amount of fieldConfigs)\n * @param includeAttributes - Whether to include attributes\n * @param runRules - Whether to apply field-rules specified in field-rules file.\n * @param customFieldOrderName - Custom name for the \"schema\", useful if the same schema has multiple purposes.\n * Ie. programNotificationTemplate, which are used in program Notification and programStage notifications.\n */\nfunction createFieldConfigsFor(schema, fieldNames) {\n    var filterFieldConfigs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : __WEBPACK_IMPORTED_MODULE_8_lodash_fp__[\"identity\"];\n    var includeAttributes = arguments[3];\n    var runRules = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n    var customFieldOrderName = arguments[5];\n\n    filterFieldConfigs = filterFieldConfigs ? filterFieldConfigs : __WEBPACK_IMPORTED_MODULE_8_lodash_fp__[\"identity\"];\n    return __WEBPACK_IMPORTED_MODULE_7_recompose_mapPropsStream___default()(function (props$) {\n        return props$.filter(function (_ref2) {\n            var model = _ref2.model;\n            return model;\n        }).combineLatest(__WEBPACK_IMPORTED_MODULE_9_rxjs__[\"Observable\"].fromPromise(createFieldConfigForModelTypes(schema, fieldNames, includeAttributes, customFieldOrderName)), function (props, fieldConfigs) {\n            var fieldConfigsWithValues = addValuesToFieldConfigs(fieldConfigs, props.model);\n            var fieldConfigsToUse = runRules ? __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_12__form_rules__[\"a\" /* applyRulesToFieldConfigs */])(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_12__form_rules__[\"b\" /* getRulesForModelType */])(customFieldOrderName || schema), filterFieldConfigs(fieldConfigsWithValues), props.model) : fieldConfigsWithValues;\n\n            return _extends({}, props, {\n                fieldConfigs: fieldConfigsToUse\n            });\n        });\n    });\n}\n\nvar convertValueUsingFieldConverter = function convertValueUsingFieldConverter(fieldConfigs, onChangeCallback) {\n    return function (fieldName, value) {\n        var fieldConfig = fieldConfigs.find(function (fieldConfig) {\n            return fieldConfig.name === fieldName;\n        });\n        var converter = fieldConfig.beforeUpdateConverter || __WEBPACK_IMPORTED_MODULE_8_lodash_fp__[\"identity\"];\n\n        return onChangeCallback(fieldName, converter(value));\n    };\n};\n\n// TODO: Refactor includeAttributes magic flag to separate method `createFormWithAttributesFor`\nfunction createFormFor(source$, schema, properties, includeAttributes, customFieldOrderName) {\n    var enhance = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_8_lodash_fp__[\"compose\"])(__WEBPACK_IMPORTED_MODULE_7_recompose_mapPropsStream___default()(function (props$) {\n        return props$.combineLatest(source$, function (props, model) {\n            return _extends({}, props, { model: model });\n        });\n    }), createFieldConfigsFor(schema, properties, undefined, includeAttributes, false, customFieldOrderName));\n\n    function CreatedFormBuilderForm(_ref3) {\n        var fieldConfigs = _ref3.fieldConfigs,\n            model = _ref3.model,\n            editFieldChanged = _ref3.editFieldChanged,\n            _ref3$detailsFormStat = _ref3.detailsFormStatusChange,\n            detailsFormStatusChange = _ref3$detailsFormStat === undefined ? __WEBPACK_IMPORTED_MODULE_8_lodash_fp__[\"noop\"] : _ref3$detailsFormStat;\n\n        var onUpdateField = convertValueUsingFieldConverter(fieldConfigs, editFieldChanged);\n        var fieldConfigsAfterRules = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_12__form_rules__[\"a\" /* applyRulesToFieldConfigs */])(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_12__form_rules__[\"b\" /* getRulesForModelType */])(customFieldOrderName || schema), fieldConfigs, model);\n        return __WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11_d2_ui_lib_forms_FormBuilder_component__[\"a\" /* default */], {\n            fields: fieldConfigsAfterRules,\n            onUpdateField: onUpdateField,\n            onUpdateFormStatus: detailsFormStatusChange\n        });\n    }\n\n    return enhance(CreatedFormBuilderForm);\n}\n\n/**\n * Add given props to the fieldConfig.\n * If fieldNames has values, only fields with those name will be given the props.\n * Useful to be given to map() of fieldConfigs.\n *\n * Ie: Only fields with name='shortname' will be given the props.\n * @example\n *  fieldConfigs.map(addPropsToFieldConfig[props, ['shortName']\n * @param fieldNames to add the props to.\n * @param props to add to fields\n * @returns {function(*): {props: {}}} fieldConfig with the props added.\n */\nvar addPropsToFieldConfig = function addPropsToFieldConfig(props) {\n    var fieldNames = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    return function (fieldConfig) {\n        return fieldNames.length < 1 || fieldNames.includes(fieldConfig.name) ? _extends({}, fieldConfig, { props: _extends({}, fieldConfig.props, props) }) : fieldConfig;\n    };\n};\n\n/***/ }),\n\n/***/ 1656:\n/***/ (function(module, exports) {\n\nmodule.exports = {\"/edit/categorySection/categoryOptionGroupSet\":\"/en/user/html/manage_category.html#create_category_option_group_set\",\"/edit/categorySection/categoryOptionGroup\":\"/en/user/html/manage_category.html#create_category_option_group\",\"/edit/categorySection/categoryOptionCombo\":\"/en/user/html/manage_category.html#assign_code_category_option_combo\",\"/edit/categorySection/categoryOption\":\"/en/user/html/manage_category.html#create_category_option\",\"/edit/categorySection/categoryCombo\":\"/en/user/html/manage_category.html#create_category_combination\",\"/edit/categorySection/category\":\"/en/user/html/manage_category.html#create_category\",\"/list/categorySection\":\"/en/user/html/manage_category.html\",\"/edit/dataElementSection/dataElementGroupSet\":\"/en/user/html/manage_data_element.html#create_data_element_group_set\",\"/edit/dataElementSection/dataElementGroup\":\"/en/user/html/manage_data_element.html#create_data_element_group\",\"/edit/dataElementSection/dataElement\":\"/en/user/html/manage_data_element.html#create_data_element\",\"/list/dataElementSection\":\"/en/user/html/manage_data_element.html\",\"/edit/dataSetSection/dataSet/${objectId}/sections\":\"/en/user/html/manage_data_set.html#manage_section_form\",\"/edit/dataSetSection/dataSet\":\"/en/user/html/manage_data_set.html#create_data_set\",\"/list/dataSetSection/dataSet\":\"/en/user/html/manage_data_set.html\",\"/edit/indicatorSection/programIndicatorGroup\":\"/en/user/html/configure_program_indicator.html#create_program_indicator_group\",\"/list/indicatorSection/programIndicatorGroup\":\"/en/user/html/configure_program_indicator.html\",\"/edit/indicatorSection/programIndicator\":\"/en/user/html/configure_program_indicator.html#create_program_indicator\",\"/list/indicatorSection/programIndicator\":\"/en/user/html/configure_program_indicator.html\",\"/edit/indicatorSection/indicatorGroupSet\":\"/en/user/html/manage_indicator.html#create_indicator_group_set\",\"/edit/indicatorSection/indicatorGroup\":\"/en/user/html/manage_indicator.html#create_indicator_group\",\"/edit/indicatorSection/indicatorType\":\"/en/user/html/manage_indicator.html#create_indicator_type\",\"/edit/indicatorSection/indicator\":\"/en/user/html/manage_indicator.html#create_indicator\",\"/list/indicatorSection\":\"/en/user/html/manage_indicator.html\",\"/edit/organisationUnitSection/organisationUnitGroupSet\":\"/en/user/html/manage_organisation_unit.html#create_organisation_unit_group_set\",\"/edit/organisationUnitSection/organisationUnitGroup\":\"/en/user/html/manage_organisation_unit.html#create_organisation_unit_group\",\"/edit/organisationUnitSection/organisationUnitLevel\":\"/en/user/html/manage_organisation_unit.html#name_organisation_unit_level\",\"/edit/organisationUnitSection/organisationUnit\":\"/en/user/html/manage_organisation_unit.html#create_organisation_unit\",\"/list/organisationUnitSection\":\"/en/user/html/manage_organisation_unit.html\",\"/edit/programSection/trackedEntityAttribute\":\"/en/user/html/configure_tracked_entity.html#create_tracked_entity_attribute\",\"/edit/programSection/programRuleVariable\":\"/en/user/html/configure_program_rule.html#create_program_rule_variable\",\"/edit/programSection/relationshipType\":\"/en/user/html/configure_relationship_type.html#create_relationship_type\",\"/edit/programSection/trackedEntity\":\"/en/user/html/configure_tracked_entity.html#about_tracked_entity\",\"/edit/programSection/programRule\":\"/en/user/html/configure_program_rule.html#create_program_rule\",\"/edit/programSection/program\":\"/en/user/html/configure_event_program_in_maintenance_app.html#create_event_program\",\"/list/programSection\":\"/en/user/html/configure_programs_in_maintenance_app.html\",\"/edit/validationSection/validationNotificationTemplate\":\"/en/user/html/manage_validation_rule.html#create_validation_notification\",\"/edit/validationSection/validationRuleGroup\":\"/en/user/html/manage_validation_rule.html#create_validation_rule_group\",\"/edit/validationSection/validationRule\":\"/en/user/html/manage_validation_rule.html#create_validation_rule\",\"/list/validationSection\":\"/en/user/html/manage_validation_rule.html\",\"/edit/otherSection/legendSet\":\"/en/user/html/manage_legend.html#create_legend\",\"/list/otherSection/legendSet\":\"/en/user/html/manage_legend.html\",\"/edit/otherSection/pushAnalysis\":\"/en/user/html/manage_push_report.html#create_push_report\",\"/list/otherSection/pushAnalysis\":\"/en/user/html/manage_push_report.html\",\"/edit/otherSection/externalMapLayer\":\"/en/user/html/manage_external_maplayer.html#create_external_map_layer\",\"/list/otherSection/externalMapLayer\":\"/en/user/html/manage_external_maplayer.html\",\"/edit/otherSection/${objectType}\":\"/en/user/html/manage_${objectType}.html#create_${objectType}\",\"/list/otherSection/${objectType}\":\"/en/user/html/manage_${objectType}.html\"}\n\n/***/ }),\n\n/***/ 1658:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return withAuth; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_recompose_getDisplayName__ = __webpack_require__(224);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_recompose_getDisplayName___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_recompose_getDisplayName__);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\n\n\nvar withAuth = function withAuth(WrappedComponent) {\n\n    var WithAuth = function WithAuth(props, _ref) {\n        var d2 = _ref.d2;\n\n        var extraProps = {\n            getCurrentUser: function getCurrentUser() {\n                return d2.currentUser;\n            },\n            getModelDefinitionByName: function getModelDefinitionByName(modelType) {\n                return d2.models[modelType];\n            }\n\n        };\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(WrappedComponent, _extends({}, props, extraProps));\n    };\n    WithAuth.displayName = 'WithAuth(' + __WEBPACK_IMPORTED_MODULE_2_recompose_getDisplayName___default()(WrappedComponent) + ')';\n    WithAuth.contextTypes = {\n        d2: __WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.object\n    };\n    return WithAuth;\n};\n\n/* unused harmony default export */ var _unused_webpack_default_export = (withAuth);\n\n/***/ }),\n\n/***/ 1684:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_component_helpers_addD2Context__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d2_ui_lib_headings_Heading_component__ = __webpack_require__(153);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__List_HelpLink_component__ = __webpack_require__(1654);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__BackButton_component__ = __webpack_require__(1687);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__router_utils__ = __webpack_require__(82);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\n\n\n\n\n\n\n\n\n\nfunction FormHeading(_ref, context) {\n    var level = _ref.level,\n        schema = _ref.schema,\n        children = _ref.children,\n        groupName = _ref.groupName,\n        isDirtyHandler = _ref.isDirtyHandler,\n        props = _objectWithoutProperties(_ref, ['level', 'schema', 'children', 'groupName', 'isDirtyHandler']);\n\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        __WEBPACK_IMPORTED_MODULE_3_d2_ui_lib_headings_Heading_component__[\"a\" /* default */],\n        _extends({}, props, { level: level }),\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__BackButton_component__[\"a\" /* default */], {\n            onClick: function onClick() {\n                return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__router_utils__[\"a\" /* goToAndScrollUp */])('/list/' + groupName + '/' + schema);\n            },\n            iconStyle: { top: 3 },\n            isDirtyHandler: isDirtyHandler\n        }),\n        context.d2.i18n.getTranslation(children),\n        schema && __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4__List_HelpLink_component__[\"a\" /* default */], { schema: schema })\n    );\n}\n\nFormHeading.propTypes = {\n    children: __WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.oneOfType([__WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.string, __WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.array]),\n    level: __WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.number,\n    isDirtyHandler: __WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.func,\n    schema: __WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.string.isRequired,\n    groupName: __WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.string.isRequired\n};\n\nFormHeading.defaultProps = {\n    isDirtyHandler: function isDirtyHandler() {},\n    level: 2,\n    children: ''\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_component_helpers_addD2Context__[\"a\" /* default */])(FormHeading));\n\n/***/ }),\n\n/***/ 1685:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_material_ui_RaisedButton_RaisedButton__ = __webpack_require__(98);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_material_ui_RaisedButton_RaisedButton___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_material_ui_RaisedButton_RaisedButton__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d2_ui_lib_component_helpers_addD2Context__ = __webpack_require__(34);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\n\n\n\n\n\n\nfunction SaveButton(props, _ref) {\n    var d2 = _ref.d2;\n\n    var isValid = props.isValid,\n        isSaving = props.isSaving,\n        onClick = props.onClick,\n        rest = _objectWithoutProperties(props, ['isValid', 'isSaving', 'onClick']);\n\n    var buttonText = isSaving ? d2.i18n.getTranslation('saving') : d2.i18n.getTranslation('save');\n\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_material_ui_RaisedButton_RaisedButton___default.a, _extends({}, rest, { primary: true, onClick: onClick, label: buttonText, disabled: isSaving || !isValid }));\n}\n\nSaveButton.propTypes = {\n    isSaving: __WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.bool,\n    isValid: __WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.bool,\n    onClick: __WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.func.isRequired\n};\nSaveButton.defaultProps = { isSaving: false, isValid: true };\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3_d2_ui_lib_component_helpers_addD2Context__[\"a\" /* default */])(SaveButton));\n\n/***/ }),\n\n/***/ 1686:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash_fp__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash_fp___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash_fp__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__field_order__ = __webpack_require__(646);\n\n\n\n/*\n    The stepper sets the style of the fields of the not active step to \"display: none\"\n    to hide them from view. For this to work the component of the field needs to recieve \n    the style from props. If the fields are not hidden when changing the active step\n    then check if the component of the corresponding fields are receiving and using the \n    style from props in its outer div. \n*/\n\nvar fieldGroupsForModelType = new Map([['programRule', [{\n    label: 'enter_program_rule_details',\n    fields: ['program', 'name', 'description', 'priority']\n}, {\n    label: 'enter_program_rule_expression',\n    fields: ['condition']\n}, {\n    label: 'define_program_rule_actions',\n    fields: ['programRuleActions']\n}]], ['dataSetNotificationTemplate', [{\n    label: 'what_to_send',\n    fields: ['name', 'code', 'dataSets', 'messageTemplate']\n}, {\n    label: 'when_to_send_it',\n    fields: ['dataSetNotificationTrigger', 'relativeScheduledDays', 'sendStrategy']\n}, {\n    label: 'who_to_send_it_to',\n    fields: ['notificationRecipient', 'recipientUserGroup', 'deliveryChannels']\n}]], ['programNotificationTemplate', [{\n    label: 'what_to_send',\n    fields: ['name', 'messageTemplate']\n}, {\n    label: 'when_to_send_it',\n    fields: ['notificationTrigger', 'relativeScheduledDays']\n}, {\n    label: 'who_to_send_it_to',\n    fields: ['notificationRecipient', 'recipientUserGroup', 'deliveryChannels', 'recipientProgramAttribute']\n}]], ['programStageNotificationTemplate', [{\n    label: 'what_to_send',\n    fields: ['name', 'messageTemplate']\n}, {\n    label: 'when_to_send_it',\n    fields: ['notificationTrigger', 'relativeScheduledDays']\n}, {\n    label: 'who_to_send_it_to',\n    fields: ['notificationRecipient', 'recipientUserGroup', 'deliveryChannels', 'recipientDataElement', 'recipientProgramAttribute']\n}]]]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    for: function _for(modelType) {\n        if (this.isGroupedFields(modelType)) {\n            return fieldGroupsForModelType.get(modelType);\n        }\n\n        return [{\n            label: 'details',\n            fields: __WEBPACK_IMPORTED_MODULE_1__field_order__[\"a\" /* default */].for(modelType)\n        }];\n    },\n    isGroupedFields: function isGroupedFields(modelType) {\n        return modelType && fieldGroupsForModelType.has(modelType);\n    },\n    groupNoByName: function groupNoByName(fieldName, modelType) {\n        if (this.isGroupedFields(modelType)) {\n            var modelGroup = fieldGroupsForModelType.get(modelType);\n            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_lodash_fp__[\"findIndex\"])(function (group) {\n                return group.fields.includes(fieldName);\n            }, modelGroup);\n        }\n        return 0;\n    },\n    groupNameByStep: function groupNameByStep(stepNo, modelType) {\n        if (this.isGroupedFields(modelType)) {\n            var modelGroup = fieldGroupsForModelType.get(modelType);\n            return modelGroup[stepNo].label;\n        }\n        return '';\n    },\n    groupsByField: function groupsByField(modelType) {\n        if (this.isGroupedFields(modelType)) {\n            return fieldGroupsForModelType.get(modelType).map(function (group) {\n                return group.fields;\n            }).reduce(function (fieldsWithStep, groupFields, stepNo) {\n                groupFields.map(function (field) {\n                    return fieldsWithStep[field] = stepNo;\n                });\n                return fieldsWithStep;\n            }, {});\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 1687:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_material_ui_IconButton_IconButton__ = __webpack_require__(103);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_material_ui_IconButton_IconButton___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_material_ui_IconButton_IconButton__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_component_helpers_addD2Context__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d2_lib_d2__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d2_lib_d2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_d2_lib_d2__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__EditModel_modelToEditStore__ = __webpack_require__(120);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\n\n\n\n\n\n\nfunction BackButton(props, context) {\n    var tooltip = props.tooltip,\n        onClick = props.onClick,\n        _props$isDirtyHandler = props.isDirtyHandler,\n        isDirtyHandler = _props$isDirtyHandler === undefined ? __WEBPACK_IMPORTED_MODULE_4__EditModel_modelToEditStore__[\"a\" /* default */].getState.bind(__WEBPACK_IMPORTED_MODULE_4__EditModel_modelToEditStore__[\"a\" /* default */]) : _props$isDirtyHandler,\n        otherProps = _objectWithoutProperties(props, ['tooltip', 'onClick', 'isDirtyHandler']);\n\n    var onClickWithConfirm = function onClickWithConfirm() {\n        var isDirty = isDirtyHandler && isDirtyHandler() && isDirtyHandler().dirty;\n\n        if (!isDirty) {\n            onClick.apply(undefined, arguments);\n        } else if (confirm(context.d2.i18n.getTranslation('abandon_unsaved_changes'))) {\n            onClick.apply(undefined, arguments);\n        }\n    };\n\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        __WEBPACK_IMPORTED_MODULE_1_material_ui_IconButton_IconButton___default.a,\n        _extends({\n            tooltip: tooltip || context.d2.i18n.getTranslation('back'),\n            tooltipPosition: 'bottom-right',\n            onClick: onClickWithConfirm\n        }, otherProps, {\n            iconClassName: 'material-icons'\n        }),\n        '\\uE5C4'\n    );\n}\nBackButton.propTypes = {\n    tooltip: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_component_helpers_addD2Context__[\"a\" /* default */])(BackButton));\n\n/***/ }),\n\n/***/ 1688:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = getRulesForModelType;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = applyRulesToFieldConfigs;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d2_utilizr_lib_noop__ = __webpack_require__(227);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d2_utilizr_lib_noop___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_d2_utilizr_lib_noop__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_loglevel__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_loglevel___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_loglevel__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash_fp__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash_fp___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash_fp__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d2_utilizr_lib_isArray__ = __webpack_require__(85);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d2_utilizr_lib_isArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_d2_utilizr_lib_isArray__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__config_field_rules__ = __webpack_require__(1770);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__App_systemSettingsStore__ = __webpack_require__(230);\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\n\n\n\n\n\n\n\n\n/* eslint-disable no-use-before-define */\nvar whenOperatorMap = new Map([['EQUALS', equalsOperator], ['NOT_EQUALS', notEqualsOperator], ['HAS_VALUE', hasValueOperator], ['HAS_NO_VALUE', __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_lodash_fp__[\"negate\"])(hasValueOperator)], ['HAS_STRING_VALUE', hasStringValueOperator], ['ONEOF', oneOfOperator], ['NONEOF', noneOfOperator], ['SYSTEM_SETTING_IS_TRUE', systemSettingIsTrueOperator], ['SYSTEM_SETTING_IS_FALSE', systemSettingIsFalseOperator], ['IS_VALID_POINT', isPointOperator], ['IS_HIDDEN_FIELD', isHiddenFieldOperator]]);\n\nvar operationsMap = new Map([['SET_PROP', setProp], ['CHANGE_VALUE', changeValue], ['HIDE_FIELD', hideField], ['SHOW_FIELD', showField]]);\n/* eslint-enable no-use-before-define */\n\nfunction getRulesForModelType(fieldName) {\n    if (__WEBPACK_IMPORTED_MODULE_4__config_field_rules__[\"a\" /* default */].has(fieldName)) {\n        return __WEBPACK_IMPORTED_MODULE_4__config_field_rules__[\"a\" /* default */].get(fieldName);\n    }\n\n    return [];\n}\n\nfunction changeValue(fieldConfig, operationParams, ruleResult, model) {\n    if (ruleResult) {\n        operationParams.setValue(model, fieldConfig);\n    }\n}\n\nfunction setProp(fieldConfig, operationParams, ruleResult) {\n    if (!fieldConfig) {\n        return;\n    }\n    if (ruleResult) {\n        return fieldConfig.props[operationParams.propName] = operationParams.thenValue;\n    }\n\n    return fieldConfig.props[operationParams.propName] = operationParams.elseValue;\n}\n\n/*\n    Uses the swapping variable \"hiddenComponent\" when temporary hiding a field.\n    When the field should be shown again, the content of \"hiddenComponent\" is\n    put back to the \"component\" variable.\n*/\nfunction hideField(fieldConfig, operationParams, ruleResult) {\n    if (ruleResult && fieldConfig) {\n        fieldConfig.hiddenComponent = fieldConfig.hiddenComponent || fieldConfig.component;\n        fieldConfig.component = function () {\n            return null;\n        };\n    } else if (fieldConfig && fieldConfig.hiddenComponent) {\n        fieldConfig.component = fieldConfig.hiddenComponent;\n        delete fieldConfig.hiddenComponent;\n    }\n}\n\nfunction showField(fieldConfig, operationParams, ruleResult) {\n    if (ruleResult && fieldConfig.hiddenComponent) {\n        fieldConfig.component = fieldConfig.hiddenComponent;\n        delete fieldConfig.hiddenComponent;\n    } else {\n        fieldConfig.hiddenComponent = fieldConfig.hiddenComponent || fieldConfig.component;\n        fieldConfig.component = function () {\n            return null;\n        };\n    }\n}\n\nfunction getOperation(operationType) {\n    return operationsMap.has(operationType) ? operationsMap.get(operationType) : __WEBPACK_IMPORTED_MODULE_0_d2_utilizr_lib_noop___default.a;\n}\n\nfunction getWhenOperator(operatorType) {\n    return whenOperatorMap.has(operatorType) ? whenOperatorMap.get(operatorType) : __WEBPACK_IMPORTED_MODULE_0_d2_utilizr_lib_noop___default.a;\n}\n\nfunction hasValueOperator(value) {\n    return value !== undefined && value !== null;\n}\n\nfunction hasStringValueOperator(value) {\n    return hasValueOperator(value) && value.toString().trim().length > 0;\n}\n\nfunction equalsOperator(left, right) {\n    return left === right;\n}\n\nfunction notEqualsOperator(left, right) {\n    return left !== right;\n}\n\nfunction oneOfOperator(value, list) {\n    return list.indexOf(value) >= 0;\n}\n\nfunction noneOfOperator(value, list) {\n    return list.indexOf(value) < 0;\n}\n\nfunction isPointOperator(value) {\n    // TODO: Use the same validator as the one in the coordinate-field (perhaps move it to d2/d2-ui)\n    try {\n        var poly = JSON.parse(value);\n        return Array.isArray(poly) && (poly.length === 0 || poly.length === 2 && !isNaN(poly[0]) && !isNaN(poly[1]));\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction isHiddenFieldOperator(a, b, fieldConfig) {\n    return fieldConfig.hasOwnProperty('hiddenComponent');\n}\n\nfunction systemSettingIsTrueOperator(value, settingKey) {\n    var settingsValue = __WEBPACK_IMPORTED_MODULE_5__App_systemSettingsStore__[\"a\" /* default */].getState() ? __WEBPACK_IMPORTED_MODULE_5__App_systemSettingsStore__[\"a\" /* default */].getState()[settingKey] : undefined;\n    return settingsValue === true;\n}\n\nfunction systemSettingIsFalseOperator(value, settingKey) {\n    var settingsValue = __WEBPACK_IMPORTED_MODULE_5__App_systemSettingsStore__[\"a\" /* default */].getState() ? __WEBPACK_IMPORTED_MODULE_5__App_systemSettingsStore__[\"a\" /* default */].getState()[settingKey] : undefined;\n    return settingsValue === false;\n}\n\nfunction ruleRunner(_ref, fieldConfig, model) {\n    var whenFieldName = _ref.whenFieldName,\n        operatorFn = _ref.operatorFn,\n        whenValue = _ref.whenValue;\n\n    return operatorFn(model[whenFieldName], whenValue, fieldConfig, model, whenFieldName);\n}\n\nfunction rulesRunner(rules, rule, modelToEdit, fieldConfigs) {\n    return rules.map(function (whenRule, index) {\n        __WEBPACK_IMPORTED_MODULE_1_loglevel___default.a.debug('For field ' + rule.field + ' run the when-rule where field ' + (' ' + (whenRule.field || rule.field) + ' ' + getWhenOperator(whenRule.operator).name) + (' ' + (whenRule.value || '') + ' ' + rule.field + ' ' + (rules.length > index + 1 && 'then run')));\n\n        var fieldConfigForRule = fieldConfigs.find(function (fieldConfig) {\n            return fieldConfig.name === (whenRule.field || rule.field);\n        });\n\n        var whenFieldName = whenRule.field ? whenRule.field : rule.field;\n        var operatorFn = getWhenOperator(whenRule.operator);\n        var whenValue = whenRule.value;\n\n        return ruleRunner({ whenFieldName: whenFieldName, operatorFn: operatorFn, whenValue: whenValue }, fieldConfigForRule, modelToEdit);\n    });\n}\n\nfunction applyRulesToFieldConfigs(rules, fieldConfigs, modelToEdit) {\n    rules.forEach(function (rule) {\n        var rules = __WEBPACK_IMPORTED_MODULE_3_d2_utilizr_lib_isArray___default()(rule.when) ? rule.when : [rule.when];\n        var rulePassed = rulesRunner(rules, rule, modelToEdit, fieldConfigs).some(function (result) {\n            return result === true;\n        });\n\n        __WEBPACK_IMPORTED_MODULE_1_loglevel___default.a.debug('And the result is', rulePassed);\n\n        (rule.operations || [rule.operation]).forEach(function (operation) {\n            var fieldConfigForOperation = fieldConfigs.find(function (fieldConfig) {\n                return fieldConfig.name === (operation.field || rule.field);\n            });\n\n            var field = operation.field,\n                type = operation.type,\n                operationParams = _objectWithoutProperties(operation, ['field', 'type']);\n\n            __WEBPACK_IMPORTED_MODULE_1_loglevel___default.a.debug('---- For field ' + (field || rule.field) + ' \\n                        execute ' + getOperation(type).name + ' \\n                        with', operationParams);\n\n            getOperation(type)(fieldConfigForOperation, operationParams, rulePassed, modelToEdit);\n        });\n    });\n\n    return fieldConfigs;\n}\n\n/***/ }),\n\n/***/ 1761:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_material_ui_FlatButton__ = __webpack_require__(55);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_material_ui_FlatButton___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_material_ui_FlatButton__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_component_helpers_addD2Context__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__EditModel_modelToEditStore__ = __webpack_require__(120);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\n\n\n\n\n\nfunction CancelButton(_ref, context) {\n    var onClick = _ref.onClick,\n        isPristine = _ref.isPristine,\n        _ref$isDirtyHandler = _ref.isDirtyHandler,\n        isDirtyHandler = _ref$isDirtyHandler === undefined ? __WEBPACK_IMPORTED_MODULE_3__EditModel_modelToEditStore__[\"a\" /* default */].getState.bind(__WEBPACK_IMPORTED_MODULE_3__EditModel_modelToEditStore__[\"a\" /* default */]) : _ref$isDirtyHandler,\n        props = _objectWithoutProperties(_ref, ['onClick', 'isPristine', 'isDirtyHandler']);\n\n    var shouldConfirm = isDirtyHandler && isDirtyHandler() && isDirtyHandler().dirty;\n\n    var onClickWithConfirm = function onClickWithConfirm() {\n        if (!shouldConfirm) {\n            onClick.apply(undefined, arguments);\n        } else if (confirm(context.d2.i18n.getTranslation('abandon_unsaved_changes'))) {\n            onClick.apply(undefined, arguments);\n        }\n    };\n\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_material_ui_FlatButton___default.a, _extends({}, props, {\n        onClick: onClickWithConfirm,\n        secondary: shouldConfirm,\n        label: context.d2.i18n.getTranslation('cancel')\n    }));\n}\n\nCancelButton.propTypes = {\n    onClick: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.func.isRequired,\n    /* A handler that should return an object with \"dirty\"-key,\n    describing if the current edited model is dirty\n     */\n    isDirtyHandler: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.func\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_component_helpers_addD2Context__[\"a\" /* default */])(CancelButton));\n\n/***/ }),\n\n/***/ 1769:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = defaultAnalyticsPeriodBoundaries;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash_fp__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash_fp___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash_fp__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__field_overrides_program_indicator_enums__ = __webpack_require__(660);\n\n\n\n\nfunction defaultAnalyticsPeriodBoundaries(type, current) {\n    var defaultProps = {\n        enrollment: [{\n            analyticsPeriodBoundaryType: __WEBPACK_IMPORTED_MODULE_1__field_overrides_program_indicator_enums__[\"f\" /* AFTER_START_OF_REPORTING_PERIOD */],\n            boundaryTarget: __WEBPACK_IMPORTED_MODULE_1__field_overrides_program_indicator_enums__[\"c\" /* ENROLLMENT_DATE */]\n        }, {\n            analyticsPeriodBoundaryType: __WEBPACK_IMPORTED_MODULE_1__field_overrides_program_indicator_enums__[\"e\" /* BEFORE_END_OF_REPORTING_PERIOD */],\n            boundaryTarget: __WEBPACK_IMPORTED_MODULE_1__field_overrides_program_indicator_enums__[\"c\" /* ENROLLMENT_DATE */]\n        }],\n        event: [{\n            analyticsPeriodBoundaryType: __WEBPACK_IMPORTED_MODULE_1__field_overrides_program_indicator_enums__[\"f\" /* AFTER_START_OF_REPORTING_PERIOD */],\n            boundaryTarget: __WEBPACK_IMPORTED_MODULE_1__field_overrides_program_indicator_enums__[\"b\" /* EVENT_DATE */]\n        }, {\n            analyticsPeriodBoundaryType: __WEBPACK_IMPORTED_MODULE_1__field_overrides_program_indicator_enums__[\"e\" /* BEFORE_END_OF_REPORTING_PERIOD */],\n            boundaryTarget: __WEBPACK_IMPORTED_MODULE_1__field_overrides_program_indicator_enums__[\"b\" /* EVENT_DATE */]\n        }]\n    };\n\n    function isNotDefault(val) {\n        return !__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_lodash_fp__[\"isEqual\"])(val, defaultProps.event) && !__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_lodash_fp__[\"isEqual\"])(val, defaultProps.enrollment);\n    }\n\n    if (current && isNotDefault(current)) {\n        return current;\n    }\n\n    return defaultProps[type];\n}\n\n/***/ }),\n\n/***/ 1770:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__field_config_field_defaults__ = __webpack_require__(1769);\n\n\n/**\n * Rule functions in EditModel/form-rules\n * \n * Rules for the form fields.\n * If multiple `when` objects are specified these are evaluated as an OR.\n * The following would result check if either of the statements return true\n * ```\n when: [{\n        field: 'valueType',\n        operator: 'ONEOF',\n        value: [\n            'TEXT',\n            'LONG_TEXT',\n            'LETTER',\n            'PHONE_NUMBER',\n            'EMAIL',\n            'TRACKER_ASSOCIATE',\n            'USERNAME',\n            'FILE_RESOURCE',\n            'COORDINATE',\n        ]\n        }, {\n            field: 'domainType',\n            operator: 'EQUALS',\n            value: 'TRACKER',\n        }],\n * ```\n */\n\n/*\n    Sets the valueType to the valueType of the optionSet\n    TODO: This function does a mutable modification. It is more efficient this way however it might\n    collide and is not very transparent. Especially the fact that the new value needs to be set\n    on both the model and the fieldConfig is not very clear.\n    It would probably make sense to run the model modification rules before sending the values to\n    the FormBuilder. */\nfunction setValueTypeToOptionSet(model, fieldConfig) {\n    // Do not not change the valueType when there is no optionSet or when there is no valueType\n    // for the optionSet (which can occur during the initial run of the rules)\n    if (model.optionSet && model.optionSet.valueType) {\n        // Update the fieldConfig to contain the correct value\n        fieldConfig.value = model.optionSet.valueType;\n\n        // Update the model only when the value is not the same as the current\n        if (model[fieldConfig.name] !== model.optionSet.valueType) {\n            model[fieldConfig.name] = model.optionSet.valueType;\n        }\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new Map([['dataElement', [{\n    field: 'domainType',\n    when: {\n        operator: 'EQUALS',\n        value: 'TRACKER'\n    },\n    operations: [{\n        field: 'categoryCombo',\n        type: 'SET_PROP',\n        propName: 'disabled',\n        thenValue: true,\n        elseValue: false\n    }]\n}, {\n    field: 'valueType',\n    when: {\n        field: 'optionSet',\n        operator: 'HAS_VALUE'\n    },\n    operations: [{\n        type: 'SET_PROP',\n        propName: 'disabled',\n        thenValue: true,\n        elseValue: false\n    }, {\n        type: 'CHANGE_VALUE',\n        setValue: setValueTypeToOptionSet\n    }]\n}, {\n    field: 'aggregationType',\n    when: {\n        field: 'valueType',\n        operator: 'ONEOF',\n        value: ['TEXT', 'LONG_TEXT', 'LETTER', 'PHONE_NUMBER', 'EMAIL', 'TRACKER_ASSOCIATE', 'USERNAME', 'FILE_RESOURCE', 'COORDINATE']\n    },\n    operations: [{\n        field: 'aggregationType',\n        type: 'SET_PROP',\n        propName: 'disabled',\n        thenValue: true,\n        elseValue: false\n    }, {\n        field: 'aggregationType',\n        type: 'CHANGE_VALUE',\n        setValue: function setValue(model, fieldConfig) {\n            fieldConfig.value = 'NONE';\n            model[fieldConfig.name] = 'NONE';\n        }\n    }]\n}]], ['dataSetNotificationTemplate', [{\n    when: [{\n        field: 'dataSetNotificationTrigger',\n        operator: 'NOT_EQUALS',\n        value: 'SCHEDULED_DAYS'\n    }],\n    operations: [{\n        field: 'relativeScheduledDays',\n        type: 'HIDE_FIELD'\n    }, {\n        field: 'sendStrategy',\n        type: 'HIDE_FIELD'\n    }]\n}, {\n    field: 'deliveryChannels',\n    when: [{\n        field: 'notificationRecipient',\n        operator: 'NOT_EQUALS',\n        value: 'ORGANISATION_UNIT_CONTACT'\n    }],\n    operations: [{\n        field: 'deliveryChannels',\n        type: 'HIDE_FIELD'\n    }]\n}]], ['attribute', [{\n    field: 'valueType',\n    when: {\n        field: 'optionSet',\n        operator: 'HAS_VALUE'\n    },\n    operations: [{\n        type: 'SET_PROP',\n        propName: 'disabled',\n        thenValue: true,\n        elseValue: false\n    }, {\n        type: 'CHANGE_VALUE',\n        setValue: setValueTypeToOptionSet\n    }]\n}]], ['trackedEntityAttribute', [{\n    field: 'unique',\n    when: [{\n        field: 'valueType',\n        operator: 'ONEOF',\n        value: ['BOOLEAN', 'TRUE_ONLY', 'DATE', 'TRACKER_ASSOCIATE', 'USERNAME', 'OPTION_SET']\n    }],\n    operations: [{\n        field: 'unique',\n        type: 'SET_PROP',\n        propName: 'disabled',\n        thenValue: true,\n        elseValue: false\n    }, {\n        field: 'unique',\n        type: 'CHANGE_VALUE',\n        setValue: function setValue(model, fieldConfig) {\n            fieldConfig.value = false;\n            model.unique = false;\n        }\n    }]\n}, {\n    field: 'valueType',\n    when: {\n        field: 'optionSet',\n        operator: 'HAS_VALUE'\n    },\n    operations: [{\n        type: 'SET_PROP',\n        propName: 'disabled',\n        thenValue: true,\n        elseValue: false\n    }, {\n        type: 'CHANGE_VALUE',\n        setValue: setValueTypeToOptionSet\n    }]\n}, {\n    field: 'orgunitScope',\n    when: [{\n        field: 'unique',\n        operator: 'NOT_EQUALS',\n        value: true\n    }, {\n        field: 'valueType',\n        operator: 'ONEOF',\n        value: ['BOOLEAN', 'TRUE_ONLY', 'DATE', 'TRACKER_ASSOCIATE', 'USERNAME', 'OPTION_SET']\n    }],\n    operations: [{ type: 'HIDE_FIELD' }]\n}, {\n    field: 'generated',\n    when: [{\n        field: 'orgunitScope',\n        operator: 'IS_HIDDEN_FIELD'\n    }, {\n        field: 'orgunitScope',\n        operator: 'ONEOF',\n        value: ['organisation_unit']\n    }, {\n        field: 'orgunitScope',\n        operator: 'EQUALS',\n        value: true\n    }],\n    operations: [{\n        type: 'HIDE_FIELD'\n    }, {\n        type: 'CHANGE_VALUE',\n        setValue: function setValue(model, fieldConfig) {\n            fieldConfig.value = false;\n            model.generated = false;\n        }\n    }]\n}, {\n    field: 'pattern',\n    when: [{\n        field: 'generated',\n        operator: 'IS_HIDDEN_FIELD'\n    }, {\n        field: 'generated',\n        operator: 'NOT_EQUALS',\n        value: true\n    }],\n    operations: [{\n        type: 'HIDE_FIELD'\n    }, {\n        type: 'CHANGE_VALUE',\n        setValue: function setValue(model, fieldConfig) {\n            fieldConfig.value = null;\n            model.pattern = null;\n        }\n    }]\n}]], ['externalMapLayer', [{\n    // When legendSet has value, clear and disable the legendSetUrl field\n    field: 'legendSetUrl',\n    when: [{\n        field: 'legendSet',\n        operator: 'HAS_VALUE'\n    }],\n    operations: [{\n        field: 'legendSetUrl',\n        type: 'SET_PROP',\n        propName: 'disabled',\n        thenValue: true,\n        elseValue: false\n    }]\n}, {\n    // When legendSetUrl has value, clear and disable the legendSet field\n    field: 'legendSet',\n    when: [{\n        field: 'legendSetUrl',\n        operator: 'HAS_STRING_VALUE'\n    }],\n    operations: [{\n        field: 'legendSet',\n        type: 'SET_PROP',\n        propName: 'disabled',\n        thenValue: true,\n        elseValue: false\n    }]\n}]], ['organisationUnit', [{\n    field: 'dataSets',\n    when: [{\n        operator: 'SYSTEM_SETTING_IS_FALSE',\n        value: 'keyAllowObjectAssignment'\n    }],\n    operations: [{\n        field: 'dataSets',\n        type: 'HIDE_FIELD'\n    }]\n}, {\n    field: 'programs',\n    when: [{\n        operator: 'SYSTEM_SETTING_IS_FALSE',\n        value: 'keyAllowObjectAssignment'\n    }],\n    operations: [{\n        field: 'programs',\n        type: 'HIDE_FIELD'\n    }]\n}, {\n    field: 'featureType',\n    when: [{\n        field: 'coordinates',\n        operator: 'HAS_VALUE'\n    }],\n    operations: [{\n        type: 'CHANGE_VALUE',\n        setValue: function setValue(model) {\n            // TODO: this is almost the same check as in the coordinate-field we should DRY these up.\n            var isValidPoint = function isValidPoint(value) {\n                try {\n                    var poly = JSON.parse(value);\n                    return Array.isArray(poly) && (poly.length === 0 || poly.length === 2 && !isNaN(poly[0]) && !isNaN(poly[1]));\n                } catch (e) {}\n                return false;\n            };\n\n            // If we have valid coordinates set the the featureType to POINT\n            if (model.coordinates) {\n                // Set the correct featureType if we're dealing with a point otherwise\n                // keep the featureType the same as it was since we're not dealing with a point\n                if (isValidPoint(model.coordinates)) {\n                    model.featureType = 'POINT';\n                }\n            } else {\n                // The user might have removed the coordinates so we'll reset the featureType to `null`\n                model.featureType = null;\n            }\n        }\n    }]\n}]], ['programRule', [{\n    field: 'name',\n    when: [{\n        field: 'program',\n        operator: 'HAS_VALUE'\n    }],\n    operations: [{\n        type: 'SET_PROP',\n        propName: 'disabled',\n        thenValue: false,\n        elseValue: true\n    }]\n}, {\n    field: 'description',\n    when: [{\n        field: 'program',\n        operator: 'HAS_VALUE'\n    }],\n    operations: [{\n        type: 'SET_PROP',\n        propName: 'disabled',\n        thenValue: false,\n        elseValue: true\n    }]\n}, {\n    field: 'priority',\n    when: [{\n        field: 'program',\n        operator: 'HAS_VALUE'\n    }],\n    operations: [{\n        type: 'SET_PROP',\n        propName: 'disabled',\n        thenValue: false,\n        elseValue: true\n    }]\n}, {\n    field: 'condition',\n    when: [{\n        field: 'program',\n        operator: 'HAS_VALUE'\n    }],\n    operations: [{\n        type: 'SET_PROP',\n        propName: 'disabled',\n        thenValue: false,\n        elseValue: true\n    }]\n}, {\n    field: 'programRuleActions',\n    when: [{\n        field: 'program',\n        operator: 'HAS_VALUE'\n    }],\n    operations: [{\n        type: 'SET_PROP',\n        propName: 'disabled',\n        thenValue: false,\n        elseValue: true\n    }]\n}]], ['programRuleVariable', [{\n    field: 'program',\n    when: [{\n        field: 'dataElement',\n        operator: 'HAS_STRING_VALUE'\n    }, {\n        field: 'trackedEntityAttribute',\n        operator: 'HAS_STRING_VALUE'\n    }, {\n        field: 'programStage',\n        operator: 'HAS_STRING_VALUE'\n    }],\n    operations: [{\n        type: 'SET_PROP',\n        propName: 'disabled',\n        thenValue: true,\n        elseValue: false\n    }]\n}, {\n    field: 'dataElement',\n    when: [{\n        field: 'programRuleVariableSourceType',\n        operator: 'ONEOF',\n        value: ['CALCULATED_VALUE', 'TEI_ATTRIBUTE']\n    }],\n    operations: [{\n        field: 'dataElement',\n        type: 'HIDE_FIELD'\n    }]\n}, {\n    field: 'trackedEntityAttribute',\n    when: [{\n        field: 'programRuleVariableSourceType',\n        operator: 'NOT_EQUALS',\n        value: 'TEI_ATTRIBUTE'\n    }],\n    operations: [{\n        field: 'trackedEntityAttribute',\n        type: 'HIDE_FIELD'\n    }]\n}, {\n    field: 'programStage',\n    when: [{\n        field: 'programRuleVariableSourceType',\n        operator: 'NOT_EQUALS',\n        value: 'DATAELEMENT_NEWEST_EVENT_PROGRAM_STAGE'\n    }],\n    operations: [{\n        field: 'programStage',\n        type: 'HIDE_FIELD'\n    }]\n}, {\n    field: 'programStage',\n    when: [{\n        field: 'dataElement',\n        operator: 'HAS_STRING_VALUE'\n    }],\n    operations: [{\n        type: 'SET_PROP',\n        propName: 'disabled',\n        thenValue: true,\n        elseValue: false\n    }]\n}]], ['programStage', [{\n    field: 'autoGenerateEvent',\n    when: [{\n        field: 'autoGenerateEvent',\n        operator: 'NOT_EQUALS',\n        value: true\n    }],\n    operations: [{\n        field: 'openAfterEnrollment',\n        type: 'HIDE_FIELD'\n    }, {\n        field: 'reportDateToUse',\n        type: 'HIDE_FIELD'\n    }]\n}, {\n    field: 'reportDateToUse',\n    when: [{\n        field: 'openAfterEnrollment',\n        operator: 'NOT_EQUALS',\n        value: true\n    }],\n    operations: [{\n        type: 'SET_PROP',\n        propName: 'disabled',\n        thenValue: true,\n        elseValue: false\n    }]\n}]], ['enrollment', [{\n    field: 'relationshipType',\n    when: [{\n        field: 'relationshipType',\n        operator: 'HAS_NO_VALUE'\n    }],\n    operations: [{\n        field: 'relationshipFromA',\n        type: 'HIDE_FIELD'\n    }, {\n        field: 'relationshipText',\n        type: 'HIDE_FIELD'\n    }, {\n        field: 'relatedProgram',\n        type: 'HIDE_FIELD'\n    }]\n}, {\n    field: 'relationshipFromA',\n    when: [{\n        field: 'relationshipType',\n        operator: 'HAS_VALUE'\n    }],\n    operations: [{\n        field: 'relatedProgram',\n        type: 'SET_PROP',\n        propName: 'isRequired',\n        thenValue: true,\n        elseValue: false\n    }, {\n        field: 'relationshipFromA',\n        type: 'SET_PROP',\n        propName: 'isRequired',\n        thenValue: true,\n        elseValue: false\n    }, {\n        field: 'relationshipText',\n        type: 'SET_PROP',\n        propName: 'required',\n        thenValue: true,\n        elseValue: false\n    }]\n}]], ['programIndicator', [{\n    field: 'analyticsPeriodBoundaries',\n    when: [{\n        field: 'analyticsType',\n        operator: 'EQUALS',\n        value: 'EVENT'\n    }],\n    operations: [{\n        type: 'CHANGE_VALUE',\n        setValue: function setValue(model, fieldConfig) {\n            if (fieldConfig) {\n                fieldConfig.value = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__field_config_field_defaults__[\"a\" /* defaultAnalyticsPeriodBoundaries */])('event', fieldConfig.value);\n                model[fieldConfig.name] = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__field_config_field_defaults__[\"a\" /* defaultAnalyticsPeriodBoundaries */])('event', fieldConfig.value);\n            }\n        }\n    }]\n}, {\n    field: 'analyticsPeriodBoundaries',\n    when: [{\n        field: 'analyticsType',\n        operator: 'EQUALS',\n        value: 'ENROLLMENT'\n    }],\n    operations: [{\n        type: 'CHANGE_VALUE',\n        setValue: function setValue(model, fieldConfig) {\n            if (fieldConfig) {\n                fieldConfig.value = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__field_config_field_defaults__[\"a\" /* defaultAnalyticsPeriodBoundaries */])('enrollment', fieldConfig.value);\n                model[fieldConfig.name] = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__field_config_field_defaults__[\"a\" /* defaultAnalyticsPeriodBoundaries */])('enrollment', fieldConfig.value);\n            }\n        }\n    }]\n}]], ['programStageNotificationTemplate', [{\n    field: 'notificationTrigger',\n    when: [{\n        field: 'notificationTrigger',\n        operator: 'NOT_EQUALS',\n        value: 'SCHEDULED_DAYS_DUE_DATE'\n    }],\n    operations: [{\n        field: 'relativeScheduledDays',\n        type: 'HIDE_FIELD'\n    }]\n}, {\n    field: 'notificationRecipient',\n    when: [{\n        field: 'notificationRecipient',\n        operator: 'NONEOF',\n        value: ['TRACKED_ENTITY_INSTANCE', 'ORGANISATION_UNIT_CONTACT']\n    }],\n    operations: [{\n        field: 'deliveryChannels',\n        type: 'HIDE_FIELD'\n    }]\n}, {\n    field: 'notificationRecipient',\n    when: [{\n        field: 'notificationRecipient',\n        operator: 'NOT_EQUALS',\n        value: 'DATA_ELEMENT'\n    }],\n    operations: [{\n        field: 'recipientDataElement',\n        type: 'HIDE_FIELD'\n    }]\n}, {\n    field: 'notificationRecipient',\n    when: [{\n        field: 'notificationRecipient',\n        operator: 'NOT_EQUALS',\n        value: 'PROGRAM_ATTRIBUTE'\n    }],\n    operations: [{\n        field: 'recipientProgramAttribute',\n        type: 'HIDE_FIELD'\n    }]\n}]], ['programNotificationTemplate', [{\n    field: 'notificationTrigger',\n    when: [{\n        field: 'notificationTrigger',\n        operator: 'NONEOF',\n        value: ['SCHEDULED_DAYS_INCIDENT_DATE', 'SCHEDULED_DAYS_ENROLLMENT_DATE']\n    }],\n    operations: [{\n        field: 'relativeScheduledDays',\n        type: 'HIDE_FIELD'\n    }]\n}, {\n    field: 'notificationRecipient',\n    when: [{\n        field: 'notificationRecipient',\n        operator: 'NONEOF',\n        value: ['TRACKED_ENTITY_INSTANCE', 'ORGANISATION_UNIT_CONTACT']\n    }],\n    operations: [{\n        field: 'deliveryChannels',\n        type: 'HIDE_FIELD'\n    }]\n}, {\n    field: 'notificationRecipient',\n    when: [{\n        field: 'notificationRecipient',\n        operator: 'NOT_EQUALS',\n        value: 'PROGRAM_ATTRIBUTE'\n    }],\n    operations: [{\n        field: 'recipientProgramAttribute',\n        type: 'HIDE_FIELD'\n    }]\n}]], ['categoryCombo', [{\n    field: 'dataDimensionType',\n    when: [{\n        field: 'dataDimensionType',\n        operator: 'HAS_NO_VALUE'\n    }],\n    operations: [{\n        type: 'CHANGE_VALUE',\n        setValue: function setValue(model, fieldConfig) {\n            fieldConfig.value = model[fieldConfig.name] = 'DISAGGREGATION';\n        }\n    }]\n}]]]));\n\n/***/ }),\n\n/***/ 1775:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = FormButtons;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d2_utilizr_lib_isArray__ = __webpack_require__(85);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d2_utilizr_lib_isArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_d2_utilizr_lib_isArray__);\n\n\n\nfunction FormButtons(props) {\n    var defaultStyle = {\n        marginTop: '1rem'\n    };\n\n    var buttonStyle = {\n        marginRight: '1rem',\n        width: '10rem'\n    };\n\n    var buttonsToRender = __WEBPACK_IMPORTED_MODULE_1_d2_utilizr_lib_isArray___default()(props.children) ? props.children : [props.children];\n\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        'div',\n        { style: Object.assign(defaultStyle, props.style) },\n        buttonsToRender.map(function (child, index) {\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.cloneElement(child, {\n                style: buttonStyle,\n                key: index\n            });\n        })\n    );\n}\nFormButtons.propTypes = {\n    style: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.object,\n    children: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.oneOfType([__WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.array, __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.object]).isRequired,\n    isFormValid: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.func\n};\n//\n// export default React.createClass({\n//\n//\n//    render() {\n//        return (\n//            <div style={this.props.style}>\n//                {this.props.children.map((child, index) => {\n//                    return React.cloneElement(child, {\n//                        isFormValid: this.props.isFormValid,\n//                        key: index,\n//                    });\n//                })}\n//            </div>\n//        );\n//    },\n// });\n\n/***/ }),\n\n/***/ 2101:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d2_lib_d2__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d2_lib_d2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_d2_lib_d2__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_circular_progress_CircularProgress__ = __webpack_require__(101);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__forms_form_fields_drop_down__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__indicatorGroupsStore__ = __webpack_require__(710);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\nfunction getLoadingIndicator() {\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        'div',\n        { style: { textAlign: 'center' } },\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_circular_progress_CircularProgress__[\"a\" /* default */], null)\n    );\n}\n\nfunction findValue(optionList, model) {\n    return optionList.map(function (option) {\n        return option.value;\n    }).find(function (option) {\n        return Array.from(model.indicatorGroups.values()).map(function (indicatorGroup) {\n            return indicatorGroup.id;\n        }).indexOf(option) !== -1;\n    });\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createClass({\n    displayName: 'DataIndicatorGroupsAssignment.component',\n\n    propTypes: {\n        source: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.object.isRequired\n    },\n\n    getInitialState: function getInitialState() {\n        __WEBPACK_IMPORTED_MODULE_4__indicatorGroupsStore__[\"a\" /* default */].setState({\n            indicatorGroupValues: {},\n            remove: [],\n            save: []\n        });\n\n        return {\n            indicatorGroupSets: null\n        };\n    },\n    componentDidMount: function componentDidMount() {\n        var _this = this;\n\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d2_lib_d2__[\"getInstance\"])().then(function (d2) {\n            return d2.Api.getApi().get('indicatorGroupSets', {\n                fields: 'id,displayName,indicatorGroups[id,displayName]',\n                filter: ['compulsory:eq:true'],\n                paging: false\n            });\n        }).then(function (response) {\n            return response.indicatorGroupSets;\n        }).then(function (indicatorGroupSets) {\n            return _this.setState({ indicatorGroupSets: indicatorGroupSets });\n        });\n\n        this.subscription = __WEBPACK_IMPORTED_MODULE_4__indicatorGroupsStore__[\"a\" /* default */].subscribe(function () {\n            return _this.forceUpdate();\n        });\n    },\n    componentWillUnmount: function componentWillUnmount() {\n        if (this.subscription) {\n            this.subscription && this.subscription.unsubscribe();\n        }\n    },\n    render: function render() {\n        var _this2 = this;\n\n        if (!this.state.indicatorGroupSets) {\n            return getLoadingIndicator();\n        }\n\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            null,\n            this.state.indicatorGroupSets.map(function (indicatorGroupSet, key) {\n                var optionList = indicatorGroupSet.indicatorGroups.map(function (ig) {\n                    return {\n                        value: ig.id,\n                        text: ig.displayName\n                    };\n                });\n\n                var value = Object.prototype.hasOwnProperty.call(__WEBPACK_IMPORTED_MODULE_4__indicatorGroupsStore__[\"a\" /* default */].state.indicatorGroupValues, indicatorGroupSet.id) ? __WEBPACK_IMPORTED_MODULE_4__indicatorGroupsStore__[\"a\" /* default */].state.indicatorGroupValues[indicatorGroupSet.id] : findValue(optionList, _this2.props.source);\n\n                return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    'div',\n                    { key: 'dataIndicatorGroupAssignment' + key },\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__forms_form_fields_drop_down__[\"a\" /* default */], {\n                        key: indicatorGroupSet.id,\n                        labelText: indicatorGroupSet.displayName,\n                        translateLabel: false,\n                        options: optionList,\n                        value: value,\n                        onChange: _this2._updateGroupStatus.bind(_this2, indicatorGroupSet.id, findValue(optionList, _this2.props.source)),\n                        fullWidth: true\n                    })\n                );\n            })\n        );\n    },\n    _updateGroupStatus: function _updateGroupStatus(indicatorGroupSetId, oldValue, event) {\n        // TODO: Very bad to change props and set d2.model.dirty manually\n        this.props.source.dirty = true;\n\n        __WEBPACK_IMPORTED_MODULE_4__indicatorGroupsStore__[\"a\" /* default */].setState({\n            indicatorGroupValues: Object.assign({}, __WEBPACK_IMPORTED_MODULE_4__indicatorGroupsStore__[\"a\" /* default */].state.indicatorGroupValues, _defineProperty({}, indicatorGroupSetId, event.target.value ? event.target.value : null)),\n            remove: Array.from(new Set(__WEBPACK_IMPORTED_MODULE_4__indicatorGroupsStore__[\"a\" /* default */].state.remove.concat([oldValue])).values())\n        });\n    }\n}));\n\n/***/ }),\n\n/***/ 2102:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_loglevel__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_loglevel___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_loglevel__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_material_ui_Stepper__ = __webpack_require__(2133);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_material_ui_Stepper___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_material_ui_Stepper__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_d2_lib_d2__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_d2_lib_d2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_d2_lib_d2__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_d2_utilizr__ = __webpack_require__(339);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_d2_utilizr___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_d2_utilizr__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_d2_ui_lib_circular_progress_CircularProgress__ = __webpack_require__(101);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_d2_ui_lib_i18n_Translate_mixin__ = __webpack_require__(647);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_d2_ui_lib_forms_FormBuilder_component__ = __webpack_require__(648);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__config_field_config_field_groups__ = __webpack_require__(1686);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__config_disabled_on_edit__ = __webpack_require__(2117);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__modelToEditStore__ = __webpack_require__(120);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__objectActions__ = __webpack_require__(66);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__Snackbar_snack_actions__ = __webpack_require__(62);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__SaveButton_component__ = __webpack_require__(1685);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__CancelButton_component__ = __webpack_require__(1761);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__SharingNotification_component__ = __webpack_require__(2104);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__FormButtons_component__ = __webpack_require__(1775);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__extraFields__ = __webpack_require__(2108);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__App_appStateStore__ = __webpack_require__(64);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__formHelpers__ = __webpack_require__(1655);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__form_rules__ = __webpack_require__(1688);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__form_helpers_validateFields__ = __webpack_require__(2109);\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar currentSection$ = __WEBPACK_IMPORTED_MODULE_19__App_appStateStore__[\"b\" /* default */].filter(function (state) {\n    return state.sideBar && state.sideBar.currentSection;\n}).map(function (state) {\n    return state.sideBar.currentSubSection;\n}).filter(function (state) {\n    return state;\n}).distinctUntilChanged();\n\nvar editFormFieldsForCurrentSection$ = currentSection$.flatMap(function (modelType) {\n    return __WEBPACK_IMPORTED_MODULE_2_rxjs__[\"Observable\"].fromPromise(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_20__formHelpers__[\"a\" /* createFieldConfigForModelTypes */])(modelType));\n});\n\nvar isAddOperation = function isAddOperation(model) {\n    return model.id === undefined;\n};\n\nvar d2$ = __WEBPACK_IMPORTED_MODULE_2_rxjs__[\"Observable\"].fromPromise(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_d2_lib_d2__[\"getInstance\"])());\n\nvar modelToEditAndModelForm$ = __WEBPACK_IMPORTED_MODULE_2_rxjs__[\"Observable\"].combineLatest(__WEBPACK_IMPORTED_MODULE_11__modelToEditStore__[\"a\" /* default */], editFormFieldsForCurrentSection$, currentSection$, d2$).filter(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 3),\n        modelToEdit = _ref2[0],\n        formFields = _ref2[1],\n        currentType = _ref2[2];\n\n    if (modelToEdit && modelToEdit.modelDefinition && modelToEdit.modelDefinition.name) {\n        return modelToEdit.modelDefinition.name === currentType;\n    }\n    return false;\n}).map(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 4),\n        modelToEdit = _ref4[0],\n        editFormFieldsForCurrentModelType = _ref4[1],\n        modelType = _ref4[2],\n        d2 = _ref4[3];\n\n    var fieldConfigs = editFormFieldsForCurrentModelType\n    // TODO: When switching to the FormBuilder that manages state this function for all values\n    // would need to be executed only for the field that actually changed and/or the values that\n    // change because of it.\n    .map(function (fieldConfig) {\n        fieldConfig.fieldOptions.model = modelToEdit;\n\n        if (!isAddOperation(modelToEdit) && __WEBPACK_IMPORTED_MODULE_10__config_disabled_on_edit__[\"a\" /* default */].for(modelType).indexOf(fieldConfig.name) !== -1) {\n            fieldConfig.props.disabled = true;\n        }\n\n        // Check if value is an attribute\n        if (Object.keys(modelToEdit.attributes || []).indexOf(fieldConfig.name) >= 0) {\n            fieldConfig.value = modelToEdit.attributes[fieldConfig.name];\n            return fieldConfig;\n        }\n\n        // The value is passes through a converter before being set onto the field config.\n        // This is useful for when a value is a number and might have to be translated to a\n        // value of the type Number.\n        if (fieldConfig.beforePassToFieldConverter) {\n            fieldConfig.value = fieldConfig.beforePassToFieldConverter(modelToEdit[fieldConfig.name]);\n        } else {\n            fieldConfig.value = modelToEdit[fieldConfig.name];\n        }\n\n        return fieldConfig;\n    });\n\n    var fieldConfigsAfterRules = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_21__form_rules__[\"a\" /* applyRulesToFieldConfigs */])(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_21__form_rules__[\"b\" /* getRulesForModelType */])(modelToEdit.modelDefinition.name), fieldConfigs, modelToEdit);\n    var fieldConfigsWithAttributeFields = [].concat(fieldConfigsAfterRules,\n    // getAttributeFieldConfigs(d2, modelToEdit),\n    (__WEBPACK_IMPORTED_MODULE_18__extraFields__[\"a\" /* default */][modelType] || []).map(function (config) {\n        config.props = config.props || {};\n        config.props.modelToEdit = modelToEdit;\n        return config;\n    }));\n    var fieldConfigsWithAttributeFieldsAndUniqueValidators = fieldConfigsWithAttributeFields.map(function (fieldConfig) {\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_20__formHelpers__[\"b\" /* addUniqueValidatorWhenUnique */])(fieldConfig, modelToEdit);\n    });\n    return {\n        fieldConfigs: fieldConfigsWithAttributeFieldsAndUniqueValidators,\n        modelToEdit: modelToEdit,\n        isLoading: false\n    };\n});\n\nfunction PlaceholderComponent(props) {\n    return null;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createClass({\n    displayName: 'EditModelForm.component',\n\n    propTypes: {\n        modelId: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string.isRequired,\n        modelType: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string.isRequired,\n        onSaveSuccess: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.func.isRequired,\n        onSaveError: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.func.isRequired,\n        onCancel: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.func.isRequired\n    },\n\n    mixins: [__WEBPACK_IMPORTED_MODULE_7_d2_ui_lib_i18n_Translate_mixin__[\"a\" /* default */]],\n\n    getInitialState: function getInitialState() {\n        return {\n            modelToEdit: undefined,\n            isLoading: true,\n            formState: {\n                validating: false,\n                valid: true,\n                pristine: true\n            },\n            activeStep: 0\n        };\n    },\n    isAddOperation: function isAddOperation() {\n        return this.props.modelId === 'add';\n    },\n    componentWillMount: function componentWillMount() {\n        var _this = this;\n\n        this.subscription = modelToEditAndModelForm$.subscribe(function (newState) {\n            _this.setState(newState);\n            _this.setActiveStep(_this.state.activeStep);\n        }, function (errorMessage) {\n            __WEBPACK_IMPORTED_MODULE_13__Snackbar_snack_actions__[\"a\" /* default */].show({ message: errorMessage, action: 'ok' });\n        });\n    },\n    componentWillUnmount: function componentWillUnmount() {\n        this.subscription && this.subscription.unsubscribe();\n    },\n    renderSharingNotification: function renderSharingNotification() {\n        var formPaperStyle = {\n            width: '100%',\n            margin: '0 auto 3rem',\n            position: 'relative'\n        };\n\n        if (this.isAddOperation()) {\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_16__SharingNotification_component__[\"a\" /* default */], { style: formPaperStyle, modelType: this.props.modelType });\n        }\n\n        return null;\n    },\n    renderStepper: function renderStepper() {\n        var _this2 = this;\n\n        var steps = __WEBPACK_IMPORTED_MODULE_9__config_field_config_field_groups__[\"a\" /* default */].for(this.props.modelType);\n        var stepCount = steps.length;\n\n        return stepCount > 1 ? __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            __WEBPACK_IMPORTED_MODULE_3_material_ui_Stepper__[\"Stepper\"],\n            { activeStep: this.state.activeStep, linear: false, style: { margin: '0 -16px' } },\n            steps.map(function (step, s) {\n                return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    __WEBPACK_IMPORTED_MODULE_3_material_ui_Stepper__[\"Step\"],\n                    { key: s },\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                        __WEBPACK_IMPORTED_MODULE_3_material_ui_Stepper__[\"StepButton\"],\n                        { onClick: function onClick() {\n                                return _this2.setActiveStep(s);\n                            } },\n                        _this2.getTranslation(step.label)\n                    )\n                );\n            })\n        ) : null;\n    },\n    renderForm: function renderForm() {\n        var formPaperStyle = {\n            width: '100%',\n            margin: '0 auto 2rem',\n            padding: '2rem 5rem 4rem',\n            position: 'relative'\n        };\n\n        if (this.state.isLoading) {\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6_d2_ui_lib_circular_progress_CircularProgress__[\"a\" /* default */], null);\n        }\n\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            { style: formPaperStyle },\n            this.renderStepper(),\n            this.renderSharingNotification(),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_d2_ui_lib_forms_FormBuilder_component__[\"a\" /* default */], {\n                fields: this.state.fieldConfigs,\n                onUpdateField: this._onUpdateField,\n                onUpdateFormStatus: this._onUpdateFormStatus,\n                ref: this.setFormRef\n            }),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                __WEBPACK_IMPORTED_MODULE_17__FormButtons_component__[\"a\" /* default */],\n                null,\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_14__SaveButton_component__[\"a\" /* default */], {\n                    onClick: this._saveAction,\n                    isValid: !this.state.formState.validating,\n                    isSaving: this.state.isSaving\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_15__CancelButton_component__[\"a\" /* default */], { onClick: this._closeAction })\n            )\n        );\n    },\n    render: function render() {\n        if (this.state.loading) {\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'div',\n                null,\n                'Loading data....'\n            );\n        }\n\n        return this.renderForm();\n    },\n\n\n    /*\n        Sets the style of the fields that are not part of the active steps to 'none'\n        so that they are \"hidden\". For this to work, the components needs to have\n        an outer div that receives the props.style. \n    */\n    setActiveStep: function setActiveStep(step) {\n        var stepsByField = __WEBPACK_IMPORTED_MODULE_9__config_field_config_field_groups__[\"a\" /* default */].groupsByField(this.props.modelType);\n        if (stepsByField) {\n            this.setState({\n                activeStep: step,\n                fieldConfigs: this.state.fieldConfigs.map(function (field) {\n                    if (stepsByField[field.name] === step) {\n                        field.props.style = { display: 'block' };\n                    } else {\n                        field.props.style = { display: 'none' };\n                    }\n                    return field;\n                })\n            });\n        }\n    },\n    setFormRef: function setFormRef(form) {\n        this.formRef = form;\n    },\n    _onUpdateField: function _onUpdateField(fieldName, value) {\n        var fieldConfig = this.state.fieldConfigs.find(function (fieldConfig) {\n            return fieldConfig.name == fieldName;\n        });\n        if (fieldConfig && fieldConfig.beforeUpdateConverter) {\n            return __WEBPACK_IMPORTED_MODULE_12__objectActions__[\"a\" /* default */].update({ fieldName: fieldName, value: fieldConfig.beforeUpdateConverter(value) });\n        }\n\n        return __WEBPACK_IMPORTED_MODULE_12__objectActions__[\"a\" /* default */].update({ fieldName: fieldName, value: value });\n    },\n    _onUpdateFormStatus: function _onUpdateFormStatus(formState) {\n        this.setState({\n            formState: formState\n        });\n    },\n    _saveAction: function _saveAction(event) {\n        var _this3 = this;\n\n        event.preventDefault();\n\n        var invalidFieldMessage = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_22__form_helpers_validateFields__[\"a\" /* default */])(this.state.fieldConfigs, this.formRef);\n        if (invalidFieldMessage) {\n            __WEBPACK_IMPORTED_MODULE_13__Snackbar_snack_actions__[\"a\" /* default */].show({\n                message: this.getTranslation('missing_required_property_field') + ' ' + invalidFieldMessage,\n                action: 'ok'\n            });\n            return;\n        }\n\n        // Set state to saving so forms actions are being prevented\n        this.setState({ isSaving: true });\n\n        __WEBPACK_IMPORTED_MODULE_12__objectActions__[\"a\" /* default */].saveObject({ id: this.props.modelId, modelType: this.props.modelType }).subscribe(function (message) {\n            _this3.setState({ isSaving: false });\n\n            __WEBPACK_IMPORTED_MODULE_13__Snackbar_snack_actions__[\"a\" /* default */].show({ message: message, translate: true });\n\n            _this3.props.onSaveSuccess(_this3.state.modelToEdit);\n        }, function (errorMessage) {\n            // TODO: d2 queries require a JSON body on 200 OK, an empty body is not valid JSON\n            if (errorMessage.httpStatusCode === 200) {\n                __WEBPACK_IMPORTED_MODULE_1_loglevel___default.a.warn('Save errored due to empty 200 OK body');\n\n                __WEBPACK_IMPORTED_MODULE_13__Snackbar_snack_actions__[\"a\" /* default */].show({ message: 'success', action: 'ok', translate: true });\n\n                return _this3.props.onSaveSuccess(_this3.state.modelToEdit);\n            }\n\n            __WEBPACK_IMPORTED_MODULE_1_loglevel___default.a.error(errorMessage);\n\n            _this3.setState({ isSaving: false });\n\n            if (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5_d2_utilizr__[\"isString\"])(errorMessage)) {\n                __WEBPACK_IMPORTED_MODULE_1_loglevel___default.a.debug(errorMessage);\n                __WEBPACK_IMPORTED_MODULE_13__Snackbar_snack_actions__[\"a\" /* default */].show({ message: errorMessage, action: 'ok' });\n            }\n\n            _this3.props.onSaveError(errorMessage);\n        });\n    },\n    _closeAction: function _closeAction(event) {\n        event.preventDefault();\n\n        this.props.onCancel();\n    }\n}));\n\n/***/ }),\n\n/***/ 2103:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d2_ui_lib_action_Action__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_expression_manager_ExpressionManager__ = __webpack_require__(360);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d2_ui_lib_expression_manager_ExpressionStatus_store__ = __webpack_require__(2120);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_d2_lib_d2__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_d2_lib_d2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_d2_lib_d2__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_rxjs__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_rxjs__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_d2_ui_lib_i18n_Translate_mixin__ = __webpack_require__(647);\n\n\n\n\n\n\n\n\nvar indicatorExpressionStatusActions = __WEBPACK_IMPORTED_MODULE_1_d2_ui_lib_action_Action__[\"a\" /* default */].createActionsFromNames(['requestExpressionStatus']);\nindicatorExpressionStatusActions.requestExpressionStatus.debounceTime(500).map(function (action) {\n    var encodedFormula = encodeURIComponent(action.data);\n    var url = 'expressions/description?expression=' + encodedFormula;\n    var request = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_d2_lib_d2__[\"getInstance\"])().then(function (d2) {\n        return d2.Api.getApi().get(url);\n    });\n\n    return __WEBPACK_IMPORTED_MODULE_5_rxjs__[\"Observable\"].fromPromise(request);\n}).concatAll().subscribe(function (response) {\n    __WEBPACK_IMPORTED_MODULE_3_d2_ui_lib_expression_manager_ExpressionStatus_store__[\"a\" /* default */].setState(response);\n});\n\nvar IndicatorExpressionManagerContainer = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createClass({\n    displayName: 'IndicatorExpressionManagerContainer',\n\n    propTypes: {\n        indicatorExpressionChanged: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.func.isRequired,\n        description: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string,\n        formula: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string,\n        titleText: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string\n    },\n\n    mixins: [__WEBPACK_IMPORTED_MODULE_6_d2_ui_lib_i18n_Translate_mixin__[\"a\" /* default */]],\n\n    getInitialState: function getInitialState() {\n        return {\n            organisationUnitGroups: [],\n            constants: [],\n            programTrackedEntityAttributes: [],\n            programIndicators: [],\n            programDataElements: []\n        };\n    },\n    componentDidMount: function componentDidMount() {\n        var _this = this;\n\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_d2_lib_d2__[\"getInstance\"])().then(function (d2) {\n            return d2.models.organisationUnitGroup.list({ paging: false, fields: 'id,displayName' });\n        }).then(function (collection) {\n            return collection.toArray().map(function (model) {\n                return { value: model.id, label: model.displayName };\n            });\n        }).then(function (organisationUnitGroups) {\n            return _this.setState({ organisationUnitGroups: organisationUnitGroups });\n        });\n\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_d2_lib_d2__[\"getInstance\"])().then(function (d2) {\n            return d2.models.constant.list({ paging: false, fields: 'id,displayName' });\n        }).then(function (collection) {\n            return collection.toArray().map(function (model) {\n                return { value: model.id, label: model.displayName };\n            });\n        }).then(function (constants) {\n            return _this.setState({ constants: constants });\n        });\n\n        this.refs.expressionManager.requestExpressionStatus();\n    },\n    getExpressionManager: function getExpressionManager() {\n        return this.refs.expressionManager;\n    },\n    render: function render() {\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_expression_manager_ExpressionManager__[\"a\" /* default */], {\n            descriptionLabel: this.getTranslation('description'),\n            descriptionValue: this.props.description,\n            formulaValue: this.props.formula,\n            expressionStatusStore: __WEBPACK_IMPORTED_MODULE_3_d2_ui_lib_expression_manager_ExpressionStatus_store__[\"a\" /* default */],\n            expressionChanged: this.props.indicatorExpressionChanged,\n            titleText: this.props.titleText,\n            ref: 'expressionManager'\n        });\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (IndicatorExpressionManagerContainer);\n\n/***/ }),\n\n/***/ 2104:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d2_ui_lib_i18n_Translate_mixin__ = __webpack_require__(647);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d2_lib_d2__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d2_lib_d2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_d2_lib_d2__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_material_ui_FontIcon_FontIcon__ = __webpack_require__(217);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_material_ui_FontIcon_FontIcon___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_material_ui_FontIcon_FontIcon__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_material_ui_Paper_Paper__ = __webpack_require__(154);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_material_ui_Paper_Paper___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_material_ui_Paper_Paper__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_Auth__ = __webpack_require__(1658);\n\n\n\n\n\n\n\nvar SharingNotification = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createClass({\n    displayName: 'SharingNotification',\n\n    propTypes: {\n        modelType: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string,\n        style: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.object\n    },\n\n    mixins: [__WEBPACK_IMPORTED_MODULE_1_d2_ui_lib_i18n_Translate_mixin__[\"a\" /* default */]],\n\n    render: function render() {\n        var modelDef = this.props.getModelDefinitionByName(this.props.modelType);\n        var createPublic = this.props.getCurrentUser().canCreatePublic(modelDef);\n        var createPrivate = this.props.getCurrentUser().canCreatePrivate(modelDef);\n        var notificationStyle = Object.assign({}, this.props.style, {\n            background: 'none',\n            margin: '14px 0 0 -4px'\n        });\n        var notificationTextStyle = {\n            verticalAlign: 'super',\n            lineHeight: '24px',\n            paddingLeft: '.5rem'\n        };\n        var toRender = null;\n\n        if (createPublic) {\n            toRender = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                __WEBPACK_IMPORTED_MODULE_4_material_ui_Paper_Paper___default.a,\n                { style: notificationStyle, zDepth: 0 },\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    __WEBPACK_IMPORTED_MODULE_3_material_ui_FontIcon_FontIcon___default.a,\n                    { className: 'material-icons' },\n                    'lock_open'\n                ),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    'span',\n                    { style: notificationTextStyle },\n                    this.getTranslation('object_will_created_public')\n                )\n            );\n        } else if (createPrivate) {\n            toRender = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                __WEBPACK_IMPORTED_MODULE_4_material_ui_Paper_Paper___default.a,\n                { style: notificationStyle, zDepth: 0 },\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    __WEBPACK_IMPORTED_MODULE_3_material_ui_FontIcon_FontIcon___default.a,\n                    { className: 'material-icons' },\n                    'lock'\n                ),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    'span',\n                    { style: notificationTextStyle },\n                    this.getTranslation('object_will_created_private')\n                )\n            );\n        }\n\n        return toRender;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__utils_Auth__[\"a\" /* withAuth */])(SharingNotification));\n\n/***/ }),\n\n/***/ 2105:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d2_lib_d2__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d2_lib_d2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_d2_lib_d2__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_circular_progress_CircularProgress__ = __webpack_require__(101);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__forms_form_fields_drop_down__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__dataElementGroupsStore__ = __webpack_require__(707);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\nfunction getLoadingdataElement() {\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        'div',\n        { style: { textAlign: 'center' } },\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_circular_progress_CircularProgress__[\"a\" /* default */], null)\n    );\n}\n\nfunction findValue(optionList, model) {\n    return optionList.map(function (option) {\n        return option.value;\n    }).find(function (option) {\n        return Array.from(model.dataElementGroups.values()).map(function (dataElementGroup) {\n            return dataElementGroup.id;\n        }).indexOf(option) !== -1;\n    });\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createClass({\n    displayName: 'DataElementGroupsAssignment.component',\n\n    propTypes: {\n        source: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.object.isRequired\n    },\n\n    getInitialState: function getInitialState() {\n        __WEBPACK_IMPORTED_MODULE_4__dataElementGroupsStore__[\"a\" /* default */].setState({\n            dataElementGroupValues: {},\n            remove: [],\n            save: []\n        });\n\n        return {\n            dataElementGroupSets: null\n        };\n    },\n    componentDidMount: function componentDidMount() {\n        var _this = this;\n\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d2_lib_d2__[\"getInstance\"])().then(function (d2) {\n            return d2.Api.getApi().get('dataElementGroupSets', {\n                fields: 'id,displayName,dataElementGroups[id,displayName]',\n                filter: ['compulsory:eq:true'],\n                paging: false\n            });\n        }).then(function (response) {\n            return response.dataElementGroupSets;\n        }).then(function (dataElementGroupSets) {\n            return _this.setState({ dataElementGroupSets: dataElementGroupSets });\n        });\n\n        this.subscription = __WEBPACK_IMPORTED_MODULE_4__dataElementGroupsStore__[\"a\" /* default */].subscribe(function () {\n            return _this.forceUpdate();\n        });\n    },\n    componentWillUnmount: function componentWillUnmount() {\n        if (this.subscription && this.subscription.unsubscribe) {\n            this.subscription.unsubscribe();\n        }\n    },\n    _updateGroupStatus: function _updateGroupStatus(dataElementGroupSetId, oldValue, event) {\n        // TODO: Very bad to change props and set d2.model.dirty manually\n        this.props.source.dirty = true;\n\n        __WEBPACK_IMPORTED_MODULE_4__dataElementGroupsStore__[\"a\" /* default */].setState({\n            dataElementGroupValues: Object.assign({}, __WEBPACK_IMPORTED_MODULE_4__dataElementGroupsStore__[\"a\" /* default */].state.dataElementGroupValues, _defineProperty({}, dataElementGroupSetId, event.target.value ? event.target.value : null)),\n            remove: Array.from(new Set(__WEBPACK_IMPORTED_MODULE_4__dataElementGroupsStore__[\"a\" /* default */].state.remove.concat([oldValue])).values())\n        });\n    },\n    render: function render() {\n        var _this2 = this;\n\n        if (!this.state.dataElementGroupSets) {\n            return getLoadingdataElement();\n        }\n\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            null,\n            this.state.dataElementGroupSets.map(function (dataElementGroupSet) {\n                var optionList = dataElementGroupSet.dataElementGroups.map(function (ig) {\n                    return {\n                        value: ig.id,\n                        text: ig.displayName\n                    };\n                });\n\n                var value = Object.prototype.hasOwnProperty.call(__WEBPACK_IMPORTED_MODULE_4__dataElementGroupsStore__[\"a\" /* default */].state.dataElementGroupValues, dataElementGroupSet.id) ? __WEBPACK_IMPORTED_MODULE_4__dataElementGroupsStore__[\"a\" /* default */].state.dataElementGroupValues[dataElementGroupSet.id] : findValue(optionList, _this2.props.source);\n\n                return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    'div',\n                    { key: dataElementGroupSet.id },\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__forms_form_fields_drop_down__[\"a\" /* default */], {\n                        labelText: dataElementGroupSet.displayName,\n                        translateLabel: false,\n                        options: optionList,\n                        value: value,\n                        onChange: _this2._updateGroupStatus.bind(_this2, dataElementGroupSet.id, findValue(optionList, _this2.props.source)),\n                        fullWidth: true\n                    })\n                );\n            })\n        );\n    }\n}));\n\n/***/ }),\n\n/***/ 2108:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_material_ui_Dialog_Dialog__ = __webpack_require__(338);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_material_ui_Dialog_Dialog___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_material_ui_Dialog_Dialog__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_material_ui_RaisedButton_RaisedButton__ = __webpack_require__(98);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_material_ui_RaisedButton_RaisedButton___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_material_ui_RaisedButton_RaisedButton__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton__ = __webpack_require__(83);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_d2_ui_lib_component_helpers_addD2Context__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__IndicatorExpressionManagerContainer_component__ = __webpack_require__(2103);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__modelToEditStore__ = __webpack_require__(120);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__DataIndicatorGroupsAssignment_component__ = __webpack_require__(2101);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__data_element_DataElementGroupsAssignment_component__ = __webpack_require__(2105);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\n\n\nvar styles = {\n    saveButton: {\n        marginRight: '1rem'\n    },\n    customContentStyle: {\n        width: '95%',\n        maxWidth: 'none'\n    }\n};\n\nvar IndicatorExtraFields = function (_React$Component) {\n    _inherits(IndicatorExtraFields, _React$Component);\n\n    function IndicatorExtraFields(props, state) {\n        _classCallCheck(this, IndicatorExtraFields);\n\n        var _this = _possibleConstructorReturn(this, (IndicatorExtraFields.__proto__ || Object.getPrototypeOf(IndicatorExtraFields)).call(this, props, state));\n\n        _this.state = {\n            dialogValid: true,\n            dialogOpen: false\n        };\n\n        _this.setNumerator = _this.setNumerator.bind(_this);\n        _this.setDenominator = _this.setDenominator.bind(_this);\n        _this.closeDialog = _this.closeDialog.bind(_this);\n        _this.saveToModelAndCloseDialog = _this.saveToModelAndCloseDialog.bind(_this);\n        _this.indicatorExpressionChanged = _this.indicatorExpressionChanged.bind(_this);\n        return _this;\n    }\n\n    _createClass(IndicatorExtraFields, [{\n        key: 'setNumerator',\n        value: function setNumerator() {\n            this.setState({ type: 'numerator', dialogOpen: true });\n        }\n    }, {\n        key: 'setDenominator',\n        value: function setDenominator() {\n            this.setState({ type: 'denominator', dialogOpen: true });\n        }\n    }, {\n        key: 'closeDialog',\n        value: function closeDialog() {\n            this.setState({ dialogOpen: false });\n        }\n    }, {\n        key: 'saveToModelAndCloseDialog',\n        value: function saveToModelAndCloseDialog() {\n            if (this.state.expressionStatus.isValid) {\n                this.props.modelToEdit[this.state.type] = this.state.expressionFormula;\n                this.props.modelToEdit[this.state.type + 'Description'] = this.state.expressionDescription;\n\n                __WEBPACK_IMPORTED_MODULE_6__modelToEditStore__[\"a\" /* default */].setState(this.props.modelToEdit);\n            }\n\n            this.setState({ dialogOpen: false });\n        }\n    }, {\n        key: 'indicatorExpressionChanged',\n        value: function indicatorExpressionChanged(data) {\n            var expressionValues = {};\n\n            if (data.expressionStatus.isValid) {\n                expressionValues.expressionStatus = data.expressionStatus;\n                expressionValues.expressionDescription = data.description;\n                expressionValues.expressionFormula = data.formula;\n            }\n\n            this.setState(_extends({\n                dialogValid: data.expressionStatus.isValid && Boolean(data.description.trim())\n            }, expressionValues));\n        }\n    }, {\n        key: 'renderExpressionManager',\n        value: function renderExpressionManager() {\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__IndicatorExpressionManagerContainer_component__[\"a\" /* default */], {\n                indicatorExpressionChanged: this.indicatorExpressionChanged,\n                formula: this.props.modelToEdit[this.state.type] || '',\n                description: this.props.modelToEdit[this.state.type + 'Description'] || '',\n                ref: 'expressionManagerContainer'\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var d2 = this.context.d2;\n\n            var dialogActions = [\n            // TODO: This button should \"commit\" the change to the model where a cancel button will discard any changes made\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton___default.a, { label: d2.i18n.getTranslation('cancel'), onTouchTap: this.closeDialog }), __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton___default.a, { label: d2.i18n.getTranslation('done'), onTouchTap: this.saveToModelAndCloseDialog, disabled: !this.state.dialogValid })];\n\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'div',\n                null,\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    'div',\n                    { style: { marginTop: '2rem' } },\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_material_ui_RaisedButton_RaisedButton___default.a, { label: d2.i18n.getTranslation('edit_numerator'), onClick: this.setNumerator, style: { marginRight: '2rem' } }),\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_material_ui_RaisedButton_RaisedButton___default.a, { label: d2.i18n.getTranslation('edit_denominator'), onClick: this.setDenominator }),\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                        __WEBPACK_IMPORTED_MODULE_1_material_ui_Dialog_Dialog___default.a,\n                        {\n                            title: d2.i18n.getTranslation('edit_' + this.state.type),\n                            open: this.state.dialogOpen,\n                            modal: true,\n                            actions: dialogActions,\n                            contentStyle: styles.customContentStyle,\n                            autoScrollBodyContent: true,\n                            repositionOnUpdate: false\n                        },\n                        this.state ? this.renderExpressionManager() : null\n                    )\n                ),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    'div',\n                    { style: { marginTop: '2rem' } },\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7__DataIndicatorGroupsAssignment_component__[\"a\" /* default */], { source: this.props.modelToEdit })\n                )\n            );\n        }\n    }]);\n\n    return IndicatorExtraFields;\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component);\n\nIndicatorExtraFields.propTypes = {\n    modelToEdit: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.object.isRequired\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    dataElement: [{\n        name: 'dataElementGroupAssignment',\n        component: function component(props) {\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'div',\n                { style: { marginTop: '2rem' } },\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8__data_element_DataElementGroupsAssignment_component__[\"a\" /* default */], { source: props.modelToEdit })\n            );\n        }\n    }],\n    indicator: [{\n        name: 'indicatorGroupAssignmentAndGroupAssignments',\n        component: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_d2_ui_lib_component_helpers_addD2Context__[\"a\" /* default */])(IndicatorExtraFields)\n    }]\n});\n\n/***/ }),\n\n/***/ 2109:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = getFirstInvalidFieldMessage;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash_fp__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash_fp___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash_fp__);\n\n\n/* *\n * The result coming from FormBuilder validateField will contain an error message on fail and \n * a boolean true if it succeeds. This \n */\nvar isInvalidField = function isInvalidField(validatedResult) {\n    return validatedResult !== true;\n};\n\nvar isRequiredField = function isRequiredField(field) {\n    return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_lodash_fp__[\"get\"])('isRequired', field.fieldOptions) === true;\n};\n\nvar validateField = function validateField(field, formRef, formRefStateClone) {\n    var validateResult = formRef.validateField(formRefStateClone, field.name, field.value);\n    return {\n        invalid: isInvalidField(validateResult),\n        step: field.step,\n        name: field.translatedName\n    };\n};\n\n/* *\n * Constructs the error message to present to the snackBar.\n * Adds the step the field can be found on if present.\n */\nvar getErrorMessage = function getErrorMessage(field) {\n    var fieldStep = field.step ? 'On step ' + field.step : '';\n\n    var errorMessage = ': ' + field.name + '. ' + fieldStep;\n    return errorMessage;\n};\n\n/** \n * Will filter out all the fields that are required. \n * The it will validate the fields using the formBuilder\n * and lastly fetch the first field that is required and invalid.\n */\nvar getFirstInvalidField = function getFirstInvalidField(fieldConfigs, formRef, formRefStateClone) {\n    return fieldConfigs.filter(function (fieldConfig) {\n        return isRequiredField(fieldConfig);\n    }).map(function (fieldConfig) {\n        return validateField(fieldConfig, formRef, formRefStateClone);\n    }).find(function (field) {\n        return field.invalid;\n    });\n};\n\n/**\n * Validate checks all the fields that are marked as required in the form.\n * The validation will set the fields as invalid in the formbuilder and set\n * the new state of the form.\n * \n * If any the required fields are not valid not it will create a message string \n * of the first invalid field.\n * \n * @returns {string} \n * The name and step/group of the invalid field.\n * If no invalid field, it will return an empty string.\n */\nfunction getFirstInvalidFieldMessage(fieldConfigs, formRef) {\n    var formRefStateClone = formRef.getStateClone();\n\n    var firstInvalidField = getFirstInvalidField(fieldConfigs, formRef, formRefStateClone);\n\n    if (!firstInvalidField) {\n        return '';\n    }\n    formRef.setState(formRefStateClone);\n\n    var errorMessage = getErrorMessage(firstInvalidField);\n    return errorMessage;\n}\n\n/***/ }),\n\n/***/ 2112:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (['dataDimensionType']);\n\n/***/ }),\n\n/***/ 2113:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (['dataDimensionType']);\n\n/***/ }),\n\n/***/ 2114:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (['name']);\n\n/***/ }),\n\n/***/ 2115:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (['dataDimensionType']);\n\n/***/ }),\n\n/***/ 2116:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (['dataDimensionType']);\n\n/***/ }),\n\n/***/ 2117:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__category__ = __webpack_require__(2112);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__categoryCombo__ = __webpack_require__(2113);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__categoryOptionCombo__ = __webpack_require__(2114);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__categoryOptionGroup__ = __webpack_require__(2115);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__categoryOptionGroupSet__ = __webpack_require__(2116);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__optionSet__ = __webpack_require__(2118);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__programRule__ = __webpack_require__(2119);\n\n\n\n\n\n\n\n\nvar disabledByType = {\n    category: __WEBPACK_IMPORTED_MODULE_0__category__[\"a\" /* default */],\n    categoryCombo: __WEBPACK_IMPORTED_MODULE_1__categoryCombo__[\"a\" /* default */],\n    categoryOptionCombo: __WEBPACK_IMPORTED_MODULE_2__categoryOptionCombo__[\"a\" /* default */],\n    categoryOptionGroup: __WEBPACK_IMPORTED_MODULE_3__categoryOptionGroup__[\"a\" /* default */],\n    categoryOptionGroupSet: __WEBPACK_IMPORTED_MODULE_4__categoryOptionGroupSet__[\"a\" /* default */],\n    optionSet: __WEBPACK_IMPORTED_MODULE_5__optionSet__[\"a\" /* default */],\n    programRule: __WEBPACK_IMPORTED_MODULE_6__programRule__[\"a\" /* default */]\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    for: function _for(schemaName) {\n        if (schemaName && disabledByType[schemaName]) {\n            return disabledByType[schemaName];\n        }\n        return [];\n    }\n});\n\n/***/ }),\n\n/***/ 2118:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (['valueType']);\n\n/***/ }),\n\n/***/ 2119:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (['program']);\n\n/***/ }),\n\n/***/ 2120:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__store_Store__ = __webpack_require__(24);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_0__store_Store__[\"a\" /* default */].create());\n\n/***/ }),\n\n/***/ 2133:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Stepper = exports.StepLabel = exports.StepContent = exports.StepButton = exports.Step = undefined;\n\nvar _Step2 = __webpack_require__(664);\n\nvar _Step3 = _interopRequireDefault(_Step2);\n\nvar _StepButton2 = __webpack_require__(665);\n\nvar _StepButton3 = _interopRequireDefault(_StepButton2);\n\nvar _StepContent2 = __webpack_require__(666);\n\nvar _StepContent3 = _interopRequireDefault(_StepContent2);\n\nvar _StepLabel2 = __webpack_require__(367);\n\nvar _StepLabel3 = _interopRequireDefault(_StepLabel2);\n\nvar _Stepper2 = __webpack_require__(667);\n\nvar _Stepper3 = _interopRequireDefault(_Stepper2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.Step = _Step3.default;\nexports.StepButton = _StepButton3.default;\nexports.StepContent = _StepContent3.default;\nexports.StepLabel = _StepLabel3.default;\nexports.Stepper = _Stepper3.default;\n\n/***/ }),\n\n/***/ 2197:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = EditModel;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_material_ui_Paper_Paper__ = __webpack_require__(154);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_material_ui_Paper_Paper___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_material_ui_Paper_Paper__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__EditModelForm_component__ = __webpack_require__(2102);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__router_utils__ = __webpack_require__(82);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\n\n\n\nfunction _onSaveError(errorMessage, props) {\n    if (errorMessage === 'No changes to be saved') {\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__router_utils__[\"a\" /* goToAndScrollUp */])('/list/' + props.groupName + '/' + props.modelType);\n    }\n}\n\nfunction EditModel(props) {\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        __WEBPACK_IMPORTED_MODULE_1_material_ui_Paper_Paper___default.a,\n        null,\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2__EditModelForm_component__[\"a\" /* default */], _extends({}, props, {\n            onCancel: function onCancel() {\n                return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__router_utils__[\"a\" /* goToAndScrollUp */])('/list/' + props.groupName + '/' + props.modelType);\n            },\n            onSaveSuccess: function onSaveSuccess() {\n                return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__router_utils__[\"a\" /* goToAndScrollUp */])('/list/' + props.groupName + '/' + props.modelType);\n            },\n            onSaveError: function onSaveError(errorMessage) {\n                return _onSaveError(errorMessage, props);\n            }\n        }))\n    );\n}\n\n/***/ }),\n\n/***/ 369:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d2_utilizr__ = __webpack_require__(339);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d2_utilizr___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_d2_utilizr__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__EditModel_component__ = __webpack_require__(2197);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__FormHeading__ = __webpack_require__(1684);\n\n\n\n\n\n\n\n\nfunction EditModelContainer(props) {\n    var schema = props.params.modelType || 'organisationUnit';\n\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        'div',\n        null,\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            { style: { display: 'flex', flexDirection: 'row', marginBottom: '1rem' } },\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                __WEBPACK_IMPORTED_MODULE_4__FormHeading__[\"a\" /* default */],\n                { schema: schema, groupName: props.params.groupName },\n                __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_d2_utilizr__[\"camelCaseToUnderscores\"])(schema)\n            )\n        ),\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__EditModel_component__[\"a\" /* default */], {\n            groupName: props.params.groupName,\n            modelType: schema,\n            modelId: props.params.modelId\n        })\n    );\n}\n\nEditModelContainer.propTypes = {\n    params: __WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.any.isRequired\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (EditModelContainer);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 0-d3b981caa3eb21697c96.js","\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport IconButton from 'material-ui/IconButton';\nimport { camelCaseToUnderscores } from 'd2-utilizr';\n\nimport inlineHelpMapping from '../config/inlinehelp-mapping.json';\n\nfunction mappingPathExists(mappingKey) {\n    return mappingKey && inlineHelpMapping[mappingKey];\n}\n\n/**\n * Returns the \"version\" of the documentation that corresponds with the current dhis2 version.\n *\n * @param {Object} version - The version definition as provided by d2.system.version.\n * @param {number} version.minor - The minor dhis2 version. e.g. The 25 in 2.25.\n * @param {boolean} version.snapshot - True when the current version is the snapshot(master/development) branch.\n *\n * @returns {string} `master` for a snapshot branch. `25` for 2.25 etc.\n */\nfunction getDocsVersion({ major, minor, snapshot }) {\n    if (snapshot) {\n        return 'master';\n    }\n    return `${major}.${minor}`;\n}\n\n/** \n * If ${placeholder} is found in mappingKey, it will be replaced with a matching name if \n * present from variablesToReplace.  \n * \n * Eg. for the mappingKey \"/edit/otherSection/${objectType}\" the placeholder objectType\n * will be found. If an entry in variablesToReplace exists objectType will be replaced \n * with the value to this entry, say constant. This will result in the new path  \"/edit/otherSection/constant\".\n * If no match is found, the path will return.\n * \n * @param {string} mappingKey The mapping that may have a placeholder to replace\n * @param {Map} variablesToReplace The variables that are to be replaced with the placeholder \n *\n * @returns {string} The matched path with replaced placeholders if found\n */\nfunction replacePlaceholder(mappingKey, variablesToReplace) {\n    const placeholderRegex = /\\$\\{(.+?)\\}/g;\n\n    return mappingKey.replace(placeholderRegex, (match, variable) => {\n        if (variablesToReplace.has(variable)) {\n            return variablesToReplace.get(variable);\n        }\n        return '.+?';\n    });\n}\n\n/** \n * Checks if the mappingKeyPath with replaced placeholders matches the path were currently on.\n * \n * @param {string} path The path to be matched with a mappingKey \n * @param {Map} variablesToReplace The variables that are to be replaced with a placeholder \n *\n * @returns {string} The matched mappingKey with replaced placeholders if found\n */\nfunction replaceMappingPathPlaceholder(path, variablesToReplace) {\n    return Object.keys(inlineHelpMapping)\n        .find((mappingKey) => {\n            const pathToMatch = replacePlaceholder(mappingKey, variablesToReplace);\n            return (new RegExp(pathToMatch)).test(path);\n        });\n}\n\n// Replaces the placeholders of the matched mappingKey url to create the complete partial help content path.\nfunction getPartialHelpContentPath(replacedMappingPath, variablesToReplaceCamel) {\n    if (mappingPathExists(replacedMappingPath)) {\n        return replacePlaceholder(inlineHelpMapping[replacedMappingPath], variablesToReplaceCamel);\n    }\n\n    return '';\n}\n\n/**\n * Attempts to find a help link as defined in the inlinehelp-mapping.js It will always pick the first match that it finds. Help links should therefore be\n * sorted with the longer links first.\n * The search is done using a regular expression that matches the path from the start. This means that paths that are longer/dynamic can still show help links.\n *\n * For example a help link key that is defined as  `/edit/dataElementSection/dataElement` would show up on both `/edit/dataElementSection/dataElement/add` and `/edit/dataElementSection/dataElement/wap68IYzTXr`.\n *\n * @param {string} path The current path/route that the browser is on. This is the path that the help link should be used for.\n * @param {string} schema The name of the schema to find help for.\n *\n * @returns {string} The partial path that the refers to the help content in the documentation.  e.g. `/en/user/html/manage_org_unit.html`\n */\nfunction findHelpLinkForPath(path, schema) {\n    const variablesToReplace = new Map([['objectType', schema]]);\n    const variablesToReplaceCamel = new Map([['objectType', camelCaseToUnderscores(schema)]]);\n\n    const replacedMappingPath = replaceMappingPathPlaceholder(path, variablesToReplace);\n\n    return getPartialHelpContentPath(replacedMappingPath, variablesToReplaceCamel);\n}\n\nexport default function HelpLink({ schema }, { d2 }) {\n    const path = window.location.hash\n        .replace(/^#/, '') // Remove leading hash\n        .replace(/\\?.+?$/, ''); // Remove query param/cache breaker\n    const docsLink = `https://docs.dhis2.org/${getDocsVersion(d2.system.version)}`;\n    const helpLink = findHelpLinkForPath(path, schema);\n\n    if (helpLink) {\n        return (\n            <IconButton\n                href={`${docsLink}${helpLink}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                tooltip={d2.i18n.getTranslation('open_user_guide')}\n                tooltipPosition=\"bottom-center\"\n                iconClassName=\"material-icons\"\n                iconStyle={{ top: -2 }}\n            >\n                help_outline\n            </IconButton>\n        );\n    }\n\n    return null;\n}\n\nHelpLink.propTypes = {\n    schema: PropTypes.string.isRequired,\n};\n\nHelpLink.contextTypes = {\n    d2: PropTypes.object,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/List/HelpLink.component.js","import { getInstance } from 'd2/lib/d2';\nimport FormFieldsForModel from '../forms/FormFieldsForModel';\nimport FormFieldsManager from '../forms/FormFieldsManager';\nimport fieldOrderNames from '../config/field-config/field-order';\nimport fieldOverrides from '../config/field-overrides/index';\nimport fieldGroups from '../config/field-config/field-groups';\nimport { createFieldConfig, typeToFieldMap } from '../forms/fields';\nimport mapPropsStream from 'recompose/mapPropsStream';\nimport { identity, noop, compose } from 'lodash/fp';\nimport { Observable } from 'rxjs';\nimport React from 'react';\nimport FormBuilder from 'd2-ui/lib/forms/FormBuilder.component';\nimport {applyRulesToFieldConfigs, getRulesForModelType} from \"./form-rules\";\n\nfunction getLabelText(labelText, fieldConfig = {}) {\n    // Add required indicator when the field is required\n    if (fieldConfig.props && fieldConfig.props.isRequired) {\n        return `${labelText} (*)`;\n    }\n    return labelText;\n}\n\n// Translate the sync validator messages if there are any validators\nfunction translateValidators(fieldConfig, d2) {\n    if (fieldConfig.validators) {\n        fieldConfig.validators = fieldConfig.validators\n            .map(validator => ({\n                ...validator,\n                message: d2.i18n.getTranslation(validator.message),\n            }));\n    }\n}\n\n// Get the field's label with required indicator if the field is required\n// Save one translated label for validation messages\nfunction setRequiredFieldsLabelText(fieldConfig, d2) {\n    fieldConfig.translatedName = d2.i18n.getTranslation(fieldConfig.props.labelText);\n    fieldConfig.props.labelText = getLabelText(\n        fieldConfig.translatedName,\n        fieldConfig,\n    );\n}\n\n/* \n * If the modelType are grouped in field-groups.js, the step number and group/step name \n * will be added to the fieldConfig. This string can later be used for the validating\n * step in EditModelForm.isRequiredFieldsValid to tell the user which step to find the \n * non-valid required field.\n */\nfunction setRequiredFieldsStepName(fieldConfig, modelType, d2) {\n    // TODO: Find way to fix programNotificationTemplate sending the correct modelType\n    if (fieldGroups.isGroupedFields(modelType) && modelType !== 'programNotificationTemplate') {\n        const stepNo = fieldGroups.groupNoByName(fieldConfig.name, modelType);\n        const stepName = fieldGroups.groupNameByStep(stepNo, modelType);\n        fieldConfig.step = `${stepNo + 1}: ${d2.i18n.getTranslation(stepName)}`;\n    }\n}\n\nexport async function createFieldConfigForModelTypes(modelType, forcedFieldOrderNames, includeAttributes = true, customFieldOrderName) {\n    const d2 = await getInstance();\n\n    const formFieldsManager = new FormFieldsManager(new FormFieldsForModel(d2.models));\n    formFieldsManager.setFieldOrder(forcedFieldOrderNames || fieldOrderNames.for(modelType));\n\n    for (const [fieldName, overrideConfig] of fieldOverrides.for(customFieldOrderName || modelType)) {\n        formFieldsManager.addFieldOverrideFor(fieldName, overrideConfig);\n    }\n\n    return formFieldsManager.getFormFieldsForModel({ modelDefinition: d2.models[modelType] }, customFieldOrderName)\n        .map((fieldConfig) => {\n            translateValidators(fieldConfig, d2);\n            setRequiredFieldsStepName(fieldConfig, modelType, d2);\n            setRequiredFieldsLabelText(fieldConfig, d2);\n            return fieldConfig;\n        }).concat(includeAttributes ? createAttributeFieldConfigs(d2, modelType) : []);\n}\n\nfunction createUniqueValidator(fieldConfig, modelDefinition, uid) {\n    return function checkAgainstServer(value) {\n        // Don't validate against the server when we have no value\n        if (!value || !value.trim()) {\n            return Promise.resolve(true);\n        }\n\n        let modelDefinitionWithFilter = modelDefinition\n            .filter().on(fieldConfig.fieldOptions.referenceProperty).equals(value);\n\n        if (uid) {\n            modelDefinitionWithFilter = modelDefinitionWithFilter.filter().on('id').notEqual(uid);\n        }\n\n        return modelDefinitionWithFilter\n            .list()\n            .then((collection) => {\n                if (collection.size !== 0) {\n                    return getInstance()\n                        .then(d2 => d2.i18n.getTranslation('value_not_unique'))\n                        .then(message => Promise.reject(message));\n                }\n                return Promise.resolve(true);\n            });\n    };\n}\n\nexport function addUniqueValidatorWhenUnique(fieldConfig, modelToEdit) {\n    if (fieldConfig.unique) {\n        fieldConfig.asyncValidators = [createUniqueValidator(fieldConfig, modelToEdit.modelDefinition, modelToEdit.id)];\n    }\n\n    return fieldConfig;\n}\n\nfunction createAttributeFieldConfigs(d2, schemaName) {\n    const modelDefinition = d2.models[schemaName];\n\n    return Object\n        .keys(modelDefinition.attributeProperties)\n        .map((attributeName) => {\n            const attribute = modelDefinition.attributeProperties[attributeName];\n\n            return createFieldConfig({\n                name: attribute.name,\n                valueType: attribute.valueType,\n                type: typeToFieldMap.get(attribute.optionSet ? 'CONSTANT' : attribute.valueType),\n                required: Boolean(attribute.mandatory),\n                fieldOptions: {\n                    labelText: attribute.name,\n                    options: attribute.optionSet ? attribute.optionSet.options.map(option => ({\n                        name: option.displayName || option.name,\n                        value: option.code,\n                    })) : [],\n                },\n            }, modelDefinition, d2.models);\n        });\n}\n\nexport function isAttribute(model, fieldConfig) {\n    return model.attributes && new Set(Object.keys(model.attributes)).has(fieldConfig.name);\n}\n\nconst transformValuesUsingConverters = (fieldConfig) => {\n    if (fieldConfig.beforePassToFieldConverter) {\n        return {\n            ...fieldConfig,\n            value: fieldConfig.beforePassToFieldConverter(fieldConfig.value),\n        };\n    }\n\n    return fieldConfig;\n};\n\nconst addModelToFieldConfigProps = model => fieldConfig => ({\n    ...fieldConfig,\n    props: { ...fieldConfig.props, model },\n});\n\nfunction addValuesToFieldConfigs(fieldConfigs, model) {\n    return fieldConfigs\n        .map((fieldConfig) => {\n            if (isAttribute(model, fieldConfig)) {\n                return ({\n                    ...fieldConfig,\n                    value: model.attributes[fieldConfig.name],\n                });\n            }\n\n            return ({\n                ...fieldConfig,\n                value: model[fieldConfig.name],\n            });\n        })\n        .map(transformValuesUsingConverters)\n        .map(addModelToFieldConfigProps(model));\n}\n\n/**\n * Create fieldConfigs for a schema\n * @param schema - Schema to create configs for\n * @param fieldNames - Fields to use\n * @param filterFieldConfigs - A filter function that should return an array of fieldConfigs (must be same amount of fieldConfigs)\n * @param includeAttributes - Whether to include attributes\n * @param runRules - Whether to apply field-rules specified in field-rules file.\n * @param customFieldOrderName - Custom name for the \"schema\", useful if the same schema has multiple purposes.\n * Ie. programNotificationTemplate, which are used in program Notification and programStage notifications.\n */\nexport function createFieldConfigsFor(schema, fieldNames, filterFieldConfigs = identity, includeAttributes, runRules=true, customFieldOrderName) {\n    filterFieldConfigs = filterFieldConfigs ? filterFieldConfigs : identity;\n    return mapPropsStream(props$ => props$\n        .filter(({ model }) => model)\n        .combineLatest(\n            Observable.fromPromise(createFieldConfigForModelTypes(schema, fieldNames, includeAttributes, customFieldOrderName)),\n            (props, fieldConfigs) => {\n                const fieldConfigsWithValues = addValuesToFieldConfigs(fieldConfigs, props.model);\n                const fieldConfigsToUse = runRules ? applyRulesToFieldConfigs(getRulesForModelType(customFieldOrderName || schema),\n                    filterFieldConfigs(fieldConfigsWithValues), props.model)\n                    : fieldConfigsWithValues;\n\n                return {\n                ...props,\n                fieldConfigs: fieldConfigsToUse\n            }}\n        )\n    );\n}\n\nconst convertValueUsingFieldConverter = (fieldConfigs, onChangeCallback) => (fieldName, value) => {\n    const fieldConfig = fieldConfigs.find(fieldConfig => fieldConfig.name === fieldName);\n    const converter = fieldConfig.beforeUpdateConverter || identity;\n\n    return onChangeCallback(fieldName, converter(value));\n};\n\n// TODO: Refactor includeAttributes magic flag to separate method `createFormWithAttributesFor`\nexport function createFormFor(source$, schema, properties, includeAttributes, customFieldOrderName) {\n    const enhance = compose(\n        mapPropsStream(props$ => props$\n            .combineLatest(source$, (props, model) => {\n                return { ...props, model }})\n        ),\n        createFieldConfigsFor(schema, properties, undefined, includeAttributes, false, customFieldOrderName),\n    );\n\n    function CreatedFormBuilderForm({ fieldConfigs, model, editFieldChanged, detailsFormStatusChange = noop }) {\n        const onUpdateField = convertValueUsingFieldConverter(fieldConfigs, editFieldChanged);\n        const fieldConfigsAfterRules = applyRulesToFieldConfigs(getRulesForModelType(customFieldOrderName || schema), fieldConfigs, model);\n        return (\n            <FormBuilder\n                fields={fieldConfigsAfterRules}\n                onUpdateField={onUpdateField}\n                onUpdateFormStatus={detailsFormStatusChange}\n            />\n        );\n    }\n\n    return enhance(CreatedFormBuilderForm);\n}\n\n/**\n * Add given props to the fieldConfig.\n * If fieldNames has values, only fields with those name will be given the props.\n * Useful to be given to map() of fieldConfigs.\n *\n * Ie: Only fields with name='shortname' will be given the props.\n * @example\n *  fieldConfigs.map(addPropsToFieldConfig[props, ['shortName']\n * @param fieldNames to add the props to.\n * @param props to add to fields\n * @returns {function(*): {props: {}}} fieldConfig with the props added.\n */\nexport const addPropsToFieldConfig = (props, fieldNames = []) => fieldConfig =>\n    fieldNames.length < 1 || fieldNames.includes(fieldConfig.name) ? { ...fieldConfig, props: { ...fieldConfig.props, ...props}} : fieldConfig;\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/formHelpers.js","module.exports = {\"/edit/categorySection/categoryOptionGroupSet\":\"/en/user/html/manage_category.html#create_category_option_group_set\",\"/edit/categorySection/categoryOptionGroup\":\"/en/user/html/manage_category.html#create_category_option_group\",\"/edit/categorySection/categoryOptionCombo\":\"/en/user/html/manage_category.html#assign_code_category_option_combo\",\"/edit/categorySection/categoryOption\":\"/en/user/html/manage_category.html#create_category_option\",\"/edit/categorySection/categoryCombo\":\"/en/user/html/manage_category.html#create_category_combination\",\"/edit/categorySection/category\":\"/en/user/html/manage_category.html#create_category\",\"/list/categorySection\":\"/en/user/html/manage_category.html\",\"/edit/dataElementSection/dataElementGroupSet\":\"/en/user/html/manage_data_element.html#create_data_element_group_set\",\"/edit/dataElementSection/dataElementGroup\":\"/en/user/html/manage_data_element.html#create_data_element_group\",\"/edit/dataElementSection/dataElement\":\"/en/user/html/manage_data_element.html#create_data_element\",\"/list/dataElementSection\":\"/en/user/html/manage_data_element.html\",\"/edit/dataSetSection/dataSet/${objectId}/sections\":\"/en/user/html/manage_data_set.html#manage_section_form\",\"/edit/dataSetSection/dataSet\":\"/en/user/html/manage_data_set.html#create_data_set\",\"/list/dataSetSection/dataSet\":\"/en/user/html/manage_data_set.html\",\"/edit/indicatorSection/programIndicatorGroup\":\"/en/user/html/configure_program_indicator.html#create_program_indicator_group\",\"/list/indicatorSection/programIndicatorGroup\":\"/en/user/html/configure_program_indicator.html\",\"/edit/indicatorSection/programIndicator\":\"/en/user/html/configure_program_indicator.html#create_program_indicator\",\"/list/indicatorSection/programIndicator\":\"/en/user/html/configure_program_indicator.html\",\"/edit/indicatorSection/indicatorGroupSet\":\"/en/user/html/manage_indicator.html#create_indicator_group_set\",\"/edit/indicatorSection/indicatorGroup\":\"/en/user/html/manage_indicator.html#create_indicator_group\",\"/edit/indicatorSection/indicatorType\":\"/en/user/html/manage_indicator.html#create_indicator_type\",\"/edit/indicatorSection/indicator\":\"/en/user/html/manage_indicator.html#create_indicator\",\"/list/indicatorSection\":\"/en/user/html/manage_indicator.html\",\"/edit/organisationUnitSection/organisationUnitGroupSet\":\"/en/user/html/manage_organisation_unit.html#create_organisation_unit_group_set\",\"/edit/organisationUnitSection/organisationUnitGroup\":\"/en/user/html/manage_organisation_unit.html#create_organisation_unit_group\",\"/edit/organisationUnitSection/organisationUnitLevel\":\"/en/user/html/manage_organisation_unit.html#name_organisation_unit_level\",\"/edit/organisationUnitSection/organisationUnit\":\"/en/user/html/manage_organisation_unit.html#create_organisation_unit\",\"/list/organisationUnitSection\":\"/en/user/html/manage_organisation_unit.html\",\"/edit/programSection/trackedEntityAttribute\":\"/en/user/html/configure_tracked_entity.html#create_tracked_entity_attribute\",\"/edit/programSection/programRuleVariable\":\"/en/user/html/configure_program_rule.html#create_program_rule_variable\",\"/edit/programSection/relationshipType\":\"/en/user/html/configure_relationship_type.html#create_relationship_type\",\"/edit/programSection/trackedEntity\":\"/en/user/html/configure_tracked_entity.html#about_tracked_entity\",\"/edit/programSection/programRule\":\"/en/user/html/configure_program_rule.html#create_program_rule\",\"/edit/programSection/program\":\"/en/user/html/configure_event_program_in_maintenance_app.html#create_event_program\",\"/list/programSection\":\"/en/user/html/configure_programs_in_maintenance_app.html\",\"/edit/validationSection/validationNotificationTemplate\":\"/en/user/html/manage_validation_rule.html#create_validation_notification\",\"/edit/validationSection/validationRuleGroup\":\"/en/user/html/manage_validation_rule.html#create_validation_rule_group\",\"/edit/validationSection/validationRule\":\"/en/user/html/manage_validation_rule.html#create_validation_rule\",\"/list/validationSection\":\"/en/user/html/manage_validation_rule.html\",\"/edit/otherSection/legendSet\":\"/en/user/html/manage_legend.html#create_legend\",\"/list/otherSection/legendSet\":\"/en/user/html/manage_legend.html\",\"/edit/otherSection/pushAnalysis\":\"/en/user/html/manage_push_report.html#create_push_report\",\"/list/otherSection/pushAnalysis\":\"/en/user/html/manage_push_report.html\",\"/edit/otherSection/externalMapLayer\":\"/en/user/html/manage_external_maplayer.html#create_external_map_layer\",\"/list/otherSection/externalMapLayer\":\"/en/user/html/manage_external_maplayer.html\",\"/edit/otherSection/${objectType}\":\"/en/user/html/manage_${objectType}.html#create_${objectType}\",\"/list/otherSection/${objectType}\":\"/en/user/html/manage_${objectType}.html\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/config/inlinehelp-mapping.json\n// module id = 1656\n// module chunks = 0 1 2 3 5 6 7","import React from 'react';\nimport PropTypes from 'prop-types';\nimport getDisplayName from 'recompose/getDisplayName';\n\nexport const withAuth = (WrappedComponent) => {\n\n    const WithAuth = (props, { d2 }) => {\n        const extraProps = {\n            getCurrentUser: () => d2.currentUser,\n            getModelDefinitionByName: (modelType) => d2.models[modelType]\n\n        }\n        return <WrappedComponent {...props} {...extraProps} />\n    }\n    WithAuth.displayName = `WithAuth(${getDisplayName(WrappedComponent)})`;\n    WithAuth.contextTypes = {\n        d2: PropTypes.object\n    }\n    return WithAuth;\n}\n\nexport default withAuth;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Auth.js","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport addD2Context from 'd2-ui/lib/component-helpers/addD2Context';\nimport Heading from 'd2-ui/lib/headings/Heading.component';\nimport HelpLink from '../List/HelpLink.component';\nimport BackButton from './BackButton.component';\nimport { goToAndScrollUp } from '../router-utils';\n\nfunction FormHeading({ level, schema, children, groupName, isDirtyHandler, ...props }, context) {\n    return (\n        <Heading {...props} level={level}>\n            <BackButton\n                onClick={() => goToAndScrollUp(`/list/${groupName}/${schema}`)}\n                iconStyle={{ top: 3 }}\n                isDirtyHandler={isDirtyHandler}\n            />\n            {context.d2.i18n.getTranslation(children)}\n            {schema && (<HelpLink schema={schema} />)}\n        </Heading>\n    );\n}\n\nFormHeading.propTypes = {\n    children: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.array,\n    ]),\n    level: PropTypes.number,\n    isDirtyHandler: PropTypes.func,\n    schema: PropTypes.string.isRequired,\n    groupName: PropTypes.string.isRequired,\n};\n\nFormHeading.defaultProps = {\n    isDirtyHandler: () => {},\n    level: 2,\n    children: '',\n};\n\nexport default addD2Context(FormHeading);\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/FormHeading.js","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport RaisedButton from 'material-ui/RaisedButton/RaisedButton';\nimport addD2Context from 'd2-ui/lib/component-helpers/addD2Context';\n\nfunction SaveButton(props, { d2 }) {\n    const {\n        isValid,\n        isSaving,\n        onClick,\n        ...rest\n    } = props;\n    const buttonText = isSaving ? d2.i18n.getTranslation('saving') : d2.i18n.getTranslation('save');\n\n    return (\n        <RaisedButton {...rest} primary onClick={onClick} label={buttonText} disabled={isSaving || !isValid} />\n    );\n}\n\nSaveButton.propTypes = {\n    isSaving: PropTypes.bool,\n    isValid: PropTypes.bool,\n    onClick: PropTypes.func.isRequired,\n};\nSaveButton.defaultProps = { isSaving: false, isValid: true };\n\nexport default addD2Context(SaveButton);\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/SaveButton.component.js","import { findIndex } from 'lodash/fp';\nimport fieldOrder from './field-order';\n\n/*\n    The stepper sets the style of the fields of the not active step to \"display: none\"\n    to hide them from view. For this to work the component of the field needs to recieve \n    the style from props. If the fields are not hidden when changing the active step\n    then check if the component of the corresponding fields are receiving and using the \n    style from props in its outer div. \n*/\n\nconst fieldGroupsForModelType = new Map([\n    [\n        'programRule',\n        [\n            {\n                label: 'enter_program_rule_details',\n                fields: ['program', 'name', 'description', 'priority'],\n            },\n            {\n                label: 'enter_program_rule_expression',\n                fields: ['condition'],\n            },\n            {\n                label: 'define_program_rule_actions',\n                fields: ['programRuleActions'],\n            },\n        ],\n    ],\n    [\n        'dataSetNotificationTemplate',\n        [\n            {\n                label: 'what_to_send',\n                fields: ['name', 'code', 'dataSets', 'messageTemplate'],\n            },\n            {\n                label: 'when_to_send_it',\n                fields: [\n                    'dataSetNotificationTrigger',\n                    'relativeScheduledDays',\n                    'sendStrategy',\n                ],\n            },\n            {\n                label: 'who_to_send_it_to',\n                fields: [\n                    'notificationRecipient',\n                    'recipientUserGroup',\n                    'deliveryChannels',\n                ],\n            },\n        ],\n    ],\n    [\n        'programNotificationTemplate',\n        [\n            {\n                label: 'what_to_send',\n                fields: ['name', 'messageTemplate'],\n            },\n            {\n                label: 'when_to_send_it',\n                fields: ['notificationTrigger', 'relativeScheduledDays'],\n            },\n            {\n                label: 'who_to_send_it_to',\n                fields: [\n                    'notificationRecipient',\n                    'recipientUserGroup',\n                    'deliveryChannels',\n                    'recipientProgramAttribute',\n                ],\n            },\n        ],\n    ],\n    [\n        'programStageNotificationTemplate',\n        [\n            {\n                label: 'what_to_send',\n                fields: ['name', 'messageTemplate'],\n            },\n            {\n                label: 'when_to_send_it',\n                fields: ['notificationTrigger', 'relativeScheduledDays'],\n            },\n            {\n                label: 'who_to_send_it_to',\n                fields: [\n                    'notificationRecipient',\n                    'recipientUserGroup',\n                    'deliveryChannels',\n                    'recipientDataElement',\n                    'recipientProgramAttribute',\n                ],\n            },\n        ],\n    ],\n]);\n\nexport default {\n    for(modelType) {\n        if (this.isGroupedFields(modelType)) {\n            return fieldGroupsForModelType.get(modelType);\n        }\n\n        return [\n            {\n                label: 'details',\n                fields: fieldOrder.for(modelType),\n            },\n        ];\n    },\n\n    isGroupedFields(modelType) {\n        return modelType && fieldGroupsForModelType.has(modelType);\n    },\n\n    groupNoByName(fieldName, modelType) {\n        if (this.isGroupedFields(modelType)) {\n            const modelGroup = fieldGroupsForModelType.get(modelType);\n            return findIndex((group => group.fields.includes(fieldName)), modelGroup);\n        }\n        return 0;\n    },\n\n    groupNameByStep(stepNo, modelType) {\n        if (this.isGroupedFields(modelType)) {\n            const modelGroup = fieldGroupsForModelType.get(modelType);\n            return modelGroup[stepNo].label;\n        }\n        return '';\n    },\n\n    groupsByField(modelType) {\n        if (this.isGroupedFields(modelType)) {\n            return fieldGroupsForModelType\n                .get(modelType)\n                .map(group => group.fields)\n                .reduce((fieldsWithStep, groupFields, stepNo) => {\n                    groupFields.map(field => fieldsWithStep[field] = stepNo);\n                    return fieldsWithStep;\n                }, {});\n        }\n    },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/field-config/field-groups.js","import React from 'react';\nimport IconButton from 'material-ui/IconButton/IconButton';\nimport addD2Context from 'd2-ui/lib/component-helpers/addD2Context';\nimport { config } from 'd2/lib/d2';\nimport modelToEditStore from '../EditModel/modelToEditStore';\n\nfunction BackButton(props, context) {\n    const { tooltip, onClick, isDirtyHandler = modelToEditStore.getState.bind(modelToEditStore), ...otherProps } = props;\n    const onClickWithConfirm = (...params) => {\n        const isDirty = isDirtyHandler && isDirtyHandler() && isDirtyHandler().dirty;\n\n        if (!isDirty) {\n            onClick(...params);\n        } else if (confirm(context.d2.i18n.getTranslation('abandon_unsaved_changes'))) {\n            onClick(...params);\n        }\n    };\n\n    return (\n        <IconButton\n            tooltip={tooltip || context.d2.i18n.getTranslation('back')}\n            tooltipPosition=\"bottom-right\"\n            onClick={onClickWithConfirm}\n            {...otherProps}\n            iconClassName=\"material-icons\"\n        >\n            &#xE5C4;\n        </IconButton>\n    );\n}\nBackButton.propTypes = {\n    tooltip: React.PropTypes.string,\n};\n\nexport default addD2Context(BackButton);\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/BackButton.component.js","import noop from 'd2-utilizr/lib/noop';\nimport log from 'loglevel';\nimport { negate } from 'lodash/fp';\nimport isArray from 'd2-utilizr/lib/isArray';\n\nimport fieldRules from '../../config/field-rules';\nimport systemSettingsStore from '../../App/systemSettingsStore';\n\n/* eslint-disable no-use-before-define */\nconst whenOperatorMap = new Map([\n    ['EQUALS', equalsOperator],\n    ['NOT_EQUALS', notEqualsOperator],\n    ['HAS_VALUE', hasValueOperator],\n    ['HAS_NO_VALUE', negate(hasValueOperator)],\n    ['HAS_STRING_VALUE', hasStringValueOperator],\n    ['ONEOF', oneOfOperator],\n    ['NONEOF', noneOfOperator],\n    ['SYSTEM_SETTING_IS_TRUE', systemSettingIsTrueOperator],\n    ['SYSTEM_SETTING_IS_FALSE', systemSettingIsFalseOperator],\n    ['IS_VALID_POINT', isPointOperator],\n    ['IS_HIDDEN_FIELD', isHiddenFieldOperator],\n]);\n\nconst operationsMap = new Map([\n    ['SET_PROP', setProp],\n    ['CHANGE_VALUE', changeValue],\n    ['HIDE_FIELD', hideField],\n    ['SHOW_FIELD', showField],\n]);\n/* eslint-enable no-use-before-define */\n\nexport function getRulesForModelType(fieldName) {\n    if (fieldRules.has(fieldName)) {\n        return fieldRules.get(fieldName);\n    }\n\n    return [];\n}\n\nfunction changeValue(fieldConfig, operationParams, ruleResult, model) {\n    if (ruleResult) {\n        operationParams.setValue(model, fieldConfig);\n    }\n}\n\nfunction setProp(fieldConfig, operationParams, ruleResult) {\n    if (!fieldConfig) {\n        return;\n    }\n    if (ruleResult) {\n        return fieldConfig.props[operationParams.propName] = operationParams.thenValue;\n    }\n\n    return fieldConfig.props[operationParams.propName] = operationParams.elseValue;\n}\n\n\n/*\n    Uses the swapping variable \"hiddenComponent\" when temporary hiding a field.\n    When the field should be shown again, the content of \"hiddenComponent\" is\n    put back to the \"component\" variable.\n*/\nfunction hideField(fieldConfig, operationParams, ruleResult) {\n    if (ruleResult && fieldConfig) {\n        fieldConfig.hiddenComponent = fieldConfig.hiddenComponent || fieldConfig.component;\n        fieldConfig.component = () => null;\n    } else if (fieldConfig && fieldConfig.hiddenComponent) {\n        fieldConfig.component = fieldConfig.hiddenComponent;\n        delete fieldConfig.hiddenComponent;\n    }\n}\n\nfunction showField(fieldConfig, operationParams, ruleResult) {\n    if (ruleResult && fieldConfig.hiddenComponent) {\n        fieldConfig.component = fieldConfig.hiddenComponent;\n        delete fieldConfig.hiddenComponent;\n    } else {\n        fieldConfig.hiddenComponent = fieldConfig.hiddenComponent || fieldConfig.component;\n        fieldConfig.component = () => null;\n    }\n}\n\nfunction getOperation(operationType) {\n    return operationsMap.has(operationType) ? operationsMap.get(operationType) : noop;\n}\n\nfunction getWhenOperator(operatorType) {\n    return whenOperatorMap.has(operatorType) ? whenOperatorMap.get(operatorType) : noop;\n}\n\nfunction hasValueOperator(value) {\n    return value !== undefined && value !== null;\n}\n\nfunction hasStringValueOperator(value) {\n    return hasValueOperator(value) && value.toString().trim().length > 0;\n}\n\nfunction equalsOperator(left, right) {\n    return left === right;\n}\n\nfunction notEqualsOperator(left, right) {\n    return left !== right;\n}\n\nfunction oneOfOperator(value, list) {\n    return list.indexOf(value) >= 0;\n}\n\nfunction noneOfOperator(value, list) {\n    return list.indexOf(value) < 0;\n}\n\nfunction isPointOperator(value) {\n    // TODO: Use the same validator as the one in the coordinate-field (perhaps move it to d2/d2-ui)\n    try {\n        const poly = JSON.parse(value);\n        return Array.isArray(poly) && (poly.length === 0 || (poly.length === 2 && !isNaN(poly[0]) && !isNaN(poly[1])));\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction isHiddenFieldOperator(a, b, fieldConfig) {\n    return fieldConfig.hasOwnProperty('hiddenComponent');\n}\n\nfunction systemSettingIsTrueOperator(value, settingKey) {\n    const settingsValue = systemSettingsStore.getState() ? systemSettingsStore.getState()[settingKey] : undefined;\n    return settingsValue === true;\n}\n\nfunction systemSettingIsFalseOperator(value, settingKey) {\n    const settingsValue = systemSettingsStore.getState() ? systemSettingsStore.getState()[settingKey] : undefined;\n    return settingsValue === false;\n}\n\nfunction ruleRunner({ whenFieldName, operatorFn, whenValue }, fieldConfig, model) {\n    return operatorFn(model[whenFieldName], whenValue, fieldConfig, model, whenFieldName);\n}\n\n\nfunction rulesRunner(rules, rule, modelToEdit, fieldConfigs) {\n    return rules.map((whenRule, index) => {\n        log.debug(`For field ${rule.field} run the when-rule where field ` +\n            ` ${whenRule.field || rule.field} ${getWhenOperator(whenRule.operator).name}` +\n            ` ${whenRule.value || ''} ${rule.field} ${rules.length > (index + 1) && 'then run'}`);\n\n        const fieldConfigForRule = fieldConfigs.find(fieldConfig =>\n            fieldConfig.name === (whenRule.field || rule.field));\n\n        const whenFieldName = whenRule.field ? whenRule.field : rule.field;\n        const operatorFn = getWhenOperator(whenRule.operator);\n        const whenValue = whenRule.value;\n\n        return ruleRunner({ whenFieldName, operatorFn, whenValue }, fieldConfigForRule, modelToEdit);\n    });\n}\n\nexport function applyRulesToFieldConfigs(rules, fieldConfigs, modelToEdit) {\n    rules.forEach((rule) => {\n        const rules = isArray(rule.when) ? rule.when : [rule.when];\n        const rulePassed = rulesRunner(rules, rule, modelToEdit, fieldConfigs).some(result => result === true);\n\n        log.debug('And the result is', rulePassed);\n\n        (rule.operations || [rule.operation])\n            .forEach((operation) => {\n                const fieldConfigForOperation = fieldConfigs.find(fieldConfig =>\n                    fieldConfig.name === (operation.field || rule.field));\n\n                const {\n                    field,\n                    type,\n                    ...operationParams\n                } = operation;\n\n                log.debug(`---- For field ${field || rule.field} \n                        execute ${getOperation(type).name} \n                        with`, operationParams);\n\n                getOperation(type)(fieldConfigForOperation, operationParams, rulePassed, modelToEdit);\n            });\n    });\n\n    return fieldConfigs;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/form-rules/index.js","import React from 'react';\nimport Button from 'material-ui/FlatButton';\nimport addD2Context from 'd2-ui/lib/component-helpers/addD2Context';\nimport modelToEditStore from '../EditModel/modelToEditStore';\n\nfunction CancelButton(\n    {\n        onClick,\n        isPristine,\n        isDirtyHandler = modelToEditStore.getState.bind(modelToEditStore),\n        ...props\n    },\n    context\n) {\n    const shouldConfirm =\n        isDirtyHandler && isDirtyHandler() && isDirtyHandler().dirty;\n\n    const onClickWithConfirm = (...params) => {\n        if (!shouldConfirm) {\n            onClick(...params);\n        } else if (\n            confirm(context.d2.i18n.getTranslation('abandon_unsaved_changes'))\n        ) {\n            onClick(...params);\n        }\n    };\n\n    return (\n        <Button\n            {...props}\n            onClick={onClickWithConfirm}\n            secondary={shouldConfirm}\n            label={context.d2.i18n.getTranslation('cancel')}\n        />\n    );\n}\n\nCancelButton.propTypes = {\n    onClick: React.PropTypes.func.isRequired,\n    /* A handler that should return an object with \"dirty\"-key,\n    describing if the current edited model is dirty\n     */\n    isDirtyHandler: React.PropTypes.func,\n};\n\nexport default addD2Context(CancelButton);\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/CancelButton.component.js","import { isEqual } from 'lodash/fp';\n\nimport {\n    BEFORE_START_OF_REPORTING_PERIOD,\n    BEFORE_END_OF_REPORTING_PERIOD,\n    AFTER_START_OF_REPORTING_PERIOD,\n    AFTER_END_OF_REPORTING_PERIOD,\n    EVENT_DATE,\n    ENROLLMENT_DATE,\n} from '../field-overrides/program-indicator/enums';\n\nexport function defaultAnalyticsPeriodBoundaries(type, current) {\n    const defaultProps = {\n        enrollment: [\n            {\n                analyticsPeriodBoundaryType: AFTER_START_OF_REPORTING_PERIOD,\n                boundaryTarget: ENROLLMENT_DATE,\n            },\n            {\n                analyticsPeriodBoundaryType: BEFORE_END_OF_REPORTING_PERIOD,\n                boundaryTarget: ENROLLMENT_DATE,\n            },\n        ],\n        event: [\n            {\n                analyticsPeriodBoundaryType: AFTER_START_OF_REPORTING_PERIOD,\n                boundaryTarget: EVENT_DATE,\n            },\n            {\n                analyticsPeriodBoundaryType: BEFORE_END_OF_REPORTING_PERIOD,\n                boundaryTarget: EVENT_DATE,\n            },\n        ],\n    };\n\n    function isNotDefault(val) {\n        return !isEqual(val, defaultProps.event)\n            && !isEqual(val, defaultProps.enrollment);\n    }\n\n    if (current && isNotDefault(current)) {\n        return current;\n    }\n\n    return defaultProps[type];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/field-config/field-defaults.js","import { defaultAnalyticsPeriodBoundaries } from './field-config/field-defaults';\n\n/**\n * Rule functions in EditModel/form-rules\n * \n * Rules for the form fields.\n * If multiple `when` objects are specified these are evaluated as an OR.\n * The following would result check if either of the statements return true\n * ```\n when: [{\n        field: 'valueType',\n        operator: 'ONEOF',\n        value: [\n            'TEXT',\n            'LONG_TEXT',\n            'LETTER',\n            'PHONE_NUMBER',\n            'EMAIL',\n            'TRACKER_ASSOCIATE',\n            'USERNAME',\n            'FILE_RESOURCE',\n            'COORDINATE',\n        ]\n        }, {\n            field: 'domainType',\n            operator: 'EQUALS',\n            value: 'TRACKER',\n        }],\n * ```\n */\n\n/*\n    Sets the valueType to the valueType of the optionSet\n    TODO: This function does a mutable modification. It is more efficient this way however it might\n    collide and is not very transparent. Especially the fact that the new value needs to be set\n    on both the model and the fieldConfig is not very clear.\n    It would probably make sense to run the model modification rules before sending the values to\n    the FormBuilder. */\nfunction setValueTypeToOptionSet(model, fieldConfig) {\n    // Do not not change the valueType when there is no optionSet or when there is no valueType\n    // for the optionSet (which can occur during the initial run of the rules)\n    if (model.optionSet && model.optionSet.valueType) {\n        // Update the fieldConfig to contain the correct value\n        fieldConfig.value = model.optionSet.valueType;\n\n        // Update the model only when the value is not the same as the current\n        if (model[fieldConfig.name] !== model.optionSet.valueType) {\n            model[fieldConfig.name] = model.optionSet.valueType;\n        }\n    }\n}\n\nexport default new Map([\n    ['dataElement', [\n        {\n            field: 'domainType',\n            when: {\n                operator: 'EQUALS',\n                value: 'TRACKER',\n            },\n            operations: [{\n                field: 'categoryCombo',\n                type: 'SET_PROP',\n                propName: 'disabled',\n                thenValue: true,\n                elseValue: false,\n            }],\n        },\n        {\n            field: 'valueType',\n            when: {\n                field: 'optionSet',\n                operator: 'HAS_VALUE',\n            },\n            operations: [{\n                type: 'SET_PROP',\n                propName: 'disabled',\n                thenValue: true,\n                elseValue: false,\n            }, {\n                type: 'CHANGE_VALUE',\n                setValue: setValueTypeToOptionSet,\n            }],\n        },\n        {\n            field: 'aggregationType',\n            when: {\n                field: 'valueType',\n                operator: 'ONEOF',\n                value: [\n                    'TEXT',\n                    'LONG_TEXT',\n                    'LETTER',\n                    'PHONE_NUMBER',\n                    'EMAIL',\n                    'TRACKER_ASSOCIATE',\n                    'USERNAME',\n                    'FILE_RESOURCE',\n                    'COORDINATE',\n                ],\n            },\n            operations: [{\n                field: 'aggregationType',\n                type: 'SET_PROP',\n                propName: 'disabled',\n                thenValue: true,\n                elseValue: false,\n            }, {\n                field: 'aggregationType',\n                type: 'CHANGE_VALUE',\n                setValue: (model, fieldConfig) => {\n                    fieldConfig.value = 'NONE';\n                    model[fieldConfig.name] = 'NONE';\n                },\n            }],\n        },\n    ]],\n    ['dataSetNotificationTemplate', [\n        {\n            when: [\n                {\n                    field: 'dataSetNotificationTrigger',\n                    operator: 'NOT_EQUALS',\n                    value: 'SCHEDULED_DAYS',\n                },\n            ],\n            operations: [\n                {\n                    field: 'relativeScheduledDays',\n                    type: 'HIDE_FIELD',\n                },\n                {\n                    field: 'sendStrategy',\n                    type: 'HIDE_FIELD',\n                },\n            ],\n        },\n        {\n            field: 'deliveryChannels',\n            when: [\n                {\n                    field: 'notificationRecipient',\n                    operator: 'NOT_EQUALS',\n                    value: 'ORGANISATION_UNIT_CONTACT',\n                },\n            ],\n            operations: [\n                {\n                    field: 'deliveryChannels',\n                    type: 'HIDE_FIELD',\n                },\n            ],\n        },\n    ]],\n    ['attribute', [\n        {\n            field: 'valueType',\n            when: {\n                field: 'optionSet',\n                operator: 'HAS_VALUE',\n            },\n            operations: [{\n                type: 'SET_PROP',\n                propName: 'disabled',\n                thenValue: true,\n                elseValue: false,\n            }, {\n                type: 'CHANGE_VALUE',\n                setValue: setValueTypeToOptionSet,\n            }],\n        },\n    ]],\n    ['trackedEntityAttribute', [\n        {\n            field: 'unique',\n            when: [{\n                field: 'valueType',\n                operator: 'ONEOF',\n                value: [\n                    'BOOLEAN',\n                    'TRUE_ONLY',\n                    'DATE',\n                    'TRACKER_ASSOCIATE',\n                    'USERNAME',\n                    'OPTION_SET',\n                ],\n            }],\n            operations: [\n                {\n                    field: 'unique',\n                    type: 'SET_PROP',\n                    propName: 'disabled',\n                    thenValue: true,\n                    elseValue: false,\n                },\n                {\n                    field: 'unique',\n                    type: 'CHANGE_VALUE',\n                    setValue: (model, fieldConfig) => {\n                        fieldConfig.value = false;\n                        model.unique = false;\n                    },\n                },\n            ],\n        },\n        {\n            field: 'valueType',\n            when: {\n                field: 'optionSet',\n                operator: 'HAS_VALUE',\n            },\n            operations: [\n                {\n                    type: 'SET_PROP',\n                    propName: 'disabled',\n                    thenValue: true,\n                    elseValue: false,\n                }, {\n                    type: 'CHANGE_VALUE',\n                    setValue: setValueTypeToOptionSet,\n                },\n            ],\n        },\n        {\n            field: 'orgunitScope',\n            when: [\n                {\n                    field: 'unique',\n                    operator: 'NOT_EQUALS',\n                    value: true,\n                },\n                {\n                    field: 'valueType',\n                    operator: 'ONEOF',\n                    value: [\n                        'BOOLEAN',\n                        'TRUE_ONLY',\n                        'DATE',\n                        'TRACKER_ASSOCIATE',\n                        'USERNAME',\n                        'OPTION_SET',\n                    ],\n                },\n            ],\n            operations: [{ type: 'HIDE_FIELD' }],\n        },\n        {\n            field: 'generated',\n            when: [\n                {\n                    field: 'orgunitScope',\n                    operator: 'IS_HIDDEN_FIELD',\n                },\n                {\n                    field: 'orgunitScope',\n                    operator: 'ONEOF',\n                    value: ['organisation_unit'],\n                },\n                {\n                    field: 'orgunitScope',\n                    operator: 'EQUALS',\n                    value: true,\n                },\n            ],\n            operations: [\n                {\n                    type: 'HIDE_FIELD',\n                },\n                {\n                    type: 'CHANGE_VALUE',\n                    setValue: (model, fieldConfig) => {\n                        fieldConfig.value = false;\n                        model.generated = false;\n                    },\n                },\n            ],\n        },\n        {\n            field: 'pattern',\n            when: [\n                {\n                    field: 'generated',\n                    operator: 'IS_HIDDEN_FIELD',\n                },\n                {\n                    field: 'generated',\n                    operator: 'NOT_EQUALS',\n                    value: true,\n                },\n            ],\n            operations: [\n                {\n                    type: 'HIDE_FIELD',\n                },\n                {\n                    type: 'CHANGE_VALUE',\n                    setValue: (model, fieldConfig) => {\n                        fieldConfig.value = null;\n                        model.pattern = null;\n                    },\n                },\n            ],\n        },\n    ]],\n    ['externalMapLayer', [\n        {\n            // When legendSet has value, clear and disable the legendSetUrl field\n            field: 'legendSetUrl',\n            when: [{\n                field: 'legendSet',\n                operator: 'HAS_VALUE',\n            }],\n            operations: [{\n                field: 'legendSetUrl',\n                type: 'SET_PROP',\n                propName: 'disabled',\n                thenValue: true,\n                elseValue: false,\n            }],\n        },\n        {\n            // When legendSetUrl has value, clear and disable the legendSet field\n            field: 'legendSet',\n            when: [{\n                field: 'legendSetUrl',\n                operator: 'HAS_STRING_VALUE',\n            }],\n            operations: [{\n                field: 'legendSet',\n                type: 'SET_PROP',\n                propName: 'disabled',\n                thenValue: true,\n                elseValue: false,\n            }],\n        },\n    ]],\n    ['organisationUnit', [\n        {\n            field: 'dataSets',\n            when: [{\n                operator: 'SYSTEM_SETTING_IS_FALSE',\n                value: 'keyAllowObjectAssignment',\n            }],\n            operations: [{\n                field: 'dataSets',\n                type: 'HIDE_FIELD',\n            }],\n        },\n        {\n            field: 'programs',\n            when: [{\n                operator: 'SYSTEM_SETTING_IS_FALSE',\n                value: 'keyAllowObjectAssignment',\n            }],\n            operations: [{\n                field: 'programs',\n                type: 'HIDE_FIELD',\n            }],\n        },\n        {\n            field: 'featureType',\n            when: [{\n                field: 'coordinates',\n                operator: 'HAS_VALUE',\n            }],\n            operations: [{\n                type: 'CHANGE_VALUE',\n                setValue: (model) => {\n                    // TODO: this is almost the same check as in the coordinate-field we should DRY these up.\n                    const isValidPoint = (value) => {\n                        try {\n                            const poly = JSON.parse(value);\n                            return Array.isArray(poly)\n                            && (poly.length === 0\n                                || (poly.length === 2 && !isNaN(poly[0]) && !isNaN(poly[1])));\n                        } catch (e) {}\n                        return false;\n                    };\n\n                    // If we have valid coordinates set the the featureType to POINT\n                    if (model.coordinates) {\n                        // Set the correct featureType if we're dealing with a point otherwise\n                        // keep the featureType the same as it was since we're not dealing with a point\n                        if (isValidPoint(model.coordinates)) {\n                            model.featureType = 'POINT';\n                        }\n                    } else {\n                        // The user might have removed the coordinates so we'll reset the featureType to `null`\n                        model.featureType = null;\n                    }\n                },\n            }],\n        },\n    ]],\n    ['programRule', [\n        {\n            field: 'name',\n            when: [{\n                field: 'program',\n                operator: 'HAS_VALUE',\n            }],\n            operations: [{\n                type: 'SET_PROP',\n                propName: 'disabled',\n                thenValue: false,\n                elseValue: true,\n            }],\n        },\n        {\n            field: 'description',\n            when: [{\n                field: 'program',\n                operator: 'HAS_VALUE',\n            }],\n            operations: [{\n                type: 'SET_PROP',\n                propName: 'disabled',\n                thenValue: false,\n                elseValue: true,\n            }],\n        },\n        {\n            field: 'priority',\n            when: [{\n                field: 'program',\n                operator: 'HAS_VALUE',\n            }],\n            operations: [{\n                type: 'SET_PROP',\n                propName: 'disabled',\n                thenValue: false,\n                elseValue: true,\n            }],\n        },\n        {\n            field: 'condition',\n            when: [{\n                field: 'program',\n                operator: 'HAS_VALUE',\n            }],\n            operations: [{\n                type: 'SET_PROP',\n                propName: 'disabled',\n                thenValue: false,\n                elseValue: true,\n            }],\n        },\n        {\n            field: 'programRuleActions',\n            when: [{\n                field: 'program',\n                operator: 'HAS_VALUE',\n            }],\n            operations: [{\n                type: 'SET_PROP',\n                propName: 'disabled',\n                thenValue: false,\n                elseValue: true,\n            }],\n        },\n    ]],\n    ['programRuleVariable', [\n        {\n            field: 'program',\n            when: [{\n                field: 'dataElement',\n                operator: 'HAS_STRING_VALUE',\n            }, {\n                field: 'trackedEntityAttribute',\n                operator: 'HAS_STRING_VALUE',\n            }, {\n                field: 'programStage',\n                operator: 'HAS_STRING_VALUE',\n            }],\n            operations: [{\n                type: 'SET_PROP',\n                propName: 'disabled',\n                thenValue: true,\n                elseValue: false,\n            }],\n        },\n        {\n            field: 'dataElement',\n            when: [{\n                field: 'programRuleVariableSourceType',\n                operator: 'ONEOF',\n                value: [\n                    'CALCULATED_VALUE',\n                    'TEI_ATTRIBUTE',\n                ],\n            }],\n            operations: [{\n                field: 'dataElement',\n                type: 'HIDE_FIELD',\n            }],\n        },\n        {\n            field: 'trackedEntityAttribute',\n            when: [{\n                field: 'programRuleVariableSourceType',\n                operator: 'NOT_EQUALS',\n                value: 'TEI_ATTRIBUTE',\n            }],\n            operations: [{\n                field: 'trackedEntityAttribute',\n                type: 'HIDE_FIELD',\n            }],\n        },\n        {\n            field: 'programStage',\n            when: [{\n                field: 'programRuleVariableSourceType',\n                operator: 'NOT_EQUALS',\n                value: 'DATAELEMENT_NEWEST_EVENT_PROGRAM_STAGE',\n            }],\n            operations: [{\n                field: 'programStage',\n                type: 'HIDE_FIELD',\n            }],\n        },\n        {\n            field: 'programStage',\n            when: [{\n                field: 'dataElement',\n                operator: 'HAS_STRING_VALUE',\n            }],\n            operations: [{\n                type: 'SET_PROP',\n                propName: 'disabled',\n                thenValue: true,\n                elseValue: false,\n            }],\n        },\n    ]],\n    ['programStage', [\n        {\n            field: 'autoGenerateEvent',\n            when: [{\n                field: 'autoGenerateEvent',\n                operator: 'NOT_EQUALS',\n                value: true,\n            }],\n            operations: [{\n                field: 'openAfterEnrollment',\n                type: 'HIDE_FIELD',\n            }, {\n                field: 'reportDateToUse',\n                type: 'HIDE_FIELD',\n            }],\n        },\n        {\n            field: 'reportDateToUse',\n            when: [{\n                field: 'openAfterEnrollment',\n                operator: 'NOT_EQUALS',\n                value: true,\n            }],\n            operations: [{\n                type: 'SET_PROP',\n                propName: 'disabled',\n                thenValue: true,\n                elseValue: false,\n            }],\n        },\n    ]],\n    ['enrollment', [\n        {\n            field: 'relationshipType',\n            when: [{\n                field: 'relationshipType',\n                operator: 'HAS_NO_VALUE',\n            }],\n            operations: [{\n                field: 'relationshipFromA',\n                type: 'HIDE_FIELD',\n            }, {\n                field: 'relationshipText',\n                type: 'HIDE_FIELD',\n            }, {\n                field: 'relatedProgram',\n                type: 'HIDE_FIELD',\n            }],\n        },\n        {\n            field: 'relationshipFromA',\n            when: [{\n                field: 'relationshipType',\n                operator: 'HAS_VALUE',\n            }],\n            operations: [{\n                field: 'relatedProgram',\n                type: 'SET_PROP',\n                propName: 'isRequired',\n                thenValue: true,\n                elseValue: false,\n            }, {\n                field: 'relationshipFromA',\n                type: 'SET_PROP',\n                propName: 'isRequired',\n                thenValue: true,\n                elseValue: false,\n            }, {\n                field: 'relationshipText',\n                type: 'SET_PROP',\n                propName: 'required',\n                thenValue: true,\n                elseValue: false,\n            }],\n        },\n    ]],\n    ['programIndicator', [{\n        field: 'analyticsPeriodBoundaries',\n        when: [{\n            field: 'analyticsType',\n            operator: 'EQUALS',\n            value: 'EVENT',\n        }],\n        operations: [{\n            type: 'CHANGE_VALUE',\n            setValue: (model, fieldConfig) => {\n                if (fieldConfig) {\n                    fieldConfig.value = defaultAnalyticsPeriodBoundaries('event', fieldConfig.value);\n                    model[fieldConfig.name] = defaultAnalyticsPeriodBoundaries('event', fieldConfig.value);\n                }\n            },\n        }],\n    }, {\n        field: 'analyticsPeriodBoundaries',\n        when: [{\n            field: 'analyticsType',\n            operator: 'EQUALS',\n            value: 'ENROLLMENT',\n        }],\n        operations: [{\n            type: 'CHANGE_VALUE',\n            setValue: (model, fieldConfig) => {\n                if (fieldConfig) {\n                    fieldConfig.value = defaultAnalyticsPeriodBoundaries('enrollment', fieldConfig.value);\n                    model[fieldConfig.name] = defaultAnalyticsPeriodBoundaries('enrollment', fieldConfig.value);\n                }\n            },\n        }],\n    }]],\n    ['programStageNotificationTemplate', [\n        {\n            field: 'notificationTrigger',\n            when: [{\n                field: 'notificationTrigger',\n                operator: 'NOT_EQUALS',\n                value: 'SCHEDULED_DAYS_DUE_DATE',\n            }],\n            operations: [{\n                field: 'relativeScheduledDays',\n                type: 'HIDE_FIELD',\n            }],\n        },\n        {\n            field: 'notificationRecipient',\n            when: [{\n                field: 'notificationRecipient',\n                operator: 'NONEOF',\n                value: [\n                    'TRACKED_ENTITY_INSTANCE',\n                    'ORGANISATION_UNIT_CONTACT',\n                ],\n            }],\n            operations: [{\n                field: 'deliveryChannels',\n                type: 'HIDE_FIELD',\n            }],\n        },\n        {\n            field: 'notificationRecipient',\n            when: [{\n                field: 'notificationRecipient',\n                operator: 'NOT_EQUALS',\n                value: 'DATA_ELEMENT',\n            }],\n            operations: [{\n                field: 'recipientDataElement',\n                type: 'HIDE_FIELD',\n            }],\n        },\n        {\n            field: 'notificationRecipient',\n            when: [{\n                field: 'notificationRecipient',\n                operator: 'NOT_EQUALS',\n                value: 'PROGRAM_ATTRIBUTE',\n            }],\n            operations: [{\n                field: 'recipientProgramAttribute',\n                type: 'HIDE_FIELD',\n            }],\n        },\n    ]],\n    ['programNotificationTemplate', [\n        {\n            field: 'notificationTrigger',\n            when: [{\n                field: 'notificationTrigger',\n                operator: 'NONEOF',\n                value: [\n                    'SCHEDULED_DAYS_INCIDENT_DATE',\n                    'SCHEDULED_DAYS_ENROLLMENT_DATE',\n                ],\n            }],\n            operations: [{\n                field: 'relativeScheduledDays',\n                type: 'HIDE_FIELD',\n            }],\n        },\n        {\n            field: 'notificationRecipient',\n            when: [{\n                field: 'notificationRecipient',\n                operator: 'NONEOF',\n                value: [\n                    'TRACKED_ENTITY_INSTANCE',\n                    'ORGANISATION_UNIT_CONTACT',\n                ],\n            }],\n            operations: [{\n                field: 'deliveryChannels',\n                type: 'HIDE_FIELD',\n            }],\n        },\n        {\n            field: 'notificationRecipient',\n            when: [{\n                field: 'notificationRecipient',\n                operator: 'NOT_EQUALS',\n                value: 'PROGRAM_ATTRIBUTE',\n            }],\n            operations: [{\n                field: 'recipientProgramAttribute',\n                type: 'HIDE_FIELD',\n            }]\n        }\n    ]],\n    ['categoryCombo', [\n        {\n            field: 'dataDimensionType',\n            when: [{\n                field: 'dataDimensionType',\n                operator: 'HAS_NO_VALUE'\n            }],\n            operations: [{\n                type: 'CHANGE_VALUE',\n                setValue: (model, fieldConfig) => {\n                    fieldConfig.value = model[fieldConfig.name] = 'DISAGGREGATION'\n                }\n            }]\n        }\n     ]],\n]);\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/field-rules.js","import React from 'react';\nimport isArray from 'd2-utilizr/lib/isArray';\n\nexport default function FormButtons(props) {\n    const defaultStyle = {\n        marginTop: '1rem',\n    };\n\n    const buttonStyle = {\n        marginRight: '1rem',\n        width: '10rem',\n    };\n\n    const buttonsToRender = isArray(props.children) ? props.children : [props.children];\n\n    return (\n        <div style={Object.assign(defaultStyle, props.style)}>\n            {buttonsToRender.map((child, index) => React.cloneElement(child, {\n                style: buttonStyle,\n                key: index,\n            }))}\n        </div>\n    );\n}\nFormButtons.propTypes = {\n    style: React.PropTypes.object,\n    children: React.PropTypes.oneOfType([\n        React.PropTypes.array,\n        React.PropTypes.object,\n    ]).isRequired,\n    isFormValid: React.PropTypes.func,\n};\n//\n// export default React.createClass({\n//\n//\n//    render() {\n//        return (\n//            <div style={this.props.style}>\n//                {this.props.children.map((child, index) => {\n//                    return React.cloneElement(child, {\n//                        isFormValid: this.props.isFormValid,\n//                        key: index,\n//                    });\n//                })}\n//            </div>\n//        );\n//    },\n// });\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/FormButtons.component.js","import React from 'react';\nimport { getInstance } from 'd2/lib/d2';\nimport CircularProgress from 'd2-ui/lib/circular-progress/CircularProgress';\n\nimport DropDown from '../forms/form-fields/drop-down';\nimport store from './indicatorGroupsStore';\n\nfunction getLoadingIndicator() {\n    return (\n        <div style={{ textAlign: 'center' }}>\n            <CircularProgress />\n        </div>\n    );\n}\n\nfunction findValue(optionList, model) {\n    return optionList\n        .map(option => option.value)\n        .find(option => Array.from(model.indicatorGroups.values()).map(indicatorGroup => indicatorGroup.id).indexOf(option) !== -1);\n}\n\nexport default React.createClass({\n    propTypes: {\n        source: React.PropTypes.object.isRequired,\n    },\n\n    getInitialState() {\n        store.setState({\n            indicatorGroupValues: {},\n            remove: [],\n            save: [],\n        });\n\n        return {\n            indicatorGroupSets: null,\n        };\n    },\n\n    componentDidMount() {\n        getInstance()\n            .then(d2 => d2.Api.getApi().get('indicatorGroupSets', {\n                fields: 'id,displayName,indicatorGroups[id,displayName]',\n                filter: ['compulsory:eq:true'],\n                paging: false,\n            }))\n            .then(response => response.indicatorGroupSets)\n            .then(indicatorGroupSets => this.setState({ indicatorGroupSets }));\n\n        this.subscription = store.subscribe(() => this.forceUpdate());\n    },\n\n    componentWillUnmount() {\n        if (this.subscription) {\n            this.subscription && this.subscription.unsubscribe();\n        }\n    },\n\n    render() {\n        if (!this.state.indicatorGroupSets) {\n            return getLoadingIndicator();\n        }\n\n        return (\n            <div>\n                {this.state.indicatorGroupSets.map((indicatorGroupSet, key) => {\n                    const optionList = indicatorGroupSet.indicatorGroups.map(ig => ({\n                        value: ig.id,\n                        text: ig.displayName,\n                    }));\n\n                    const value = Object.prototype.hasOwnProperty.call(store.state.indicatorGroupValues, indicatorGroupSet.id) ? store.state.indicatorGroupValues[indicatorGroupSet.id] : findValue(optionList, this.props.source);\n\n                    return (\n                        <div key={`dataIndicatorGroupAssignment${key}`}>\n                            <DropDown\n                                key={indicatorGroupSet.id}\n                                labelText={indicatorGroupSet.displayName}\n                                translateLabel={false}\n                                options={optionList}\n                                value={value}\n                                onChange={this._updateGroupStatus.bind(this, indicatorGroupSet.id, findValue(optionList, this.props.source))}\n                                fullWidth\n                            />\n                        </div>\n                    );\n                })}\n            </div>\n        );\n    },\n\n    _updateGroupStatus(indicatorGroupSetId, oldValue, event) {\n        // TODO: Very bad to change props and set d2.model.dirty manually\n        this.props.source.dirty = true;\n\n        store.setState({\n            indicatorGroupValues: Object.assign({}, store.state.indicatorGroupValues, { [indicatorGroupSetId]: event.target.value ? event.target.value : null }),\n            remove: Array.from((new Set(store.state.remove.concat([oldValue])).values())),\n        });\n    },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/DataIndicatorGroupsAssignment.component.js","import React from 'react';\n\nimport log from 'loglevel';\nimport { Observable } from 'rxjs';\n\nimport { Step, Stepper, StepButton } from 'material-ui/Stepper';\n\nimport { getInstance } from 'd2/lib/d2';\nimport { isString } from 'd2-utilizr';\nimport CircularProgress from 'd2-ui/lib/circular-progress/CircularProgress';\nimport Translate from 'd2-ui/lib/i18n/Translate.mixin';\nimport FormBuilder from 'd2-ui/lib/forms/FormBuilder.component';\n\nimport fieldGroups from '../config/field-config/field-groups';\nimport disabledOnEdit from '../config/disabled-on-edit';\nimport modelToEditStore from './modelToEditStore';\nimport objectActions from './objectActions';\nimport snackActions from '../Snackbar/snack.actions';\nimport SaveButton from './SaveButton.component';\nimport CancelButton from './CancelButton.component';\nimport SharingNotification from './SharingNotification.component';\nimport FormButtons from './FormButtons.component';\nimport extraFields from './extraFields';\n\nimport appState from '../App/appStateStore';\nimport { createFieldConfigForModelTypes, addUniqueValidatorWhenUnique, getAttributeFieldConfigs } from './formHelpers';\nimport { applyRulesToFieldConfigs, getRulesForModelType } from './form-rules';\n\nimport getFirstInvalidFieldMessage from './form-helpers/validateFields';\n\n\nconst currentSection$ = appState\n    .filter(state => state.sideBar && state.sideBar.currentSection)\n    .map(state => state.sideBar.currentSubSection)\n    .filter(state => state)\n    .distinctUntilChanged();\n\nconst editFormFieldsForCurrentSection$ = currentSection$\n    .flatMap(modelType => Observable.fromPromise(createFieldConfigForModelTypes(modelType)));\n\nconst isAddOperation = model => model.id === undefined;\n\nconst d2$ = Observable.fromPromise(getInstance());\n\nconst modelToEditAndModelForm$ = Observable.combineLatest(modelToEditStore, editFormFieldsForCurrentSection$, currentSection$, d2$)\n    .filter(([modelToEdit, formFields, currentType]) => {\n        if (modelToEdit && modelToEdit.modelDefinition && modelToEdit.modelDefinition.name) {\n            return modelToEdit.modelDefinition.name === currentType;\n        }\n        return false;\n    })\n    .map(([modelToEdit, editFormFieldsForCurrentModelType, modelType, d2]) => {\n        const fieldConfigs = editFormFieldsForCurrentModelType\n        // TODO: When switching to the FormBuilder that manages state this function for all values\n        // would need to be executed only for the field that actually changed and/or the values that\n        // change because of it.\n            .map((fieldConfig) => {\n                fieldConfig.fieldOptions.model = modelToEdit;\n\n                if (!isAddOperation(modelToEdit) && disabledOnEdit.for(modelType).indexOf(fieldConfig.name) !== -1) {\n                    fieldConfig.props.disabled = true;\n                }\n\n                // Check if value is an attribute\n                if (Object.keys(modelToEdit.attributes || []).indexOf(fieldConfig.name) >= 0) {\n                    fieldConfig.value = modelToEdit.attributes[fieldConfig.name];\n                    return fieldConfig;\n                }\n\n                // The value is passes through a converter before being set onto the field config.\n                // This is useful for when a value is a number and might have to be translated to a\n                // value of the type Number.\n                if (fieldConfig.beforePassToFieldConverter) {\n                    fieldConfig.value = fieldConfig.beforePassToFieldConverter(modelToEdit[fieldConfig.name]);\n                } else {\n                    fieldConfig.value = modelToEdit[fieldConfig.name];\n                }\n\n                return fieldConfig;\n            });\n\n        const fieldConfigsAfterRules = applyRulesToFieldConfigs(getRulesForModelType(modelToEdit.modelDefinition.name), fieldConfigs, modelToEdit);\n        const fieldConfigsWithAttributeFields = [].concat(\n            fieldConfigsAfterRules,\n            // getAttributeFieldConfigs(d2, modelToEdit),\n            (extraFields[modelType] || []).map((config) => {\n                config.props = config.props || {};\n                config.props.modelToEdit = modelToEdit;\n                return config;\n            }),\n        );\n        const fieldConfigsWithAttributeFieldsAndUniqueValidators = fieldConfigsWithAttributeFields\n            .map(fieldConfig => addUniqueValidatorWhenUnique(fieldConfig, modelToEdit));\n        return {\n            fieldConfigs: fieldConfigsWithAttributeFieldsAndUniqueValidators,\n            modelToEdit,\n            isLoading: false,\n        };\n    });\n\nfunction PlaceholderComponent(props) {\n    return null;\n}\n\nexport default React.createClass({\n    propTypes: {\n        modelId: React.PropTypes.string.isRequired,\n        modelType: React.PropTypes.string.isRequired,\n        onSaveSuccess: React.PropTypes.func.isRequired,\n        onSaveError: React.PropTypes.func.isRequired,\n        onCancel: React.PropTypes.func.isRequired,\n    },\n\n    mixins: [Translate],\n\n    getInitialState() {\n        return {\n            modelToEdit: undefined,\n            isLoading: true,\n            formState: {\n                validating: false,\n                valid: true,\n                pristine: true,\n            },\n            activeStep: 0,\n        };\n    },\n\n    isAddOperation() {\n        return this.props.modelId === 'add';\n    },\n\n    componentWillMount() {\n        this.subscription = modelToEditAndModelForm$\n            .subscribe((newState) => {\n                this.setState(newState);\n                this.setActiveStep(this.state.activeStep);\n            }, (errorMessage) => {\n                snackActions.show({ message: errorMessage, action: 'ok' });\n            });\n    },\n\n    componentWillUnmount() {\n        this.subscription && this.subscription.unsubscribe();\n    },\n\n    renderSharingNotification() {\n        const formPaperStyle = {\n            width: '100%',\n            margin: '0 auto 3rem',\n            position: 'relative',\n        };\n\n        if (this.isAddOperation()) {\n            return (<SharingNotification style={formPaperStyle} modelType={this.props.modelType} />);\n        }\n\n        return null;\n    },\n\n    renderStepper() {\n        const steps = fieldGroups.for(this.props.modelType);\n        const stepCount = steps.length;\n\n        return stepCount > 1 ? (\n            <Stepper activeStep={this.state.activeStep} linear={false} style={{ margin: '0 -16px' }}>\n                {steps.map((step, s) => (\n                    <Step key={s}>\n                        <StepButton onClick={() => this.setActiveStep(s)}>{this.getTranslation(step.label)}</StepButton>\n                    </Step>\n                ))}\n            </Stepper>\n        ) : null;\n    },\n\n    renderForm() {\n        const formPaperStyle = {\n            width: '100%',\n            margin: '0 auto 2rem',\n            padding: '2rem 5rem 4rem',\n            position: 'relative',\n        };\n\n        if (this.state.isLoading) {\n            return (\n                <CircularProgress />\n            );\n        }\n\n        return (\n            <div style={formPaperStyle}>\n                {this.renderStepper()}\n                {this.renderSharingNotification()}\n                <FormBuilder\n                    fields={this.state.fieldConfigs}\n                    onUpdateField={this._onUpdateField}\n                    onUpdateFormStatus={this._onUpdateFormStatus}\n                    ref={this.setFormRef}\n                />\n                <FormButtons>\n                    <SaveButton\n                        onClick={this._saveAction}\n                        isValid={!this.state.formState.validating}\n                        isSaving={this.state.isSaving}\n                    />\n                    <CancelButton onClick={this._closeAction} />\n                </FormButtons>\n            </div>\n        );\n    },\n\n    render() {\n        if (this.state.loading) {\n            return (<div>Loading data....</div>);\n        }\n\n        return this.renderForm();\n    },\n\n    /*\n        Sets the style of the fields that are not part of the active steps to 'none'\n        so that they are \"hidden\". For this to work, the components needs to have\n        an outer div that receives the props.style. \n    */\n    setActiveStep(step) {\n        const stepsByField = fieldGroups.groupsByField(this.props.modelType);\n        if (stepsByField) {\n            this.setState({\n                activeStep: step,\n                fieldConfigs: this.state.fieldConfigs.map((field) => {\n                    if (stepsByField[field.name] === step) {\n                        field.props.style = { display: 'block' };\n                    } else {\n                        field.props.style = { display: 'none' };\n                    }\n                    return field;\n                }),\n            });\n        }\n    },\n\n    setFormRef(form) {\n        this.formRef = form;\n    },\n\n    _onUpdateField(fieldName, value) {\n        const fieldConfig = this.state.fieldConfigs.find(fieldConfig => fieldConfig.name == fieldName);\n        if (fieldConfig && fieldConfig.beforeUpdateConverter) {\n            return objectActions.update({ fieldName, value: fieldConfig.beforeUpdateConverter(value) });\n        }\n\n        return objectActions.update({ fieldName, value });\n    },\n\n    _onUpdateFormStatus(formState) {\n        this.setState({\n            formState,\n        });\n    },\n\n    _saveAction(event) {\n        event.preventDefault();\n\n        const invalidFieldMessage = getFirstInvalidFieldMessage(this.state.fieldConfigs, this.formRef);\n        if (invalidFieldMessage) {\n            snackActions.show({\n                message: `${this.getTranslation('missing_required_property_field')} ${invalidFieldMessage}`,\n                action: 'ok',\n            });\n            return;\n        }\n\n        // Set state to saving so forms actions are being prevented\n        this.setState({ isSaving: true });\n\n        objectActions.saveObject({ id: this.props.modelId, modelType: this.props.modelType })\n            .subscribe(\n                (message) => {\n                    this.setState({ isSaving: false });\n\n                    snackActions.show({ message, translate: true });\n\n                    this.props.onSaveSuccess(this.state.modelToEdit);\n                },\n                (errorMessage) => {\n                    // TODO: d2 queries require a JSON body on 200 OK, an empty body is not valid JSON\n                    if (errorMessage.httpStatusCode === 200) {\n                        log.warn('Save errored due to empty 200 OK body');\n\n                        snackActions.show({ message: 'success', action: 'ok', translate: true });\n\n                        return this.props.onSaveSuccess(this.state.modelToEdit);\n                    }\n\n                    log.error(errorMessage);\n\n                    this.setState({ isSaving: false });\n\n                    if (isString(errorMessage)) {\n                        log.debug(errorMessage);\n                        snackActions.show({ message: errorMessage, action: 'ok' });\n                    }\n\n                    this.props.onSaveError(errorMessage);\n                },\n            );\n    },\n\n    _closeAction(event) {\n        event.preventDefault();\n\n        this.props.onCancel();\n    },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/EditModelForm.component.js","import React from 'react';\nimport Action from 'd2-ui/lib/action/Action';\nimport IndicatorExpressionManager from 'd2-ui/lib/expression-manager/ExpressionManager';\nimport indicatorExpressionStatusStore from 'd2-ui/lib/expression-manager/ExpressionStatus.store';\nimport { getInstance as getD2 } from 'd2/lib/d2';\nimport { Observable } from 'rxjs';\nimport Translate from 'd2-ui/lib/i18n/Translate.mixin';\n\nconst indicatorExpressionStatusActions = Action.createActionsFromNames(['requestExpressionStatus']);\nindicatorExpressionStatusActions.requestExpressionStatus\n    .debounceTime(500)\n    .map((action) => {\n        const encodedFormula = encodeURIComponent(action.data);\n        const url = `expressions/description?expression=${encodedFormula}`;\n        const request = getD2()\n            .then(d2 => d2.Api.getApi().get(url));\n\n        return Observable.fromPromise(request);\n    })\n    .concatAll()\n    .subscribe((response) => {\n        indicatorExpressionStatusStore.setState(response);\n    });\n\nconst IndicatorExpressionManagerContainer = React.createClass({\n    propTypes: {\n        indicatorExpressionChanged: React.PropTypes.func.isRequired,\n        description: React.PropTypes.string,\n        formula: React.PropTypes.string,\n        titleText: React.PropTypes.string,\n    },\n\n    mixins: [Translate],\n\n    getInitialState() {\n        return {\n            organisationUnitGroups: [],\n            constants: [],\n            programTrackedEntityAttributes: [],\n            programIndicators: [],\n            programDataElements: [],\n        };\n    },\n\n    componentDidMount() {\n        getD2()\n            .then(d2 => d2.models.organisationUnitGroup.list({ paging: false, fields: 'id,displayName' }))\n            .then(collection => collection.toArray().map(model => ({ value: model.id, label: model.displayName })))\n            .then(organisationUnitGroups => this.setState({ organisationUnitGroups }));\n\n        getD2()\n            .then(d2 => d2.models.constant.list({ paging: false, fields: 'id,displayName' }))\n            .then(collection => collection.toArray().map(model => ({ value: model.id, label: model.displayName })))\n            .then(constants => this.setState({ constants }));\n\n        this.refs.expressionManager.requestExpressionStatus();\n    },\n\n    getExpressionManager() {\n        return this.refs.expressionManager;\n    },\n\n    render() {\n        return (\n            <IndicatorExpressionManager\n                descriptionLabel={this.getTranslation('description')}\n                descriptionValue={this.props.description}\n                formulaValue={this.props.formula}\n                expressionStatusStore={indicatorExpressionStatusStore}\n                expressionChanged={this.props.indicatorExpressionChanged}\n                titleText={this.props.titleText}\n                ref=\"expressionManager\"\n            />\n        );\n    },\n});\n\nexport default IndicatorExpressionManagerContainer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/IndicatorExpressionManagerContainer.component.js","import React from 'react';\nimport Translate from 'd2-ui/lib/i18n/Translate.mixin';\nimport { config } from 'd2/lib/d2';\nimport FontIcon from 'material-ui/FontIcon/FontIcon';\nimport Paper from 'material-ui/Paper/Paper';\nimport { withAuth } from \"../utils/Auth\";\n\nconst SharingNotification = React.createClass({\n    propTypes: {\n        modelType: React.PropTypes.string,\n        style: React.PropTypes.object,\n    },\n\n    mixins: [Translate],\n\n    render() {\n        const modelDef = this.props.getModelDefinitionByName(this.props.modelType);\n        const createPublic = this.props.getCurrentUser().canCreatePublic(modelDef);\n        const createPrivate = this.props.getCurrentUser().canCreatePrivate(modelDef);\n        const notificationStyle = Object.assign({}, this.props.style, {\n            background: 'none',\n            margin: '14px 0 0 -4px',\n        });\n        const notificationTextStyle = {\n            verticalAlign: 'super',\n            lineHeight: '24px',\n            paddingLeft: '.5rem',\n        };\n        let toRender = null;\n\n        if (createPublic) {\n            toRender = (\n                <Paper style={notificationStyle} zDepth={0}>\n                    <FontIcon className=\"material-icons\">lock_open</FontIcon><span style={notificationTextStyle}>{this.getTranslation('object_will_created_public')}</span>\n                </Paper>\n            );\n        } else if (createPrivate) {\n            toRender = (\n                <Paper style={notificationStyle} zDepth={0}>\n                    <FontIcon className=\"material-icons\">lock</FontIcon><span style={notificationTextStyle}>{this.getTranslation('object_will_created_private')}</span>\n                </Paper>\n                );\n        }\n\n        return toRender;\n    },\n});\n\nexport default withAuth(SharingNotification);\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/SharingNotification.component.js","import React from 'react';\nimport { getInstance } from 'd2/lib/d2';\nimport CircularProgress from 'd2-ui/lib/circular-progress/CircularProgress';\n\nimport DropDown from '../../forms/form-fields/drop-down';\nimport store from './dataElementGroupsStore';\n\nfunction getLoadingdataElement() {\n    return (\n        <div style={{ textAlign: 'center' }}>\n            <CircularProgress />\n        </div>\n    );\n}\n\nfunction findValue(optionList, model) {\n    return optionList\n        .map(option => option.value)\n        .find(option => Array.from(model.dataElementGroups.values()).map(dataElementGroup => dataElementGroup.id).indexOf(option) !== -1);\n}\n\nexport default React.createClass({\n    propTypes: {\n        source: React.PropTypes.object.isRequired,\n    },\n\n    getInitialState() {\n        store.setState({\n            dataElementGroupValues: {},\n            remove: [],\n            save: [],\n        });\n\n        return {\n            dataElementGroupSets: null,\n        };\n    },\n\n    componentDidMount() {\n        getInstance()\n            .then(d2 => d2.Api.getApi().get('dataElementGroupSets', {\n                fields: 'id,displayName,dataElementGroups[id,displayName]',\n                filter: ['compulsory:eq:true'],\n                paging: false,\n            }))\n            .then(response => response.dataElementGroupSets)\n            .then(dataElementGroupSets => this.setState({ dataElementGroupSets }));\n\n        this.subscription = store.subscribe(() => this.forceUpdate());\n    },\n\n    componentWillUnmount() {\n        if (this.subscription && this.subscription.unsubscribe) {\n            this.subscription.unsubscribe();\n        }\n    },\n\n    _updateGroupStatus(dataElementGroupSetId, oldValue, event) {\n        // TODO: Very bad to change props and set d2.model.dirty manually\n        this.props.source.dirty = true;\n\n        store.setState({\n            dataElementGroupValues: Object.assign({}, store.state.dataElementGroupValues, { [dataElementGroupSetId]: event.target.value ? event.target.value : null }),\n            remove: Array.from((new Set(store.state.remove.concat([oldValue])).values())),\n        });\n    },\n\n    render() {\n        if (!this.state.dataElementGroupSets) {\n            return getLoadingdataElement();\n        }\n\n        return (\n            <div>\n                {this.state.dataElementGroupSets.map((dataElementGroupSet) => {\n                    const optionList = dataElementGroupSet.dataElementGroups.map(ig => ({\n                        value: ig.id,\n                        text: ig.displayName,\n                    }));\n\n                    const value = Object.prototype.hasOwnProperty.call(store.state.dataElementGroupValues, dataElementGroupSet.id) ? store.state.dataElementGroupValues[dataElementGroupSet.id] : findValue(optionList, this.props.source);\n\n                    return (\n                        <div key={dataElementGroupSet.id}>\n                            <DropDown\n                                labelText={dataElementGroupSet.displayName}\n                                translateLabel={false}\n                                options={optionList}\n                                value={value}\n                                onChange={this._updateGroupStatus.bind(this, dataElementGroupSet.id, findValue(optionList, this.props.source))}\n                                fullWidth\n                            />\n                        </div>\n                    );\n                })}\n            </div>\n        );\n    },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/data-element/DataElementGroupsAssignment.component.js","import React from 'react';\nimport Dialog from 'material-ui/Dialog/Dialog';\nimport RaisedButton from 'material-ui/RaisedButton/RaisedButton';\nimport FlatButton from 'material-ui/FlatButton/FlatButton';\nimport addD2Context from 'd2-ui/lib/component-helpers/addD2Context';\n\nimport IndicatorExpressionManagerContainer from './IndicatorExpressionManagerContainer.component';\nimport modelToEditStore from './modelToEditStore';\nimport DataIndicatorGroupsAssignment from './DataIndicatorGroupsAssignment.component';\nimport DataElementGroupsAssignment from './data-element/DataElementGroupsAssignment.component';\n\nconst styles = {\n    saveButton: {\n        marginRight: '1rem',\n    },\n    customContentStyle: {\n        width: '95%',\n        maxWidth: 'none',\n    },\n};\n\nclass IndicatorExtraFields extends React.Component {\n    constructor(props, state) {\n        super(props, state);\n        this.state = {\n            dialogValid: true,\n            dialogOpen: false,\n        };\n\n        this.setNumerator = this.setNumerator.bind(this);\n        this.setDenominator = this.setDenominator.bind(this);\n        this.closeDialog = this.closeDialog.bind(this);\n        this.saveToModelAndCloseDialog = this.saveToModelAndCloseDialog.bind(this);\n        this.indicatorExpressionChanged = this.indicatorExpressionChanged.bind(this);\n    }\n\n    setNumerator() {\n        this.setState({ type: 'numerator', dialogOpen: true });\n    }\n\n    setDenominator() {\n        this.setState({ type: 'denominator', dialogOpen: true });\n    }\n\n    closeDialog() {\n        this.setState({ dialogOpen: false });\n    }\n\n    saveToModelAndCloseDialog() {\n        if (this.state.expressionStatus.isValid) {\n            this.props.modelToEdit[this.state.type] = this.state.expressionFormula;\n            this.props.modelToEdit[`${this.state.type}Description`] = this.state.expressionDescription;\n\n            modelToEditStore.setState(this.props.modelToEdit);\n        }\n\n        this.setState({ dialogOpen: false });\n    }\n\n    indicatorExpressionChanged(data) {\n        const expressionValues = {};\n\n        if (data.expressionStatus.isValid) {\n            expressionValues.expressionStatus = data.expressionStatus;\n            expressionValues.expressionDescription = data.description;\n            expressionValues.expressionFormula = data.formula;\n        }\n\n        this.setState({\n            dialogValid: data.expressionStatus.isValid && Boolean(data.description.trim()),\n            ...expressionValues,\n        });\n    }\n\n    renderExpressionManager() {\n        return (\n            <IndicatorExpressionManagerContainer\n                indicatorExpressionChanged={this.indicatorExpressionChanged}\n                formula={this.props.modelToEdit[this.state.type] || ''}\n                description={this.props.modelToEdit[`${this.state.type}Description`] || ''}\n                ref=\"expressionManagerContainer\"\n            />\n        );\n    }\n\n    render() {\n        const d2 = this.context.d2;\n\n        const dialogActions = [\n            // TODO: This button should \"commit\" the change to the model where a cancel button will discard any changes made\n            <FlatButton label={d2.i18n.getTranslation('cancel')} onTouchTap={this.closeDialog} />,\n            <FlatButton label={d2.i18n.getTranslation('done')} onTouchTap={this.saveToModelAndCloseDialog} disabled={!this.state.dialogValid} />,\n        ];\n\n        return (\n            <div>\n                <div style={{ marginTop: '2rem' }}>\n                    <RaisedButton label={d2.i18n.getTranslation('edit_numerator')} onClick={this.setNumerator} style={{ marginRight: '2rem' }} />\n                    <RaisedButton label={d2.i18n.getTranslation('edit_denominator')} onClick={this.setDenominator} />\n                    <Dialog\n                        title={d2.i18n.getTranslation(`edit_${this.state.type}`)}\n                        open={this.state.dialogOpen}\n                        modal\n                        actions={dialogActions}\n                        contentStyle={styles.customContentStyle}\n                        autoScrollBodyContent\n                        repositionOnUpdate={false}\n                    >\n                        {this.state ? this.renderExpressionManager() : null}\n                    </Dialog>\n                </div>\n                <div style={{ marginTop: '2rem' }}>\n                    <DataIndicatorGroupsAssignment source={this.props.modelToEdit} />\n                </div>\n            </div>\n        );\n    }\n}\n\nIndicatorExtraFields.propTypes = {\n    modelToEdit: React.PropTypes.object.isRequired,\n};\n\nexport default {\n    dataElement: [\n        {\n            name: 'dataElementGroupAssignment',\n            component: props => (\n                <div style={{ marginTop: '2rem' }}>\n                    <DataElementGroupsAssignment source={props.modelToEdit} />\n                </div>\n            ),\n        },\n    ],\n    indicator: [\n        {\n            name: 'indicatorGroupAssignmentAndGroupAssignments',\n            component: addD2Context(IndicatorExtraFields),\n        },\n    ],\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/extraFields.js","import { get, find } from 'lodash/fp';\n\n/* *\n * The result coming from FormBuilder validateField will contain an error message on fail and \n * a boolean true if it succeeds. This \n */\nconst isInvalidField = validatedResult => validatedResult !== true;\n\nconst isRequiredField = field => get('isRequired', field.fieldOptions) === true;\n\nconst validateField = (field, formRef, formRefStateClone) => {\n    const validateResult = formRef.validateField(formRefStateClone, field.name, field.value);\n    return {\n        invalid: isInvalidField(validateResult),\n        step: field.step,\n        name: field.translatedName,\n    };\n};\n\n/* *\n * Constructs the error message to present to the snackBar.\n * Adds the step the field can be found on if present.\n */\nconst getErrorMessage = (field) => {\n    const fieldStep = field.step ? `On step ${field.step}` : '';\n\n    const errorMessage = `: ${field.name}. ${fieldStep}`;\n    return errorMessage;\n};\n\n/** \n * Will filter out all the fields that are required. \n * The it will validate the fields using the formBuilder\n * and lastly fetch the first field that is required and invalid.\n */\nconst getFirstInvalidField = (fieldConfigs, formRef, formRefStateClone) =>\n    fieldConfigs\n        .filter(fieldConfig => isRequiredField(fieldConfig))\n        .map(fieldConfig => validateField(fieldConfig, formRef, formRefStateClone))\n        .find(field => field.invalid);\n\n/**\n * Validate checks all the fields that are marked as required in the form.\n * The validation will set the fields as invalid in the formbuilder and set\n * the new state of the form.\n * \n * If any the required fields are not valid not it will create a message string \n * of the first invalid field.\n * \n * @returns {string} \n * The name and step/group of the invalid field.\n * If no invalid field, it will return an empty string.\n */\nexport default function getFirstInvalidFieldMessage(fieldConfigs, formRef) {\n    const formRefStateClone = formRef.getStateClone();\n\n    const firstInvalidField = getFirstInvalidField(fieldConfigs, formRef, formRefStateClone);\n\n    if (!firstInvalidField) {\n        return '';\n    }\n    formRef.setState(formRefStateClone);\n\n    const errorMessage = getErrorMessage(firstInvalidField);\n    return errorMessage;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/form-helpers/validateFields.js","export default [\n    'dataDimensionType',\n];\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/disabled-on-edit/category.js","export default [\n    'dataDimensionType',\n];\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/disabled-on-edit/categoryCombo.js","export default [\n    'name',\n];\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/disabled-on-edit/categoryOptionCombo.js","export default [\n    'dataDimensionType',\n];\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/disabled-on-edit/categoryOptionGroup.js","export default [\n    'dataDimensionType',\n];\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/disabled-on-edit/categoryOptionGroupSet.js","import category from './category';\nimport categoryCombo from './categoryCombo';\nimport categoryOptionCombo from './categoryOptionCombo';\nimport categoryOptionGroup from './categoryOptionGroup';\nimport categoryOptionGroupSet from './categoryOptionGroupSet';\nimport optionSet from './optionSet';\nimport programRule from './programRule';\n\nconst disabledByType = {\n    category,\n    categoryCombo,\n    categoryOptionCombo,\n    categoryOptionGroup,\n    categoryOptionGroupSet,\n    optionSet,\n    programRule,\n};\n\nexport default {\n    for(schemaName) {\n        if (schemaName && disabledByType[schemaName]) {\n            return disabledByType[schemaName];\n        }\n        return [];\n    },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/disabled-on-edit/index.js","export default [\n    'valueType',\n];\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/disabled-on-edit/optionSet.js","export default [\n    'program',\n];\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/disabled-on-edit/programRule.js","import Store from '../store/Store';\n\nexport default Store.create();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/d2-ui/lib/expression-manager/ExpressionStatus.store.js\n// module id = 2120\n// module chunks = 0 5","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Stepper = exports.StepLabel = exports.StepContent = exports.StepButton = exports.Step = undefined;\n\nvar _Step2 = require('./Step');\n\nvar _Step3 = _interopRequireDefault(_Step2);\n\nvar _StepButton2 = require('./StepButton');\n\nvar _StepButton3 = _interopRequireDefault(_StepButton2);\n\nvar _StepContent2 = require('./StepContent');\n\nvar _StepContent3 = _interopRequireDefault(_StepContent2);\n\nvar _StepLabel2 = require('./StepLabel');\n\nvar _StepLabel3 = _interopRequireDefault(_StepLabel2);\n\nvar _Stepper2 = require('./Stepper');\n\nvar _Stepper3 = _interopRequireDefault(_Stepper2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.Step = _Step3.default;\nexports.StepButton = _StepButton3.default;\nexports.StepContent = _StepContent3.default;\nexports.StepLabel = _StepLabel3.default;\nexports.Stepper = _Stepper3.default;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/material-ui/Stepper/index.js\n// module id = 2133\n// module chunks = 0 5","import React from 'react';\nimport Paper from 'material-ui/Paper/Paper';\nimport EditModelForm from './EditModelForm.component';\nimport { goToRoute, goToAndScrollUp } from '../router-utils';\n\nfunction onSaveError(errorMessage, props) {\n    if (errorMessage === 'No changes to be saved') {\n        goToAndScrollUp(`/list/${props.groupName}/${props.modelType}`);\n    }\n}\n\nexport default function EditModel(props) {\n    return (\n        <Paper>\n            <EditModelForm\n                {...props}\n                onCancel={() => goToAndScrollUp(`/list/${props.groupName}/${props.modelType}`)}\n                onSaveSuccess={() => goToAndScrollUp(`/list/${props.groupName}/${props.modelType}`)}\n                onSaveError={errorMessage => onSaveError(errorMessage, props)}\n            />\n        </Paper>\n    );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/EditModel.component.js","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { camelCaseToUnderscores } from 'd2-utilizr';\n\nimport EditModel from './EditModel.component';\nimport FormHeading from './FormHeading';\n\nfunction EditModelContainer(props) {\n    const schema = props.params.modelType || 'organisationUnit';\n\n    return (\n        <div>\n            <div style={{ display: 'flex', flexDirection: 'row', marginBottom: '1rem' }}>\n                <FormHeading schema={schema} groupName={props.params.groupName}>\n                    {camelCaseToUnderscores(schema)}\n                </FormHeading>\n            </div>\n            <EditModel\n                groupName={props.params.groupName}\n                modelType={schema}\n                modelId={props.params.modelId}\n            />\n        </div>\n    );\n}\n\nEditModelContainer.propTypes = {\n    params: PropTypes.any.isRequired,\n};\n\nexport default EditModelContainer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/EditModelContainer.component.js"],"sourceRoot":""}