webpackJsonp([0],{1654:function(e,t,n){"use strict";function r(e){return e&&_.a[e]}function a(e){var t=e.major,n=e.minor;return e.snapshot?"master":t+"."+n}function i(e,t){var n=/\$\{(.+?)\}/g;return e.replace(n,function(e,n){return t.has(n)?t.get(n):".+?"})}function o(e,t){return Object.keys(_.a).find(function(n){var r=i(n,t);return new RegExp(r).test(e)})}function l(e,t){return r(e)?i(_.a[e],t):""}function s(e,t){var r=new Map([["objectType",t]]),a=new Map([["objectType",n.i(h.camelCaseToUnderscores)(t)]]);return l(o(e,r),a)}function u(e,t){var n=e.schema,r=t.d2,i=window.location.hash.replace(/^#/,"").replace(/\?.+?$/,""),o="https://docs.dhis2.org/"+a(r.system.version),l=s(i,n);return l?c.a.createElement(g.a,{href:""+o+l,target:"_blank",rel:"noopener noreferrer",tooltip:r.i18n.getTranslation("open_user_guide"),tooltipPosition:"bottom-center",iconClassName:"material-icons",iconStyle:{top:-2}},"help_outline"):null}t.a=u;var p=n(0),c=n.n(p),d=n(1),m=n.n(d),f=n(42),g=n.n(f),h=n(339),y=(n.n(h),n(1656)),_=n.n(y);u.propTypes={schema:m.a.string.isRequired},u.contextTypes={d2:m.a.object}},1655:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),l=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.props&&t.props.isRequired?e+" (*)":e}function i(e,t){e.validators&&(e.validators=e.validators.map(function(e){return w({},e,{message:t.i18n.getTranslation(e.message)})}))}function o(e,t){e.translatedName=t.i18n.getTranslation(e.props.labelText),e.props.labelText=a(e.translatedName,e)}function l(e,t,n){if(E.a.isGroupedFields(t)&&"programNotificationTemplate"!==t){var r=E.a.groupNoByName(e.name,t),a=E.a.groupNameByStep(r,t);e.step=r+1+": "+n.i18n.getTranslation(a)}}function s(e,t,r){return function(a){if(!a||!a.trim())return Promise.resolve(!0);var i=t.filter().on(e.fieldOptions.referenceProperty).equals(a);return r&&(i=i.filter().on("id").notEqual(r)),i.list().then(function(e){return 0!==e.size?n.i(g.getInstance)().then(function(e){return e.i18n.getTranslation("value_not_unique")}).then(function(e){return Promise.reject(e)}):Promise.resolve(!0)})}}function u(e,t){return e.unique&&(e.asyncValidators=[s(e,t.modelDefinition,t.id)]),e}function p(e,t){var r=e.models[t];return Object.keys(r.attributeProperties).map(function(t){var a=r.attributeProperties[t];return n.i(S.a)({name:a.name,valueType:a.valueType,type:S.b.get(a.optionSet?"CONSTANT":a.valueType),required:Boolean(a.mandatory),fieldOptions:{labelText:a.name,options:a.optionSet?a.optionSet.options.map(function(e){return{name:e.displayName||e.name,value:e.code}}):[]}},r,e.models)})}function c(e,t){return e.attributes&&new Set(Object.keys(e.attributes)).has(t.name)}function d(e,t){return e.map(function(e){return c(t,e)?w({},e,{value:t.attributes[e.name]}):w({},e,{value:t[e.name]})}).map(L).map(V(t))}function m(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A.identity,a=arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments[5];return r=r||A.identity,b()(function(l){return l.filter(function(e){return e.model}).combineLatest(N.Observable.fromPromise(R(e,t,a,o)),function(t,a){var l=d(a,t.model),s=i?n.i(I.a)(n.i(I.b)(o||e),r(l),t.model):l;return w({},t,{fieldConfigs:s})})})}function f(e,t,r,a,i){function o(e){var r=e.fieldConfigs,a=e.model,o=e.editFieldChanged,l=e.detailsFormStatusChange,s=void 0===l?A.noop:l,u=U(r,o),p=n.i(I.a)(n.i(I.b)(i||t),r,a);return D.a.createElement(C.a,{fields:p,onUpdateField:u,onUpdateFormStatus:s})}return n.i(A.compose)(b()(function(t){return t.combineLatest(e,function(e,t){return w({},e,{model:t})})}),m(t,r,void 0,a,!1,i))(o)}n.d(t,"a",function(){return R}),t.b=u,t.f=c,t.d=m,t.c=f,n.d(t,"e",function(){return G});var g=n(15),h=(n.n(g),n(661)),y=n(662),_=n(646),v=n(659),E=n(1686),S=n(223),T=n(337),b=n.n(T),A=n(11),N=(n.n(A),n(16)),O=(n.n(N),n(0)),D=n.n(O),C=n(648),I=n(1688),P=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R=function(){var e=r(regeneratorRuntime.mark(function e(t,r){var a,s,u,c,d,m,f,E,S,T,b=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],A=arguments[3];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.i(g.getInstance)();case 2:for(a=e.sent,s=new y.a(new h.a(a.models)),s.setFieldOrder(r||_.a.for(t)),u=!0,c=!1,d=void 0,e.prev=8,m=v.a.for(A||t)[Symbol.iterator]();!(u=(f=m.next()).done);u=!0)E=P(f.value,2),S=E[0],T=E[1],s.addFieldOverrideFor(S,T);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),c=!0,d=e.t0;case 16:e.prev=16,e.prev=17,!u&&m.return&&m.return();case 19:if(e.prev=19,!c){e.next=22;break}throw d;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return e.abrupt("return",s.getFormFieldsForModel({modelDefinition:a.models[t]},A).map(function(e){return i(e,a),l(e,t,a),o(e,a),e}).concat(b?p(a,t):[]));case 25:case"end":return e.stop()}},e,this,[[8,12,16,24],[17,,19,23]])}));return function(t,n){return e.apply(this,arguments)}}(),L=function(e){return e.beforePassToFieldConverter?w({},e,{value:e.beforePassToFieldConverter(e.value)}):e},V=function(e){return function(t){return w({},t,{props:w({},t.props,{model:e})})}},U=function(e,t){return function(n,r){var a=e.find(function(e){return e.name===n}),i=a.beforeUpdateConverter||A.identity;return t(n,i(r))}},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){return t.length<1||t.includes(n.name)?w({},n,{props:w({},n.props,e)}):n}}},1656:function(e,t){e.exports={"/edit/categorySection/categoryOptionGroupSet":"/en/user/html/manage_category.html#create_category_option_group_set","/edit/categorySection/categoryOptionGroup":"/en/user/html/manage_category.html#create_category_option_group","/edit/categorySection/categoryOptionCombo":"/en/user/html/manage_category.html#assign_code_category_option_combo","/edit/categorySection/categoryOption":"/en/user/html/manage_category.html#create_category_option","/edit/categorySection/categoryCombo":"/en/user/html/manage_category.html#create_category_combination","/edit/categorySection/category":"/en/user/html/manage_category.html#create_category","/list/categorySection":"/en/user/html/manage_category.html","/edit/dataElementSection/dataElementGroupSet":"/en/user/html/manage_data_element.html#create_data_element_group_set","/edit/dataElementSection/dataElementGroup":"/en/user/html/manage_data_element.html#create_data_element_group","/edit/dataElementSection/dataElement":"/en/user/html/manage_data_element.html#create_data_element","/list/dataElementSection":"/en/user/html/manage_data_element.html","/edit/dataSetSection/dataSet/${objectId}/sections":"/en/user/html/manage_data_set.html#manage_section_form","/edit/dataSetSection/dataSet":"/en/user/html/manage_data_set.html#create_data_set","/list/dataSetSection/dataSet":"/en/user/html/manage_data_set.html","/edit/indicatorSection/programIndicatorGroup":"/en/user/html/configure_program_indicator.html#create_program_indicator_group","/list/indicatorSection/programIndicatorGroup":"/en/user/html/configure_program_indicator.html","/edit/indicatorSection/programIndicator":"/en/user/html/configure_program_indicator.html#create_program_indicator","/list/indicatorSection/programIndicator":"/en/user/html/configure_program_indicator.html","/edit/indicatorSection/indicatorGroupSet":"/en/user/html/manage_indicator.html#create_indicator_group_set","/edit/indicatorSection/indicatorGroup":"/en/user/html/manage_indicator.html#create_indicator_group","/edit/indicatorSection/indicatorType":"/en/user/html/manage_indicator.html#create_indicator_type","/edit/indicatorSection/indicator":"/en/user/html/manage_indicator.html#create_indicator","/list/indicatorSection":"/en/user/html/manage_indicator.html","/edit/organisationUnitSection/organisationUnitGroupSet":"/en/user/html/manage_organisation_unit.html#create_organisation_unit_group_set","/edit/organisationUnitSection/organisationUnitGroup":"/en/user/html/manage_organisation_unit.html#create_organisation_unit_group","/edit/organisationUnitSection/organisationUnitLevel":"/en/user/html/manage_organisation_unit.html#name_organisation_unit_level","/edit/organisationUnitSection/organisationUnit":"/en/user/html/manage_organisation_unit.html#create_organisation_unit","/list/organisationUnitSection":"/en/user/html/manage_organisation_unit.html","/edit/programSection/trackedEntityAttribute":"/en/user/html/configure_tracked_entity.html#create_tracked_entity_attribute","/edit/programSection/programRuleVariable":"/en/user/html/configure_program_rule.html#create_program_rule_variable","/edit/programSection/relationshipType":"/en/user/html/configure_relationship_type.html#create_relationship_type","/edit/programSection/trackedEntity":"/en/user/html/configure_tracked_entity.html#about_tracked_entity","/edit/programSection/programRule":"/en/user/html/configure_program_rule.html#create_program_rule","/edit/programSection/program":"/en/user/html/configure_event_program_in_maintenance_app.html#create_event_program","/list/programSection":"/en/user/html/configure_programs_in_maintenance_app.html","/edit/validationSection/validationNotificationTemplate":"/en/user/html/manage_validation_rule.html#create_validation_notification","/edit/validationSection/validationRuleGroup":"/en/user/html/manage_validation_rule.html#create_validation_rule_group","/edit/validationSection/validationRule":"/en/user/html/manage_validation_rule.html#create_validation_rule","/list/validationSection":"/en/user/html/manage_validation_rule.html","/edit/otherSection/legendSet":"/en/user/html/manage_legend.html#create_legend","/list/otherSection/legendSet":"/en/user/html/manage_legend.html","/edit/otherSection/pushAnalysis":"/en/user/html/manage_push_report.html#create_push_report","/list/otherSection/pushAnalysis":"/en/user/html/manage_push_report.html","/edit/otherSection/externalMapLayer":"/en/user/html/manage_external_maplayer.html#create_external_map_layer","/list/otherSection/externalMapLayer":"/en/user/html/manage_external_maplayer.html","/edit/otherSection/${objectType}":"/en/user/html/manage_${objectType}.html#create_${objectType}","/list/otherSection/${objectType}":"/en/user/html/manage_${objectType}.html"}},1658:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),l=n(224),s=n.n(l),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(e){var t=function(t,n){var r=n.d2,i={getCurrentUser:function(){return r.currentUser},getModelDefinitionByName:function(e){return r.models[e]}};return a.a.createElement(e,u({},t,i))};return t.displayName="WithAuth("+s()(e)+")",t.contextTypes={d2:o.a.object},t}},1684:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){var a=e.level,i=e.schema,l=e.children,s=e.groupName,u=e.isDirtyHandler,g=r(e,["level","schema","children","groupName","isDirtyHandler"]);return o.a.createElement(p.a,f({},g,{level:a}),o.a.createElement(d.a,{onClick:function(){return n.i(m.a)("/list/"+s+"/"+i)},iconStyle:{top:3},isDirtyHandler:u}),t.d2.i18n.getTranslation(l),i&&o.a.createElement(c.a,{schema:i}))}var i=n(0),o=n.n(i),l=n(1),s=n.n(l),u=n(34),p=n(153),c=n(1654),d=n(1687),m=n(82),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};a.propTypes={children:s.a.oneOfType([s.a.string,s.a.array]),level:s.a.number,isDirtyHandler:s.a.func,schema:s.a.string.isRequired,groupName:s.a.string.isRequired},a.defaultProps={isDirtyHandler:function(){},level:2,children:""},t.a=n.i(u.a)(a)},1685:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){var n=t.d2,a=e.isValid,i=e.isSaving,l=e.onClick,s=r(e,["isValid","isSaving","onClick"]),u=i?n.i18n.getTranslation("saving"):n.i18n.getTranslation("save");return o.a.createElement(p.a,d({},s,{primary:!0,onClick:l,label:u,disabled:i||!a}))}var i=n(0),o=n.n(i),l=n(1),s=n.n(l),u=n(98),p=n.n(u),c=n(34),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};a.propTypes={isSaving:s.a.bool,isValid:s.a.bool,onClick:s.a.func.isRequired},a.defaultProps={isSaving:!1,isValid:!0},t.a=n.i(c.a)(a)},1686:function(e,t,n){"use strict";var r=n(11),a=(n.n(r),n(646)),i=new Map([["programRule",[{label:"enter_program_rule_details",fields:["program","name","description","priority"]},{label:"enter_program_rule_expression",fields:["condition"]},{label:"define_program_rule_actions",fields:["programRuleActions"]}]],["dataSetNotificationTemplate",[{label:"what_to_send",fields:["name","code","dataSets","messageTemplate"]},{label:"when_to_send_it",fields:["dataSetNotificationTrigger","relativeScheduledDays","sendStrategy"]},{label:"who_to_send_it_to",fields:["notificationRecipient","recipientUserGroup","deliveryChannels"]}]],["programNotificationTemplate",[{label:"what_to_send",fields:["name","messageTemplate"]},{label:"when_to_send_it",fields:["notificationTrigger","relativeScheduledDays"]},{label:"who_to_send_it_to",fields:["notificationRecipient","recipientUserGroup","deliveryChannels","recipientProgramAttribute"]}]],["programStageNotificationTemplate",[{label:"what_to_send",fields:["name","messageTemplate"]},{label:"when_to_send_it",fields:["notificationTrigger","relativeScheduledDays"]},{label:"who_to_send_it_to",fields:["notificationRecipient","recipientUserGroup","deliveryChannels","recipientDataElement","recipientProgramAttribute"]}]]]);t.a={for:function(e){return this.isGroupedFields(e)?i.get(e):[{label:"details",fields:a.a.for(e)}]},isGroupedFields:function(e){return e&&i.has(e)},groupNoByName:function(e,t){if(this.isGroupedFields(t)){var a=i.get(t);return n.i(r.findIndex)(function(t){return t.fields.includes(e)},a)}return 0},groupNameByStep:function(e,t){if(this.isGroupedFields(t)){return i.get(t)[e].label}return""},groupsByField:function(e){if(this.isGroupedFields(e))return i.get(e).map(function(e){return e.fields}).reduce(function(e,t,n){return t.map(function(t){return e[t]=n}),e},{})}}},1687:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){var n=e.tooltip,a=e.onClick,i=e.isDirtyHandler,l=void 0===i?c.a.getState.bind(c.a):i,u=r(e,["tooltip","onClick","isDirtyHandler"]),p=function(){l&&l()&&l().dirty?confirm(t.d2.i18n.getTranslation("abandon_unsaved_changes"))&&a.apply(void 0,arguments):a.apply(void 0,arguments)};return o.a.createElement(s.a,d({tooltip:n||t.d2.i18n.getTranslation("back"),tooltipPosition:"bottom-right",onClick:p},u,{iconClassName:"material-icons"}),"î—„")}var i=n(0),o=n.n(i),l=n(103),s=n.n(l),u=n(34),p=n(15),c=(n.n(p),n(120)),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};a.propTypes={tooltip:o.a.PropTypes.string},t.a=n.i(u.a)(a)},1688:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e){return w.a.has(e)?w.a.get(e):[]}function i(e,t,n,r){n&&t.setValue(r,e)}function o(e,t,n){if(e)return e.props[t.propName]=n?t.thenValue:t.elseValue}function l(e,t,n){n&&e?(e.hiddenComponent=e.hiddenComponent||e.component,e.component=function(){return null}):e&&e.hiddenComponent&&(e.component=e.hiddenComponent,delete e.hiddenComponent)}function s(e,t,n){n&&e.hiddenComponent?(e.component=e.hiddenComponent,delete e.hiddenComponent):(e.hiddenComponent=e.hiddenComponent||e.component,e.component=function(){return null})}function u(e){return V.has(e)?V.get(e):N.a}function p(e){return L.has(e)?L.get(e):N.a}function c(e){return void 0!==e&&null!==e}function d(e){return c(e)&&e.toString().trim().length>0}function m(e,t){return e===t}function f(e,t){return e!==t}function g(e,t){return t.indexOf(e)>=0}function h(e,t){return t.indexOf(e)<0}function y(e){try{var t=JSON.parse(e);return Array.isArray(t)&&(0===t.length||2===t.length&&!isNaN(t[0])&&!isNaN(t[1]))}catch(e){return!1}}function _(e,t,n){return n.hasOwnProperty("hiddenComponent")}function v(e,t){return!0===(R.a.getState()?R.a.getState()[t]:void 0)}function E(e,t){return!1===(R.a.getState()?R.a.getState()[t]:void 0)}function S(e,t,n){var r=e.whenFieldName,a=e.operatorFn,i=e.whenValue;return a(n[r],i,t,n,r)}function T(e,t,n,r){return e.map(function(a,i){D.a.debug("For field "+t.field+" run the when-rule where field  "+(a.field||t.field)+" "+p(a.operator).name+" "+(a.value||"")+" "+t.field+" "+(e.length>i+1&&"then run"));var o=r.find(function(e){return e.name===(a.field||t.field)});return S({whenFieldName:a.field?a.field:t.field,operatorFn:p(a.operator),whenValue:a.value},o,n)})}function b(e,t,n){return e.forEach(function(e){var a=P()(e.when)?e.when:[e.when],i=T(a,e,n,t).some(function(e){return!0===e});D.a.debug("And the result is",i),(e.operations||[e.operation]).forEach(function(a){var o=t.find(function(t){return t.name===(a.field||e.field)}),l=a.field,s=a.type,p=r(a,["field","type"]);D.a.debug("---- For field "+(l||e.field)+" \n                        execute "+u(s).name+" \n                        with",p),u(s)(o,p,i,n)})}),t}t.b=a,t.a=b;var A=n(227),N=n.n(A),O=n(20),D=n.n(O),C=n(11),I=(n.n(C),n(85)),P=n.n(I),w=n(1770),R=n(230),L=new Map([["EQUALS",m],["NOT_EQUALS",f],["HAS_VALUE",c],["HAS_NO_VALUE",n.i(C.negate)(c)],["HAS_STRING_VALUE",d],["ONEOF",g],["NONEOF",h],["SYSTEM_SETTING_IS_TRUE",v],["SYSTEM_SETTING_IS_FALSE",E],["IS_VALID_POINT",y],["IS_HIDDEN_FIELD",_]]),V=new Map([["SET_PROP",o],["CHANGE_VALUE",i],["HIDE_FIELD",l],["SHOW_FIELD",s]])},1761:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){var n=e.onClick,a=(e.isPristine,e.isDirtyHandler),i=void 0===a?p.a.getState.bind(p.a):a,l=r(e,["onClick","isPristine","isDirtyHandler"]),u=i&&i()&&i().dirty,d=function(){u?confirm(t.d2.i18n.getTranslation("abandon_unsaved_changes"))&&n.apply(void 0,arguments):n.apply(void 0,arguments)};return o.a.createElement(s.a,c({},l,{onClick:d,secondary:u,label:t.d2.i18n.getTranslation("cancel")}))}var i=n(0),o=n.n(i),l=n(55),s=n.n(l),u=n(34),p=n(120),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};a.propTypes={onClick:o.a.PropTypes.func.isRequired,isDirtyHandler:o.a.PropTypes.func},t.a=n.i(u.a)(a)},1769:function(e,t,n){"use strict";function r(e,t){var r={enrollment:[{analyticsPeriodBoundaryType:i.f,boundaryTarget:i.c},{analyticsPeriodBoundaryType:i.e,boundaryTarget:i.c}],event:[{analyticsPeriodBoundaryType:i.f,boundaryTarget:i.b},{analyticsPeriodBoundaryType:i.e,boundaryTarget:i.b}]};return t&&function(e){return!n.i(a.isEqual)(e,r.event)&&!n.i(a.isEqual)(e,r.enrollment)}(t)?t:r[e]}t.a=r;var a=n(11),i=(n.n(a),n(660))},1770:function(e,t,n){"use strict";function r(e,t){e.optionSet&&e.optionSet.valueType&&(t.value=e.optionSet.valueType,e[t.name]!==e.optionSet.valueType&&(e[t.name]=e.optionSet.valueType))}var a=n(1769);t.a=new Map([["dataElement",[{field:"domainType",when:{operator:"EQUALS",value:"TRACKER"},operations:[{field:"categoryCombo",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]},{field:"valueType",when:{field:"optionSet",operator:"HAS_VALUE"},operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{type:"CHANGE_VALUE",setValue:r}]},{field:"aggregationType",when:{field:"valueType",operator:"ONEOF",value:["TEXT","LONG_TEXT","LETTER","PHONE_NUMBER","EMAIL","TRACKER_ASSOCIATE","USERNAME","FILE_RESOURCE","COORDINATE"]},operations:[{field:"aggregationType",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{field:"aggregationType",type:"CHANGE_VALUE",setValue:function(e,t){t.value="NONE",e[t.name]="NONE"}}]}]],["dataSetNotificationTemplate",[{when:[{field:"dataSetNotificationTrigger",operator:"NOT_EQUALS",value:"SCHEDULED_DAYS"}],operations:[{field:"relativeScheduledDays",type:"HIDE_FIELD"},{field:"sendStrategy",type:"HIDE_FIELD"}]},{field:"deliveryChannels",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"ORGANISATION_UNIT_CONTACT"}],operations:[{field:"deliveryChannels",type:"HIDE_FIELD"}]}]],["attribute",[{field:"valueType",when:{field:"optionSet",operator:"HAS_VALUE"},operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{type:"CHANGE_VALUE",setValue:r}]}]],["trackedEntityAttribute",[{field:"unique",when:[{field:"valueType",operator:"ONEOF",value:["BOOLEAN","TRUE_ONLY","DATE","TRACKER_ASSOCIATE","USERNAME","OPTION_SET"]}],operations:[{field:"unique",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{field:"unique",type:"CHANGE_VALUE",setValue:function(e,t){t.value=!1,e.unique=!1}}]},{field:"valueType",when:{field:"optionSet",operator:"HAS_VALUE"},operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{type:"CHANGE_VALUE",setValue:r}]},{field:"orgunitScope",when:[{field:"unique",operator:"NOT_EQUALS",value:!0},{field:"valueType",operator:"ONEOF",value:["BOOLEAN","TRUE_ONLY","DATE","TRACKER_ASSOCIATE","USERNAME","OPTION_SET"]}],operations:[{type:"HIDE_FIELD"}]},{field:"generated",when:[{field:"orgunitScope",operator:"IS_HIDDEN_FIELD"},{field:"orgunitScope",operator:"ONEOF",value:["organisation_unit"]},{field:"orgunitScope",operator:"EQUALS",value:!0}],operations:[{type:"HIDE_FIELD"},{type:"CHANGE_VALUE",setValue:function(e,t){t.value=!1,e.generated=!1}}]},{field:"pattern",when:[{field:"generated",operator:"IS_HIDDEN_FIELD"},{field:"generated",operator:"NOT_EQUALS",value:!0}],operations:[{type:"HIDE_FIELD"},{type:"CHANGE_VALUE",setValue:function(e,t){t.value=null,e.pattern=null}}]}]],["externalMapLayer",[{field:"legendSetUrl",when:[{field:"legendSet",operator:"HAS_VALUE"}],operations:[{field:"legendSetUrl",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]},{field:"legendSet",when:[{field:"legendSetUrl",operator:"HAS_STRING_VALUE"}],operations:[{field:"legendSet",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]}]],["organisationUnit",[{field:"dataSets",when:[{operator:"SYSTEM_SETTING_IS_FALSE",value:"keyAllowObjectAssignment"}],operations:[{field:"dataSets",type:"HIDE_FIELD"}]},{field:"programs",when:[{operator:"SYSTEM_SETTING_IS_FALSE",value:"keyAllowObjectAssignment"}],operations:[{field:"programs",type:"HIDE_FIELD"}]},{field:"featureType",when:[{field:"coordinates",operator:"HAS_VALUE"}],operations:[{type:"CHANGE_VALUE",setValue:function(e){e.coordinates?function(e){try{var t=JSON.parse(e);return Array.isArray(t)&&(0===t.length||2===t.length&&!isNaN(t[0])&&!isNaN(t[1]))}catch(e){}return!1}(e.coordinates)&&(e.featureType="POINT"):e.featureType=null}}]}]],["programRule",[{field:"name",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]},{field:"description",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]},{field:"priority",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]},{field:"condition",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]},{field:"programRuleActions",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]}]],["programRuleVariable",[{field:"program",when:[{field:"dataElement",operator:"HAS_STRING_VALUE"},{field:"trackedEntityAttribute",operator:"HAS_STRING_VALUE"},{field:"programStage",operator:"HAS_STRING_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]},{field:"dataElement",when:[{field:"programRuleVariableSourceType",operator:"ONEOF",value:["CALCULATED_VALUE","TEI_ATTRIBUTE"]}],operations:[{field:"dataElement",type:"HIDE_FIELD"}]},{field:"trackedEntityAttribute",when:[{field:"programRuleVariableSourceType",operator:"NOT_EQUALS",value:"TEI_ATTRIBUTE"}],operations:[{field:"trackedEntityAttribute",type:"HIDE_FIELD"}]},{field:"programStage",when:[{field:"programRuleVariableSourceType",operator:"NOT_EQUALS",value:"DATAELEMENT_NEWEST_EVENT_PROGRAM_STAGE"}],operations:[{field:"programStage",type:"HIDE_FIELD"}]},{field:"programStage",when:[{field:"dataElement",operator:"HAS_STRING_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]}]],["programStage",[{field:"autoGenerateEvent",when:[{field:"autoGenerateEvent",operator:"NOT_EQUALS",value:!0}],operations:[{field:"openAfterEnrollment",type:"HIDE_FIELD"},{field:"reportDateToUse",type:"HIDE_FIELD"}]},{field:"reportDateToUse",when:[{field:"openAfterEnrollment",operator:"NOT_EQUALS",value:!0}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]}]],["enrollment",[{field:"relationshipType",when:[{field:"relationshipType",operator:"HAS_NO_VALUE"}],operations:[{field:"relationshipFromA",type:"HIDE_FIELD"},{field:"relationshipText",type:"HIDE_FIELD"},{field:"relatedProgram",type:"HIDE_FIELD"}]},{field:"relationshipFromA",when:[{field:"relationshipType",operator:"HAS_VALUE"}],operations:[{field:"relatedProgram",type:"SET_PROP",propName:"isRequired",thenValue:!0,elseValue:!1},{field:"relationshipFromA",type:"SET_PROP",propName:"isRequired",thenValue:!0,elseValue:!1},{field:"relationshipText",type:"SET_PROP",propName:"required",thenValue:!0,elseValue:!1}]}]],["programIndicator",[{field:"analyticsPeriodBoundaries",when:[{field:"analyticsType",operator:"EQUALS",value:"EVENT"}],operations:[{type:"CHANGE_VALUE",setValue:function(e,t){t&&(t.value=n.i(a.a)("event",t.value),e[t.name]=n.i(a.a)("event",t.value))}}]},{field:"analyticsPeriodBoundaries",when:[{field:"analyticsType",operator:"EQUALS",value:"ENROLLMENT"}],operations:[{type:"CHANGE_VALUE",setValue:function(e,t){t&&(t.value=n.i(a.a)("enrollment",t.value),e[t.name]=n.i(a.a)("enrollment",t.value))}}]}]],["programStageNotificationTemplate",[{field:"notificationTrigger",when:[{field:"notificationTrigger",operator:"NOT_EQUALS",value:"SCHEDULED_DAYS_DUE_DATE"}],operations:[{field:"relativeScheduledDays",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NONEOF",value:["TRACKED_ENTITY_INSTANCE","ORGANISATION_UNIT_CONTACT"]}],operations:[{field:"deliveryChannels",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"DATA_ELEMENT"}],operations:[{field:"recipientDataElement",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"PROGRAM_ATTRIBUTE"}],operations:[{field:"recipientProgramAttribute",type:"HIDE_FIELD"}]}]],["programNotificationTemplate",[{field:"notificationTrigger",when:[{field:"notificationTrigger",operator:"NONEOF",value:["SCHEDULED_DAYS_INCIDENT_DATE","SCHEDULED_DAYS_ENROLLMENT_DATE"]}],operations:[{field:"relativeScheduledDays",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NONEOF",value:["TRACKED_ENTITY_INSTANCE","ORGANISATION_UNIT_CONTACT"]}],operations:[{field:"deliveryChannels",type:"HIDE_FIELD"}]},{field:"notificationRecipient",when:[{field:"notificationRecipient",operator:"NOT_EQUALS",value:"PROGRAM_ATTRIBUTE"}],operations:[{field:"recipientProgramAttribute",type:"HIDE_FIELD"}]}]],["categoryCombo",[{field:"dataDimensionType",when:[{field:"dataDimensionType",operator:"HAS_NO_VALUE"}],operations:[{type:"CHANGE_VALUE",setValue:function(e,t){t.value=e[t.name]="DISAGGREGATION"}}]}]]])},1775:function(e,t,n){"use strict";function r(e){var t={marginTop:"1rem"},n={marginRight:"1rem",width:"10rem"},r=l()(e.children)?e.children:[e.children];return i.a.createElement("div",{style:Object.assign(t,e.style)},r.map(function(e,t){return i.a.cloneElement(e,{style:n,key:t})}))}t.a=r;var a=n(0),i=n.n(a),o=n(85),l=n.n(o);r.propTypes={style:i.a.PropTypes.object,children:i.a.PropTypes.oneOfType([i.a.PropTypes.array,i.a.PropTypes.object]).isRequired,isFormValid:i.a.PropTypes.func}},2101:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){return l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(u.a,null))}function i(e,t){return e.map(function(e){return e.value}).find(function(e){return-1!==Array.from(t.indicatorGroups.values()).map(function(e){return e.id}).indexOf(e)})}var o=n(0),l=n.n(o),s=n(15),u=(n.n(s),n(101)),p=n(47),c=n(710);t.a=l.a.createClass({displayName:"DataIndicatorGroupsAssignment.component",propTypes:{source:l.a.PropTypes.object.isRequired},getInitialState:function(){return c.a.setState({indicatorGroupValues:{},remove:[],save:[]}),{indicatorGroupSets:null}},componentDidMount:function(){var e=this;n.i(s.getInstance)().then(function(e){return e.Api.getApi().get("indicatorGroupSets",{fields:"id,displayName,indicatorGroups[id,displayName]",filter:["compulsory:eq:true"],paging:!1})}).then(function(e){return e.indicatorGroupSets}).then(function(t){return e.setState({indicatorGroupSets:t})}),this.subscription=c.a.subscribe(function(){return e.forceUpdate()})},componentWillUnmount:function(){this.subscription&&this.subscription&&this.subscription.unsubscribe()},render:function(){var e=this;return this.state.indicatorGroupSets?l.a.createElement("div",null,this.state.indicatorGroupSets.map(function(t,n){var r=t.indicatorGroups.map(function(e){return{value:e.id,text:e.displayName}}),a=Object.prototype.hasOwnProperty.call(c.a.state.indicatorGroupValues,t.id)?c.a.state.indicatorGroupValues[t.id]:i(r,e.props.source);return l.a.createElement("div",{key:"dataIndicatorGroupAssignment"+n},l.a.createElement(p.a,{key:t.id,labelText:t.displayName,translateLabel:!1,options:r,value:a,onChange:e._updateGroupStatus.bind(e,t.id,i(r,e.props.source)),fullWidth:!0}))})):a()},_updateGroupStatus:function(e,t,n){this.props.source.dirty=!0,c.a.setState({indicatorGroupValues:Object.assign({},c.a.state.indicatorGroupValues,r({},e,n.target.value?n.target.value:null)),remove:Array.from(new Set(c.a.state.remove.concat([t])).values())})}})},2102:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(20),o=n.n(i),l=n(16),s=(n.n(l),n(2133)),u=(n.n(s),n(15)),p=(n.n(u),n(339)),c=(n.n(p),n(101)),d=n(647),m=n(648),f=n(1686),g=n(2117),h=n(120),y=n(66),_=n(62),v=n(1685),E=n(1761),S=n(2104),T=n(1775),b=n(2108),A=n(64),N=n(1655),O=n(1688),D=n(2109),C=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),I=A.b.filter(function(e){return e.sideBar&&e.sideBar.currentSection}).map(function(e){return e.sideBar.currentSubSection}).filter(function(e){return e}).distinctUntilChanged(),P=I.flatMap(function(e){return l.Observable.fromPromise(n.i(N.a)(e))}),w=function(e){return void 0===e.id},R=l.Observable.fromPromise(n.i(u.getInstance)()),L=l.Observable.combineLatest(h.a,P,I,R).filter(function(e){var t=C(e,3),n=t[0],r=(t[1],t[2]);return!!(n&&n.modelDefinition&&n.modelDefinition.name)&&n.modelDefinition.name===r}).map(function(e){var t=C(e,4),r=t[0],a=t[1],i=t[2],o=(t[3],a.map(function(e){return e.fieldOptions.model=r,w(r)||-1===g.a.for(i).indexOf(e.name)||(e.props.disabled=!0),Object.keys(r.attributes||[]).indexOf(e.name)>=0?(e.value=r.attributes[e.name],e):(e.beforePassToFieldConverter?e.value=e.beforePassToFieldConverter(r[e.name]):e.value=r[e.name],e)}));return{fieldConfigs:[].concat(n.i(O.a)(n.i(O.b)(r.modelDefinition.name),o,r),(b.a[i]||[]).map(function(e){return e.props=e.props||{},e.props.modelToEdit=r,e})).map(function(e){return n.i(N.b)(e,r)}),modelToEdit:r,isLoading:!1}});t.a=a.a.createClass({displayName:"EditModelForm.component",propTypes:{modelId:a.a.PropTypes.string.isRequired,modelType:a.a.PropTypes.string.isRequired,onSaveSuccess:a.a.PropTypes.func.isRequired,onSaveError:a.a.PropTypes.func.isRequired,onCancel:a.a.PropTypes.func.isRequired},mixins:[d.a],getInitialState:function(){return{modelToEdit:void 0,isLoading:!0,formState:{validating:!1,valid:!0,pristine:!0},activeStep:0}},isAddOperation:function(){return"add"===this.props.modelId},componentWillMount:function(){var e=this;this.subscription=L.subscribe(function(t){e.setState(t),e.setActiveStep(e.state.activeStep)},function(e){_.a.show({message:e,action:"ok"})})},componentWillUnmount:function(){this.subscription&&this.subscription.unsubscribe()},renderSharingNotification:function(){var e={width:"100%",margin:"0 auto 3rem",position:"relative"};return this.isAddOperation()?a.a.createElement(S.a,{style:e,modelType:this.props.modelType}):null},renderStepper:function(){var e=this,t=f.a.for(this.props.modelType);return t.length>1?a.a.createElement(s.Stepper,{activeStep:this.state.activeStep,linear:!1,style:{margin:"0 -16px"}},t.map(function(t,n){return a.a.createElement(s.Step,{key:n},a.a.createElement(s.StepButton,{onClick:function(){return e.setActiveStep(n)}},e.getTranslation(t.label)))})):null},renderForm:function(){var e={width:"100%",margin:"0 auto 2rem",padding:"2rem 5rem 4rem",position:"relative"};return this.state.isLoading?a.a.createElement(c.a,null):a.a.createElement("div",{style:e},this.renderStepper(),this.renderSharingNotification(),a.a.createElement(m.a,{fields:this.state.fieldConfigs,onUpdateField:this._onUpdateField,onUpdateFormStatus:this._onUpdateFormStatus,ref:this.setFormRef}),a.a.createElement(T.a,null,a.a.createElement(v.a,{onClick:this._saveAction,isValid:!this.state.formState.validating,isSaving:this.state.isSaving}),a.a.createElement(E.a,{onClick:this._closeAction})))},render:function(){return this.state.loading?a.a.createElement("div",null,"Loading data...."):this.renderForm()},setActiveStep:function(e){var t=f.a.groupsByField(this.props.modelType);t&&this.setState({activeStep:e,fieldConfigs:this.state.fieldConfigs.map(function(n){return t[n.name]===e?n.props.style={display:"block"}:n.props.style={display:"none"},n})})},setFormRef:function(e){this.formRef=e},_onUpdateField:function(e,t){var n=this.state.fieldConfigs.find(function(t){return t.name==e});return n&&n.beforeUpdateConverter?y.a.update({fieldName:e,value:n.beforeUpdateConverter(t)}):y.a.update({fieldName:e,value:t})},_onUpdateFormStatus:function(e){this.setState({formState:e})},_saveAction:function(e){var t=this;e.preventDefault();var r=n.i(D.a)(this.state.fieldConfigs,this.formRef);if(r)return void _.a.show({message:this.getTranslation("missing_required_property_field")+" "+r,action:"ok"});this.setState({isSaving:!0}),y.a.saveObject({id:this.props.modelId,modelType:this.props.modelType}).subscribe(function(e){t.setState({isSaving:!1}),_.a.show({message:e,translate:!0}),t.props.onSaveSuccess(t.state.modelToEdit)},function(e){if(200===e.httpStatusCode)return o.a.warn("Save errored due to empty 200 OK body"),_.a.show({message:"success",action:"ok",translate:!0}),t.props.onSaveSuccess(t.state.modelToEdit);o.a.error(e),t.setState({isSaving:!1}),n.i(p.isString)(e)&&(o.a.debug(e),_.a.show({message:e,action:"ok"})),t.props.onSaveError(e)})},_closeAction:function(e){e.preventDefault(),this.props.onCancel()}})},2103:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(41),o=n(360),l=n(2120),s=n(15),u=(n.n(s),n(16)),p=(n.n(u),n(647));i.a.createActionsFromNames(["requestExpressionStatus"]).requestExpressionStatus.debounceTime(500).map(function(e){var t=encodeURIComponent(e.data),r="expressions/description?expression="+t,a=n.i(s.getInstance)().then(function(e){return e.Api.getApi().get(r)});return u.Observable.fromPromise(a)}).concatAll().subscribe(function(e){l.a.setState(e)});var c=a.a.createClass({displayName:"IndicatorExpressionManagerContainer",propTypes:{indicatorExpressionChanged:a.a.PropTypes.func.isRequired,description:a.a.PropTypes.string,formula:a.a.PropTypes.string,titleText:a.a.PropTypes.string},mixins:[p.a],getInitialState:function(){return{organisationUnitGroups:[],constants:[],programTrackedEntityAttributes:[],programIndicators:[],programDataElements:[]}},componentDidMount:function(){var e=this;n.i(s.getInstance)().then(function(e){return e.models.organisationUnitGroup.list({paging:!1,fields:"id,displayName"})}).then(function(e){return e.toArray().map(function(e){return{value:e.id,label:e.displayName}})}).then(function(t){return e.setState({organisationUnitGroups:t})}),n.i(s.getInstance)().then(function(e){return e.models.constant.list({paging:!1,fields:"id,displayName"})}).then(function(e){return e.toArray().map(function(e){return{value:e.id,label:e.displayName}})}).then(function(t){return e.setState({constants:t})}),this.refs.expressionManager.requestExpressionStatus()},getExpressionManager:function(){return this.refs.expressionManager},render:function(){return a.a.createElement(o.a,{descriptionLabel:this.getTranslation("description"),descriptionValue:this.props.description,formulaValue:this.props.formula,expressionStatusStore:l.a,expressionChanged:this.props.indicatorExpressionChanged,titleText:this.props.titleText,ref:"expressionManager"})}});t.a=c},2104:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(647),o=n(15),l=(n.n(o),n(217)),s=n.n(l),u=n(154),p=n.n(u),c=n(1658),d=a.a.createClass({displayName:"SharingNotification",propTypes:{modelType:a.a.PropTypes.string,style:a.a.PropTypes.object},mixins:[i.a],render:function(){var e=this.props.getModelDefinitionByName(this.props.modelType),t=this.props.getCurrentUser().canCreatePublic(e),n=this.props.getCurrentUser().canCreatePrivate(e),r=Object.assign({},this.props.style,{background:"none",margin:"14px 0 0 -4px"}),i={verticalAlign:"super",lineHeight:"24px",paddingLeft:".5rem"},o=null;return t?o=a.a.createElement(p.a,{style:r,zDepth:0},a.a.createElement(s.a,{className:"material-icons"},"lock_open"),a.a.createElement("span",{style:i},this.getTranslation("object_will_created_public"))):n&&(o=a.a.createElement(p.a,{style:r,zDepth:0},a.a.createElement(s.a,{className:"material-icons"},"lock"),a.a.createElement("span",{style:i},this.getTranslation("object_will_created_private")))),o}});t.a=n.i(c.a)(d)},2105:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){return l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(u.a,null))}function i(e,t){return e.map(function(e){return e.value}).find(function(e){return-1!==Array.from(t.dataElementGroups.values()).map(function(e){return e.id}).indexOf(e)})}var o=n(0),l=n.n(o),s=n(15),u=(n.n(s),n(101)),p=n(47),c=n(707);t.a=l.a.createClass({displayName:"DataElementGroupsAssignment.component",propTypes:{source:l.a.PropTypes.object.isRequired},getInitialState:function(){return c.a.setState({dataElementGroupValues:{},remove:[],save:[]}),{dataElementGroupSets:null}},componentDidMount:function(){var e=this;n.i(s.getInstance)().then(function(e){return e.Api.getApi().get("dataElementGroupSets",{fields:"id,displayName,dataElementGroups[id,displayName]",filter:["compulsory:eq:true"],paging:!1})}).then(function(e){return e.dataElementGroupSets}).then(function(t){return e.setState({dataElementGroupSets:t})}),this.subscription=c.a.subscribe(function(){return e.forceUpdate()})},componentWillUnmount:function(){this.subscription&&this.subscription.unsubscribe&&this.subscription.unsubscribe()},_updateGroupStatus:function(e,t,n){this.props.source.dirty=!0,c.a.setState({dataElementGroupValues:Object.assign({},c.a.state.dataElementGroupValues,r({},e,n.target.value?n.target.value:null)),remove:Array.from(new Set(c.a.state.remove.concat([t])).values())})},render:function(){var e=this;return this.state.dataElementGroupSets?l.a.createElement("div",null,this.state.dataElementGroupSets.map(function(t){var n=t.dataElementGroups.map(function(e){return{value:e.id,text:e.displayName}}),r=Object.prototype.hasOwnProperty.call(c.a.state.dataElementGroupValues,t.id)?c.a.state.dataElementGroupValues[t.id]:i(n,e.props.source);return l.a.createElement("div",{key:t.id},l.a.createElement(p.a,{labelText:t.displayName,translateLabel:!1,options:n,value:r,onChange:e._updateGroupStatus.bind(e,t.id,i(n,e.props.source)),fullWidth:!0}))})):a()}})},2108:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),l=n.n(o),s=n(338),u=n.n(s),p=n(98),c=n.n(p),d=n(83),m=n.n(d),f=n(34),g=n(2103),h=n(120),y=n(2101),_=n(2105),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S={saveButton:{marginRight:"1rem"},customContentStyle:{width:"95%",maxWidth:"none"}},T=function(e){function t(e,n){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.state={dialogValid:!0,dialogOpen:!1},i.setNumerator=i.setNumerator.bind(i),i.setDenominator=i.setDenominator.bind(i),i.closeDialog=i.closeDialog.bind(i),i.saveToModelAndCloseDialog=i.saveToModelAndCloseDialog.bind(i),i.indicatorExpressionChanged=i.indicatorExpressionChanged.bind(i),i}return i(t,e),E(t,[{key:"setNumerator",value:function(){this.setState({type:"numerator",dialogOpen:!0})}},{key:"setDenominator",value:function(){this.setState({type:"denominator",dialogOpen:!0})}},{key:"closeDialog",value:function(){this.setState({dialogOpen:!1})}},{key:"saveToModelAndCloseDialog",value:function(){this.state.expressionStatus.isValid&&(this.props.modelToEdit[this.state.type]=this.state.expressionFormula,this.props.modelToEdit[this.state.type+"Description"]=this.state.expressionDescription,h.a.setState(this.props.modelToEdit)),this.setState({dialogOpen:!1})}},{key:"indicatorExpressionChanged",value:function(e){var t={};e.expressionStatus.isValid&&(t.expressionStatus=e.expressionStatus,t.expressionDescription=e.description,t.expressionFormula=e.formula),this.setState(v({dialogValid:e.expressionStatus.isValid&&Boolean(e.description.trim())},t))}},{key:"renderExpressionManager",value:function(){return l.a.createElement(g.a,{indicatorExpressionChanged:this.indicatorExpressionChanged,formula:this.props.modelToEdit[this.state.type]||"",description:this.props.modelToEdit[this.state.type+"Description"]||"",ref:"expressionManagerContainer"})}},{key:"render",value:function(){var e=this.context.d2,t=[l.a.createElement(m.a,{label:e.i18n.getTranslation("cancel"),onTouchTap:this.closeDialog}),l.a.createElement(m.a,{label:e.i18n.getTranslation("done"),onTouchTap:this.saveToModelAndCloseDialog,disabled:!this.state.dialogValid})];return l.a.createElement("div",null,l.a.createElement("div",{style:{marginTop:"2rem"}},l.a.createElement(c.a,{label:e.i18n.getTranslation("edit_numerator"),onClick:this.setNumerator,style:{marginRight:"2rem"}}),l.a.createElement(c.a,{label:e.i18n.getTranslation("edit_denominator"),onClick:this.setDenominator}),l.a.createElement(u.a,{title:e.i18n.getTranslation("edit_"+this.state.type),open:this.state.dialogOpen,modal:!0,actions:t,contentStyle:S.customContentStyle,autoScrollBodyContent:!0,repositionOnUpdate:!1},this.state?this.renderExpressionManager():null)),l.a.createElement("div",{style:{marginTop:"2rem"}},l.a.createElement(y.a,{source:this.props.modelToEdit})))}}]),t}(l.a.Component);T.propTypes={modelToEdit:l.a.PropTypes.object.isRequired},t.a={dataElement:[{name:"dataElementGroupAssignment",component:function(e){return l.a.createElement("div",{style:{marginTop:"2rem"}},l.a.createElement(_.a,{source:e.modelToEdit}))}}],indicator:[{name:"indicatorGroupAssignmentAndGroupAssignments",component:n.i(f.a)(T)}]}},2109:function(e,t,n){"use strict";function r(e,t){var n=t.getStateClone(),r=u(e,t,n);return r?(t.setState(n),s(r)):""}t.a=r;var a=n(11),i=(n.n(a),function(e){return!0!==e}),o=function(e){return!0===n.i(a.get)("isRequired",e.fieldOptions)},l=function(e,t,n){var r=t.validateField(n,e.name,e.value);return{invalid:i(r),step:e.step,name:e.translatedName}},s=function(e){var t=e.step?"On step "+e.step:"";return": "+e.name+". "+t},u=function(e,t,n){return e.filter(function(e){return o(e)}).map(function(e){return l(e,t,n)}).find(function(e){return e.invalid})}},2112:function(e,t,n){"use strict";t.a=["dataDimensionType"]},2113:function(e,t,n){"use strict";t.a=["dataDimensionType"]},2114:function(e,t,n){"use strict";t.a=["name"]},2115:function(e,t,n){"use strict";t.a=["dataDimensionType"]},2116:function(e,t,n){"use strict";t.a=["dataDimensionType"]},2117:function(e,t,n){"use strict";var r=n(2112),a=n(2113),i=n(2114),o=n(2115),l=n(2116),s=n(2118),u=n(2119),p={category:r.a,categoryCombo:a.a,categoryOptionCombo:i.a,categoryOptionGroup:o.a,categoryOptionGroupSet:l.a,optionSet:s.a,programRule:u.a};t.a={for:function(e){return e&&p[e]?p[e]:[]}}},2118:function(e,t,n){"use strict";t.a=["valueType"]},2119:function(e,t,n){"use strict";t.a=["program"]},2120:function(e,t,n){"use strict";var r=n(24);t.a=r.a.create()},2133:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Stepper=t.StepLabel=t.StepContent=t.StepButton=t.Step=void 0;var a=n(664),i=r(a),o=n(665),l=r(o),s=n(666),u=r(s),p=n(367),c=r(p),d=n(667),m=r(d);t.Step=i.default,t.StepButton=l.default,t.StepContent=u.default,t.StepLabel=c.default,t.Stepper=m.default},2197:function(e,t,n){"use strict";function r(e,t){"No changes to be saved"===e&&n.i(p.a)("/list/"+t.groupName+"/"+t.modelType)}function a(e){return o.a.createElement(s.a,null,o.a.createElement(u.a,c({},e,{onCancel:function(){return n.i(p.a)("/list/"+e.groupName+"/"+e.modelType)},onSaveSuccess:function(){return n.i(p.a)("/list/"+e.groupName+"/"+e.modelType)},onSaveError:function(t){return r(t,e)}})))}t.a=a;var i=n(0),o=n.n(i),l=n(154),s=n.n(l),u=n(2102),p=n(82),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},369:function(e,t,n){"use strict";function r(e){var t=e.params.modelType||"organisationUnit";return i.a.createElement("div",null,i.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginBottom:"1rem"}},i.a.createElement(p.a,{schema:t,groupName:e.params.groupName},n.i(s.camelCaseToUnderscores)(t))),i.a.createElement(u.a,{groupName:e.params.groupName,modelType:t,modelId:e.params.modelId}))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n.n(a),o=n(1),l=n.n(o),s=n(339),u=(n.n(s),n(2197)),p=n(1684);r.propTypes={params:l.a.any.isRequired},t.default=r}});
//# sourceMappingURL=0-d3b981caa3eb21697c96.js.map